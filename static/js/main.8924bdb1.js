/*! For license information please see main.8924bdb1.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,It,Et,St=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){St=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(Vt),Pt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Sn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Rn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function Yn(e){if(W(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Kn(t,Wn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Jn;else if(Gn(u))if($n)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Xt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Si(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Si(Ci,e)):Ei(Ni),Si(Ni,n)}var Ui=null,Vi=!1,ji=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,zi),i}finally{kt=t,ji=!1}}return null}var qi=[],Gi=0,Ki=null,Hi=0,Wi=[],Qi=0,Yi=null,Ji=1,$i="";function Xi(e,t){qi[Gi++]=Hi,qi[Gi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Ji,Wi[Qi++]=$i,Wi[Qi++]=Yi,Yi=e;var r=Ji;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Ji=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=qi[--Gi],qi[Gi]=null,Hi=qi[--Gi],qi[Gi]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ya.current;Ei(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Pi(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Vc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ja=Ya(!0),$a=Ya(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return To().memoizedState}function Bo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Go(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=As.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:$o,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:$o,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Hs=r),hu(0,t)},n}function vu(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ja(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Os,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Os,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Os,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Os,Ds),Ds|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Ri(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Gu(e,t),qa(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ri(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ga(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Aa||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Ri(t,s=Pi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ga(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Du,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Ji,Wi[Qi++]=$i,Wi[Qi++]=Yi,Ji=e.id,$i=e.overflow,Yi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Pi(t.type)&&Di(),Wu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Du(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":J(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Du(e,t),null===e&&zr(t.stateNode.containerInfo),Wu(t),null;case 10:return _a(t.type._context),Wu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*$e()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Du=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ju=!1,$u=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!$u&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,ds(e,t,n),$u=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ec(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=$e())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,ms(t,e),$u=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,Zu=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ju;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Ju;var c=$u;if(Ju=o,($u=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Ju=u,$u=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Is,Es=Math.ceil,Ss=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,Ns=0,As=null,Rs=null,Ps=0,Ds=0,Os=Ii(0),Ls=0,Ms=null,Fs=0,Us=0,Vs=0,js=null,Bs=null,zs=0,qs=1/0,Gs=null,Ks=!1,Hs=null,Ws=null,Qs=!1,Ys=null,Js=0,$s=0,Xs=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?$e():-1!==Zs?Zs:Zs=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,n,r){if(50<$s)throw $s=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===As||(e===As&&(0===(2&Ns)&&(Us|=n),4===Ls&&sc(e,Ps)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(qs=$e()+500,Vi&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(As===e&&Ps===t||(Gs=null,qs=$e()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Ss.current=o,Ns=i,null!==Rs?t=0:(As=null,Ps=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Bs,Gs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Bs,Gs),t);break}_c(e,Bs,Gs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Bs,Gs),r);break}_c(e,Bs,Gs);break;default:throw Error(a(329))}}}return ic(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bs,Bs=n,null!==t&&uc(t)),e}function uc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function sc(e,t){for(t&=~Vs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bs,Gs),ic(e,$e()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(qs=$e()+500,Vi&&zi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&xc();var t=Ns;Ns|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ns=t))&&zi()}}function hc(){Ds=Os.current,Ei(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(As=e,Rs=e=Oc(e.current,null),Ps=Ds=t,Ls=0,Ms=null,Vs=Us=Fs=0,Bs=js=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Rs;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Rs=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function vc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Fs)&&0===(268435455&Us)||sc(As,Ps)}function yc(e,t){var n=Ns;Ns|=2;var r=vc();for(As===e&&Ps===t||(Gs=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Ns=n,Ss.current=r,null!==Rs)throw Error(a(261));return As=null,Ps=0,Ls}function gc(){for(;null!==Rs;)bc(Rs)}function kc(){for(;null!==Rs&&!Ye();)bc(Rs)}function bc(e){var t=Is(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?wc(e):Rs=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ds)))return void(Rs=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Rs=n);if(null===e)return Ls=6,void(Rs=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Rs=As=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Je(),Ns=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,Js=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Hs,Hs=null,e;0!==(1&Js)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xs?$s++:($s=0,Xs=e):$s=0,zi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==Ys){var e=bt(Js),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,Js=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Ec(s,s.return,_)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ns=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(130023424&Ps)===Ps&&500>$e()-zs?dc(e,0):Vs|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return We(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case R:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Da(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Si(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gu(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Gu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Gc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Gc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,$e()),0===(6&Ns)&&(qs=$e()+500,zi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,x=function(){P.postMessage(null)}}else x=function(){y(A,0)};function D(e){E=e,I||(I=!0,x())}function O(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".dce471fc.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="librarymanagement:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/libraryManagement/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunklibrarymanagement=self.webpackChunklibrarymanagement||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return Y},SDK_VERSION:function(){return at},_DEFAULT_ENTRY_NAME:function(){return He},_addComponent:function(){return Je},_addOrOverwriteComponent:function(){return $e},_apps:function(){return Qe},_clearComponents:function(){return tt},_components:function(){return Ye},_getProvider:function(){return Ze},_registerComponent:function(){return Xe},_removeServiceInstance:function(){return et},deleteApp:function(){return ct},getApp:function(){return ut},getApps:function(){return st},initializeApp:function(){return ot},onLog:function(){return ht},registerVersion:function(){return ft},setLogLevel:function(){return dt}});var t=n(791),r=n.t(t,2),i=n(250);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(){o=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},s=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var a=t&&t.prototype instanceof k?t:k,o=Object.create(a.prototype),u=new P(r||[]);return i(o,"_invoke",{value:C(e,n,u)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var p="suspendedStart",v="suspendedYield",m="executing",y="completed",g={};function k(){}function b(){}function w(){}var _={};f(_,s,(function(){return this}));var x=Object.getPrototypeOf,I=x&&x(x(D([])));I&&I!==n&&r.call(I,s)&&(_=I);var E=w.prototype=k.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,o,u,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==a(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,s)}),(function(e){n("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===m)throw new Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var s=N(u,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?y:v,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=y,r.method="throw",r.arg=c.arg)}}}function N(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(a(t)+" is not iterable")}return b.prototype=w,i(E,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(T.prototype),f(T.prototype,c,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(h(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(E),f(E,l,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=D,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function u(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}function c(e){if(Array.isArray(e))return e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){return c(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||f(e,t)||h()}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e,t,n){return m=v()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&p(i,n.prototype),i},m.apply(null,arguments)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(){return g="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},g.apply(this,arguments)}function k(e){var t="function"===typeof Map?new Map:void 0;return k=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"===typeof e}}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return m(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},k(e)}function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){var t=v();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,n)}}function I(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function E(e){return function(e){if(Array.isArray(e))return l(e)}(e)||I(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function N(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function A(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},P={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(R(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new D;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},D=function(e){w(n,e);var t=x(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return N(n)}(k(Error)),O=function(e){return function(e){var t=R(e);return P.encodeByteArray(t,!0)}(e).replace(/\./g,"")},L=function(e){try{return P.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function M(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=M(e[n],t[n]));return e}var F=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},U=function(){try{return F()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/libraryManagement",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&L(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},V=function(e){var t=function(e){var t,n;return null===(n=null===(t=U())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},j=function(){var e;return null===(e=U())||void 0===e?void 0:e.config},B=function(){function e(){var t=this;S(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return N(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function z(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[O(JSON.stringify({alg:"none",type:"JWT"})),O(JSON.stringify(a)),""].join(".")}function q(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function G(){var e,t=null===(e=U())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function K(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function H(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function W(){var e=q();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Q(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Y=function(e){w(n,e);var t=x(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(_(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(_(a),J.prototype.create),a}return N(n)}(k(Error)),J=function(){function e(t,n,r){S(this,e),this.service=t,this.serviceName=n,this.errors=r}return N(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace($,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Y(n,a,t)}}]),e}();var $=/\{\$([^}]+)}/g;function X(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Z(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ee(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(te(u)&&te(s)){if(!ee(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function te(e){return null!==e&&"object"===typeof e}function ne(e){for(var t=[],n=function(){var e=d(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function re(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=d(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ie(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ae(e,t){var n=new oe(e,t);return n.subscribe.bind(n)}var oe=function(){function e(t,n){var r=this;S(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return N(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=b(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ue),void 0===r.error&&(r.error=ue),void 0===r.complete&&(r.complete=ue);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ue(){}function se(e){return e&&e._delegate?e._delegate:e}var ce=function(){function e(t,n,r){S(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return N(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),le="[DEFAULT]",fe=function(){function e(t,n){S(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return N(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new B;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:le})}catch(s){}var t,n=b(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(E(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),E(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=b(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=d(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===le?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.component?this.component.multipleInstances?e:le:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var he,de,pe=function(){function e(t){S(this,e),this.name=t,this.providers=new Map}return N(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new fe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ve=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(de||(de={}));var me={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},ye=de.INFO,ge=(A(he={},de.DEBUG,"log"),A(he,de.VERBOSE,"log"),A(he,de.INFO,"info"),A(he,de.WARN,"warn"),A(he,de.ERROR,"error"),he),ke=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ge[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},be=function(){function e(t){S(this,e),this.name=t,this._logLevel=ye,this._logHandler=ke,this._userLogHandler=null,ve.push(this)}return N(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in de))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?me[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.DEBUG].concat(t)),this._logHandler.apply(this,[this,de.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.VERBOSE].concat(t)),this._logHandler.apply(this,[this,de.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.INFO].concat(t)),this._logHandler.apply(this,[this,de.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.WARN].concat(t)),this._logHandler.apply(this,[this,de.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.ERROR].concat(t)),this._logHandler.apply(this,[this,de.ERROR].concat(t))}}]),e}();function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe,Ie,Ee=function(e,t){return t.some((function(t){return e instanceof t}))};var Se=new WeakMap,Te=new WeakMap,Ce=new WeakMap,Ne=new WeakMap,Ae=new WeakMap;var Re={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Te.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ce.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oe(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Pe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ie||(Ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Le(this),n),Oe(Se.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Oe(e.apply(Le(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Le(this),t].concat(r));return Ce.set(a,t.sort?t.sort():[t]),Oe(a)}}function De(e){return"function"===typeof e?Pe(e):(e instanceof IDBTransaction&&function(e){if(!Te.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Te.set(e,t)}}(e),Ee(e,xe||(xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Re):e)}function Oe(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Oe(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Se.set(t,e)})).catch((function(){})),Ae.set(t,e),t}(e);if(Ne.has(e))return Ne.get(e);var t=De(e);return t!==e&&(Ne.set(e,t),Ae.set(t,e)),t}var Le=function(e){return Ae.get(e)};var Me,Fe,Ue=["get","getKey","getAll","getAllKeys","count"],Ve=["put","add","delete","clear"],je=new Map;function Be(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(je.get(t))return je.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ve.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ue.includes(n))){var a=function(){var e=s(o().mark((function e(t){var a,u,s,c,l,f,h=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,i?"readwrite":"readonly"),s=u.store,c=h.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=h[f];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return je.set(t,a),a}}}Re=function(e){return _e(_e({},e),{},{get:function(t,n,r){return Be(t,n)||e.get(t,n,r)},has:function(t,n){return!!Be(t,n)||e.has(t,n)}})}(Re);var ze=function(){function e(t){S(this,e),this.container=t}return N(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var qe="@firebase/app",Ge="0.9.20",Ke=new be("@firebase/app"),He="[DEFAULT]",We=(A(Me={},qe,"fire-core"),A(Me,"@firebase/app-compat","fire-core-compat"),A(Me,"@firebase/analytics","fire-analytics"),A(Me,"@firebase/analytics-compat","fire-analytics-compat"),A(Me,"@firebase/app-check","fire-app-check"),A(Me,"@firebase/app-check-compat","fire-app-check-compat"),A(Me,"@firebase/auth","fire-auth"),A(Me,"@firebase/auth-compat","fire-auth-compat"),A(Me,"@firebase/database","fire-rtdb"),A(Me,"@firebase/database-compat","fire-rtdb-compat"),A(Me,"@firebase/functions","fire-fn"),A(Me,"@firebase/functions-compat","fire-fn-compat"),A(Me,"@firebase/installations","fire-iid"),A(Me,"@firebase/installations-compat","fire-iid-compat"),A(Me,"@firebase/messaging","fire-fcm"),A(Me,"@firebase/messaging-compat","fire-fcm-compat"),A(Me,"@firebase/performance","fire-perf"),A(Me,"@firebase/performance-compat","fire-perf-compat"),A(Me,"@firebase/remote-config","fire-rc"),A(Me,"@firebase/remote-config-compat","fire-rc-compat"),A(Me,"@firebase/storage","fire-gcs"),A(Me,"@firebase/storage-compat","fire-gcs-compat"),A(Me,"@firebase/firestore","fire-fst"),A(Me,"@firebase/firestore-compat","fire-fst-compat"),A(Me,"fire-js","fire-js"),A(Me,"firebase","fire-js-all"),Me),Qe=new Map,Ye=new Map;function Je(e,t){try{e.container.addComponent(t)}catch(n){Ke.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function $e(e,t){e.container.addOrOverwriteComponent(t)}function Xe(e){var t=e.name;if(Ye.has(t))return Ke.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ye.set(t,e);var n,r=b(Qe.values());try{for(r.s();!(n=r.n()).done;){Je(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ze(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function et(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He;Ze(e,t).clearInstance(n)}function tt(){Ye.clear()}var nt=(A(Fe={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),A(Fe,"bad-app-name","Illegal App name: '{$appName}"),A(Fe,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),A(Fe,"app-deleted","Firebase App named '{$appName}' already deleted"),A(Fe,"no-options","Need to provide options, when not being deployed to hosting via source."),A(Fe,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),A(Fe,"invalid-log-argument","First argument to `onLog` must be null or a function."),A(Fe,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),A(Fe,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),A(Fe,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),A(Fe,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Fe),rt=new J("app","Firebase",nt),it=function(){function e(t,n,r){var i=this;S(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ce("app",(function(){return i}),"PUBLIC"))}return N(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw rt.create("app-deleted",{appName:this._name})}}]),e}(),at="10.5.0";function ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:He,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw rt.create("bad-app-name",{appName:String(i)});if(n||(n=j()),!n)throw rt.create("no-options");var a=Qe.get(i);if(a){if(ee(n,a.options)&&ee(r,a.config))return a;throw rt.create("duplicate-app",{appName:i})}var o,u=new pe(i),s=b(Ye.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new it(n,r,u);return Qe.set(i,l),l}function ut(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=Qe.get(e);if(!t&&e===He&&j())return ot();if(!t)throw rt.create("no-app",{appName:e});return t}function st(){return Array.from(Qe.values())}function ct(e){return lt.apply(this,arguments)}function lt(){return(lt=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Qe.has(n)){e.next=6;break}return Qe.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e,t,n){var r,i=null!==(r=We[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ke.warn(u.join(" "))}Xe(new ce("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ht(e,t){if(null!==e&&"function"!==typeof e)throw rt.create("invalid-log-argument");!function(e,t){var n,r=b(ve);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=me[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:de[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function dt(e){var t;t=e,ve.forEach((function(e){e.setLogLevel(t)}))}var pt="firebase-heartbeat-database",vt=1,mt="firebase-heartbeat-store",yt=null;function gt(){return yt||(yt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Oe(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Oe(u.result),e.oldVersion,e.newVersion,Oe(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(pt,vt,{upgrade:function(e,t){if(0===t)e.createObjectStore(mt)}}).catch((function(e){throw rt.create("idb-open",{originalErrorMessage:e.message})}))),yt}function kt(e){return bt.apply(this,arguments)}function bt(){return bt=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gt();case 3:return n=e.sent,e.next=6,n.transaction(mt).objectStore(mt).get(xt(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Y?Ke.warn(e.t0.message):(i=rt.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ke.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),bt.apply(this,arguments)}function wt(e,t){return _t.apply(this,arguments)}function _t(){return _t=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gt();case 3:return r=e.sent,i=r.transaction(mt,"readwrite"),a=i.objectStore(mt),e.next=8,a.put(n,xt(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Y?Ke.warn(e.t0.message):(u=rt.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ke.warn(u.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),_t.apply(this,arguments)}function xt(e){return"".concat(e.name,"!").concat(e.options.appId)}var It=function(){function e(t){var n=this;S(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ct(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return N(e,[{key:"triggerHeartbeat",value:function(){var e=s(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Et(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Et(),n=St(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=O(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Et(){return(new Date).toISOString().substring(0,10)}function St(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=b(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Nt(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),Nt(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Tt,Ct=function(){function e(t){S(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return N(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,kt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",wt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",wt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(E(r.heartbeats),E(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Nt(e){return O(JSON.stringify({version:2,heartbeats:e})).length}Tt="",Xe(new ce("platform-logger",(function(e){return new ze(e)}),"PRIVATE")),Xe(new ce("heartbeat",(function(e){return new It(e)}),"PRIVATE")),ft(qe,Ge,Tt),ft(qe,Ge,"esm2017"),ft("fire-js","");var At,Rt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Pt={},Dt=Dt||{},Ot=Rt||self;function Lt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Mt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ft="closure_uid_"+(1e9*Math.random()>>>0),Ut=0;function Vt(e,t,n){return e.call.apply(e.bind,arguments)}function jt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Bt(e,t,n){return(Bt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vt:jt).apply(null,arguments)}function zt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function qt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Gt(){this.s=this.s,this.o=this.o}Gt.prototype.s=!1,Gt.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Ft)&&e[Ft]||(e[Ft]=++Ut))},Gt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Kt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ht(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Wt(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Lt(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Qt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Qt.prototype.h=function(){this.defaultPrevented=!0};var Yt=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ot.addEventListener("test",(function(){}),t),Ot.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Jt(e){return/^[\s\xa0]*$/.test(e)}function $t(){var e=Ot.navigator;return e&&(e=e.userAgent)?e:""}function Xt(e){return-1!=$t().indexOf(e)}function Zt(e){return Zt[" "](e),e}Zt[" "]=function(){};var en,tn,nn=Xt("Opera"),rn=Xt("Trident")||Xt("MSIE"),an=Xt("Edge"),on=an||rn,un=Xt("Gecko")&&!(-1!=$t().toLowerCase().indexOf("webkit")&&!Xt("Edge"))&&!(Xt("Trident")||Xt("MSIE"))&&!Xt("Edge"),sn=-1!=$t().toLowerCase().indexOf("webkit")&&!Xt("Edge");function cn(){var e=Ot.document;return e?e.documentMode:void 0}e:{var ln="",fn=function(){var e=$t();return un?/rv:([^\);]+)(\)|;)/.exec(e):an?/Edge\/([\d\.]+)/.exec(e):rn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):sn?/WebKit\/(\S+)/.exec(e):nn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(fn&&(ln=fn?fn[1]:""),rn){var hn=cn();if(null!=hn&&hn>parseFloat(ln)){en=String(hn);break e}}en=ln}if(Ot.document&&rn){var dn=cn();tn=dn||(parseInt(en,10)||void 0)}else tn=void 0;var pn=tn;function vn(e,t){if(Qt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(un){e:{try{Zt(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:mn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&vn.$.h.call(this)}}qt(vn,Qt);var mn={2:"touch",3:"pen",4:"mouse"};vn.prototype.h=function(){vn.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var yn="closure_listenable_"+(1e6*Math.random()|0),gn=0;function kn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++gn,this.fa=this.ia=!1}function bn(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function wn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function _n(e){var t={};for(var n in e)t[n]=e[n];return t}var xn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function In(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<xn.length;a++)n=xn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function En(e){this.src=e,this.g={},this.h=0}function Sn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Kt(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(bn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Tn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}En.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Tn(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new kn(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Cn="closure_lm_"+(1e6*Math.random()|0),Nn={};function An(e,t,n,r,i){if(r&&r.once)return Pn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)An(e,t[a],n,r,i);return null}return n=Vn(n),e&&e[yn]?e.O(t,n,Mt(r)?!!r.capture:!!r,i):Rn(e,t,n,!1,r,i)}function Rn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Mt(i)?!!i.capture:!!i,u=Fn(e);if(u||(e[Cn]=u=new En(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Mn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Yt||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ln(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Pn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Pn(e,t[a],n,r,i);return null}return n=Vn(n),e&&e[yn]?e.P(t,n,Mt(r)?!!r.capture:!!r,i):Rn(e,t,n,!0,r,i)}function Dn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Dn(e,t[a],n,r,i);else r=Mt(r)?!!r.capture:!!r,n=Vn(n),e&&e[yn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Tn(a=e.g[t],n,r,i))&&(bn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Fn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Tn(t,n,r,i)),(n=-1<e?t[e]:null)&&On(n))}function On(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[yn])Sn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ln(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Fn(t))?(Sn(n,e),0==n.h&&(n.src=null,t[Cn]=null)):bn(e)}}}function Ln(e){return e in Nn?Nn[e]:Nn[e]="on"+e}function Mn(e,t){if(e.fa)e=!0;else{t=new vn(t,this);var n=e.listener,r=e.la||e.src;e.ia&&On(e),e=n.call(r,t)}return e}function Fn(e){return(e=e[Cn])instanceof En?e:null}var Un="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vn(e){return"function"===typeof e?e:(e[Un]||(e[Un]=function(t){return e.handleEvent(t)}),e[Un])}function jn(){Gt.call(this),this.i=new En(this),this.S=this,this.J=null}function Bn(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Qt(t,e);else if(t instanceof Qt)t.target=t.target||e;else{var i=t;In(t=new Qt(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=zn(o,r,!0,t)&&i}if(i=zn(o=t.g=e,r,!0,t)&&i,i=zn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=zn(o=t.g=n[a],r,!1,t)&&i}function zn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Sn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}qt(jn,Gt),jn.prototype[yn]=!0,jn.prototype.removeEventListener=function(e,t,n,r){Dn(this,e,t,n,r)},jn.prototype.N=function(){if(jn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)bn(n[r]);delete t.g[e],t.h--}}this.J=null},jn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},jn.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var qn=Ot.JSON.stringify,Gn=function(){function e(t,n){S(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return N(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Kn(){var e=Zn,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Hn=function(){function e(){S(this,e),this.h=this.g=null}return N(e,[{key:"add",value:function(e,t){var n=Wn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Wn=new Gn((function(){return new Qn}),(function(e){return e.reset()})),Qn=function(){function e(){S(this,e),this.next=this.g=this.h=null}return N(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Yn(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Jn(e){Ot.setTimeout((function(){throw e}),0)}var $n,Xn=!1,Zn=new Hn,er=function(){var e=Ot.Promise.resolve(void 0);$n=function(){e.then(tr)}},tr=function(){for(var e;e=Kn();){try{e.h.call(e.g)}catch(n){Jn(n)}var t=Wn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Xn=!1};function nr(e,t){jn.call(this),this.h=e||1,this.g=t||Ot,this.j=Bt(this.qb,this),this.l=Date.now()}function rr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ir(e,t,n){if("function"===typeof e)n&&(e=Bt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Bt(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ot.setTimeout(e,t||0)}function ar(e){e.g=ir((function(){e.g=null,e.i&&(e.i=!1,ar(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}qt(nr,jn),(At=nr.prototype).ga=!1,At.T=null,At.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Bn(this,"tick"),this.ga&&(rr(this),this.start()))}},At.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},At.N=function(){nr.$.N.call(this),rr(this),delete this.g};var or=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return N(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ar(this)}},{key:"N",value:function(){g(y(n.prototype),"N",this).call(this),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Gt);function ur(e){Gt.call(this),this.h=e,this.g={}}qt(ur,Gt);var sr=[];function cr(e,t,n,r){Array.isArray(n)||(n&&(sr[0]=n.toString()),n=sr);for(var i=0;i<n.length;i++){var a=An(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function lr(e){wn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&On(e)}),e),e.g={}}function fr(){this.g=!0}function hr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return qn(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}ur.prototype.N=function(){ur.$.N.call(this),lr(this)},ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fr.prototype.Ea=function(){this.g=!1},fr.prototype.info=function(){};var dr={},pr=null;function vr(){return pr=pr||new jn}function mr(e){Qt.call(this,dr.Ta,e)}function yr(e){var t=vr();Bn(t,new mr(t))}function gr(e,t){Qt.call(this,dr.STAT_EVENT,e),this.stat=t}function kr(e){var t=vr();Bn(t,new gr(t,e))}function br(e,t){Qt.call(this,dr.Ua,e),this.size=t}function wr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ot.setTimeout((function(){e()}),t)}dr.Ta="serverreachability",qt(mr,Qt),dr.STAT_EVENT="statevent",qt(gr,Qt),dr.Ua="timingevent",qt(br,Qt);var _r={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},xr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ir(){}function Er(e){return e.h||(e.h=e.i())}function Sr(){}Ir.prototype.h=null;var Tr,Cr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nr(){Qt.call(this,"d")}function Ar(){Qt.call(this,"c")}function Rr(){}function Pr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ur(this),this.P=Or,e=on?125:void 0,this.V=new nr(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Dr}function Dr(){this.i=null,this.g="",this.h=!1}qt(Nr,Qt),qt(Ar,Qt),qt(Rr,Ir),Rr.prototype.g=function(){return new XMLHttpRequest},Rr.prototype.i=function(){return{}},Tr=new Rr;var Or=45e3,Lr={},Mr={};function Fr(e,t,n){e.L=1,e.v=ni($r(t)),e.s=n,e.S=!0,Ur(e,null)}function Ur(e,t){e.G=Date.now(),zr(e),e.A=$r(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),vi(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Dr,e.g=ma(e.l,n?t:null,!e.s),0<e.O&&(e.M=new or(Bt(e.Pa,e,e.g),e.O)),cr(e.U,e.g,"readystatechange",e.nb),t=e.I?_n(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),yr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Vr(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function jr(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Br(e,n))==Mr){4==t&&(e.o=4,kr(14),i=!1),hr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Lr){e.o=4,kr(15),hr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}hr(e.j,e.m,r,null),Wr(e,r)}Vr(e)&&r!=Mr&&r!=Lr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,kr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),sa(t),t.M=!0,kr(11))):(hr(e.j,e.m,n,"[Invalid Chunked Response]"),Hr(e),Kr(e))}function Br(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Mr:(n=Number(t.substring(n,r)),isNaN(n)?Lr:(r+=1)+n>t.length?Mr:(t=t.slice(r,r+n),e.C=r+n,t))}function zr(e){e.Y=Date.now()+e.P,qr(e,e.P)}function qr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=wr(Bt(e.lb,e),t)}function Gr(e){e.B&&(Ot.clearTimeout(e.B),e.B=null)}function Kr(e){0==e.l.H||e.J||fa(e.l,e)}function Hr(e){Gr(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,rr(e.V),lr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Wr(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||_i(n.i,e)))if(!e.K&&_i(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;la(n),ea(n)}ua(n),kr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=wr(Bt(n.ib,n),6e3));if(1>=wi(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else da(n,11)}else if((e.K||n.g==e)&&la(n),!Jt(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(xi(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,ti(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=va(r,r.J?r.pa:null,r.Y),d.K){Ii(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Gr(p),zr(p)),r.g=d}else oa(r);0<n.j.length&&na(n)}else"stop"!=a[0]&&"close"!=a[0]||da(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?da(n,7):Zi(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}yr()}catch(a){}}function Qr(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Lt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Lt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Lt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(At=Pr.prototype).setTimeout=function(e){this.P=e},At.nb=function(e){e=e.target;var t=this.M;t&&3==Wi(e)?t.l():this.Pa(e)},At.Pa=function(e){try{if(e==this.g)e:{var t=Wi(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||on||this.g&&(this.h.h||this.g.ja()||Qi(this.g)))){this.J||4!=t||7==n||yr(),Gr(this);var r=this.g.da();this.ca=r;t:if(Vr(this)){var i=Qi(this.g);e="";var a=i.length,o=4==Wi(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Hr(this),Kr(this);var u="";break t}this.h.i=new Ot.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jt(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,kr(12),Hr(this),Kr(this);break e}hr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wr(this,r)}this.S?(jr(this,t,u),on&&this.i&&3==t&&(cr(this.U,this.V,"tick",this.mb),this.V.start())):(hr(this.j,this.m,u,null),Wr(this,u)),4==t&&Hr(this),this.i&&!this.J&&(4==t?fa(this.l,this):(this.i=!1,zr(this)))}else(function(e){var t={};e=(e.g&&2<=Wi(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Jt(e[n])){var r=Yn(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,kr(12)):(this.o=0,kr(13)),Hr(this),Kr(this)}}}catch(t){}},At.mb=function(){if(this.g){var e=Wi(this.g),t=this.g.ja();this.C<t.length&&(Gr(this),jr(this,e,t),this.i&&4!=e&&zr(this))}},At.cancel=function(){this.J=!0,Hr(this)},At.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(yr(),kr(17)),Hr(this),this.o=2,Kr(this)):qr(this,this.Y-e)};var Yr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jr(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Jr){this.h=e.h,Xr(this,e.j),this.s=e.s,this.g=e.g,Zr(this,e.m),this.l=e.l;var t=e.i,n=new fi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ei(this,n),this.o=e.o}else e&&(t=String(e).match(Yr))?(this.h=!1,Xr(this,t[1]||"",!0),this.s=ri(t[2]||""),this.g=ri(t[3]||"",!0),Zr(this,t[4]),this.l=ri(t[5]||"",!0),ei(this,t[6]||"",!0),this.o=ri(t[7]||"")):(this.h=!1,this.i=new fi(null,this.h))}function $r(e){return new Jr(e)}function Xr(e,t,n){e.j=n?ri(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Zr(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ei(e,t,n){t instanceof fi?(e.i=t,function(e,t){t&&!e.j&&(hi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(di(this,t),vi(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ii(t,ci)),e.i=new fi(t,e.h))}function ti(e,t,n){e.i.set(t,n)}function ni(e){return ti(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ri(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ii(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ai),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ai(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Jr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ii(t,oi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ii(t,oi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ii(n,"/"==n.charAt(0)?si:ui,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ii(n,li)),e.join("")};var oi=/[#\/\?@]/g,ui=/[#\?:]/g,si=/[#\?]/g,ci=/[#\?@]/g,li=/#/g;function fi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function hi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function di(e,t){hi(e),t=mi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function pi(e,t){return hi(e),t=mi(e,t),e.g.has(t)}function vi(e,t,n){di(e,t),0<n.length&&(e.i=null,e.g.set(mi(e,t),Ht(n)),e.h+=n.length)}function mi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(At=fi.prototype).add=function(e,t){hi(this),this.i=null,e=mi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},At.forEach=function(e,t){hi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},At.ta=function(){hi(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},At.Z=function(e){hi(this);var t=[];if("string"===typeof e)pi(this,e)&&(t=t.concat(this.g.get(mi(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},At.set=function(e,t){return hi(this),this.i=null,pi(this,e=mi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},At.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},At.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var yi=N((function e(t,n){S(this,e),this.g=t,this.map=n}));function gi(e){this.l=e||ki,Ot.PerformanceNavigationTiming?e=0<(e=Ot.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ot.g&&Ot.g.Ka&&Ot.g.Ka()&&Ot.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ki=10;function bi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function wi(e){return e.h?1:e.g?e.g.size:0}function _i(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function xi(e,t){e.g?e.g.add(t):e.h=t}function Ii(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ei(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=b(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Ht(e.i)}gi.prototype.cancel=function(){if(this.i=Ei(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=b(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Si,Ti=function(){function e(){S(this,e)}return N(e,[{key:"stringify",value:function(e){return Ot.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Ot.JSON.parse(e,void 0)}}]),e}();function Ci(){this.g=new Ti}function Ni(e,t,n){var r=n||"";try{Qr(e,(function(e,n){var i=e;Mt(e)&&(i=qn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ai(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ri(e){this.l=e.ec||null,this.j=e.ob||!1}function Pi(e,t){jn.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Di,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qt(Ri,Ir),Ri.prototype.g=function(){return new Pi(this.l,this.j)},Ri.prototype.i=(Si={},function(){return Si}),qt(Pi,jn);var Di=0;function Oi(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Li(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Mi(e)}function Mi(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(At=Pi.prototype).open=function(e,t){if(this.readyState!=Di)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Mi(this)},At.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Ot).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},At.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Li(this)),this.readyState=Di},At.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Mi(this)),this.g&&(this.readyState=3,Mi(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Ot.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oi(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},At.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Li(this):Mi(this),3==this.readyState&&Oi(this)}},At.Za=function(e){this.g&&(this.response=this.responseText=e,Li(this))},At.Ya=function(e){this.g&&(this.response=e,Li(this))},At.ka=function(){this.g&&Li(this)},At.setRequestHeader=function(e,t){this.v.append(e,t)},At.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},At.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Fi=Ot.JSON.parse;function Ui(e){jn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Vi,this.L=this.M=!1}qt(Ui,jn);var Vi="",ji=/^https?$/i,Bi=["POST","PUT"];function zi(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,qi(e),Ki(e)}function qi(e){e.F||(e.F=!0,Bn(e,"complete"),Bn(e,"error"))}function Gi(e){if(e.h&&"undefined"!=typeof Dt&&(!e.C[1]||4!=Wi(e)||2!=e.da()))if(e.v&&4==Wi(e))ir(e.La,0,e);else if(Bn(e,"readystatechange"),4==Wi(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Yr)[1]||null;!a&&Ot.self&&Ot.self.location&&(a=Ot.self.location.protocol.slice(0,-1)),i=!ji.test(a?a.toLowerCase():"")}t=i}if(t)Bn(e,"complete"),Bn(e,"success");else{e.m=6;try{var o=2<Wi(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",qi(e)}}finally{Ki(e)}}}function Ki(e,t){if(e.g){Hi(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Bn(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Hi(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Ot.clearTimeout(e.A),e.A=null)}function Wi(e){return e.g?e.g.readyState:0}function Qi(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Vi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(to){return null}}function Yi(e){var t="";return wn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ji(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Yi(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ti(e,t,n))}function $i(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xi(e){this.Ga=0,this.j=[],this.l=new fr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$i("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$i("baseRetryDelayMs",5e3,e),this.hb=$i("retryDelaySeedMs",1e4,e),this.eb=$i("forwardChannelMaxRetries",2,e),this.xa=$i("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new gi(e&&e.concurrentRequestLimit),this.Ja=new Ci,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Zi(e){if(ta(e),3==e.H){var t=e.W++,n=$r(e.I);if(ti(n,"SID",e.K),ti(n,"RID",t),ti(n,"TYPE","terminate"),ia(e,n),(t=new Pr(e,e.l,t)).L=2,t.v=ni($r(n)),n=!1,Ot.navigator&&Ot.navigator.sendBeacon)try{n=Ot.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Ot.Image&&((new Image).src=t.v,n=!0),n||(t.g=ma(t.l,null),t.g.ha(t.v)),t.G=Date.now(),zr(t)}pa(e)}function ea(e){e.g&&(sa(e),e.g.cancel(),e.g=null)}function ta(e){ea(e),e.u&&(Ot.clearTimeout(e.u),e.u=null),la(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ot.clearTimeout(e.m),e.m=null)}function na(e){if(!bi(e.i)&&!e.m){e.m=!0;var t=e.Na;$n||er(),Xn||($n(),Xn=!0),Zn.add(t,e),e.C=0}}function ra(e,t){var n;n=t?t.m:e.W++;var r=$r(e.I);ti(r,"SID",e.K),ti(r,"RID",n),ti(r,"AID",e.V),ia(e,r),e.o&&e.s&&Ji(r,e.o,e.s),n=new Pr(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=aa(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),xi(e.i,n),Fr(n,r,t)}function ia(e,t){e.na&&wn(e.na,(function(e,n){ti(t,n,e)})),e.h&&Qr({},(function(e,n){ti(t,n,e)}))}function aa(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Bt(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Ni(l,o,"req"+c+"_")}catch(bu){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function oa(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;$n||er(),Xn||($n(),Xn=!0),Zn.add(t,e),e.A=0}}function ua(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=wr(Bt(e.Ma,e),ha(e,e.A)),e.A++,!0)}function sa(e){null!=e.B&&(Ot.clearTimeout(e.B),e.B=null)}function ca(e){e.g=new Pr(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=$r(e.wa);ti(t,"RID","rpc"),ti(t,"SID",e.K),ti(t,"AID",e.V),ti(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ti(t,"TO",e.qa),ti(t,"TYPE","xmlhttp"),ia(e,t),e.o&&e.s&&Ji(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=ni($r(t)),n.s=null,n.S=!0,Ur(n,e)}function la(e){null!=e.v&&(Ot.clearTimeout(e.v),e.v=null)}function fa(e,t){var n=null;if(e.g==t){la(e),sa(e),e.g=null;var r=2}else{if(!_i(e.i,t))return;n=t.F,Ii(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Bn(r=vr(),new br(r,n)),na(e)}else oa(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(wi(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=wr(Bt(e.Na,e,t),ha(e,e.C)),e.C++,!0))}(e,t)||2==r&&ua(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:da(e,5);break;case 4:da(e,10);break;case 3:da(e,6);break;default:da(e,2)}}function ha(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function da(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Bt(e.pb,e);n||(n=new Jr("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||Xr(n,"https"),ni(n)),function(e,t){var n=new fr;if(Ot.Image){var r=new Image;r.onload=zt(Ai,n,r,"TestLoadImage: loaded",!0,t),r.onerror=zt(Ai,n,r,"TestLoadImage: error",!1,t),r.onabort=zt(Ai,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=zt(Ai,n,r,"TestLoadImage: timeout",!1,t),Ot.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else kr(2);e.H=0,e.h&&e.h.za(t),pa(e),ta(e)}function pa(e){if(e.H=0,e.ma=[],e.h){var t=Ei(e.i);0==t.length&&0==e.j.length||(Wt(e.ma,t),Wt(e.ma,e.j),e.i.i.length=0,Ht(e.j),e.j.length=0),e.h.ya()}}function va(e,t,n){var r=n instanceof Jr?$r(n):new Jr(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Zr(r,r.m);else{var i=Ot.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Jr(null);r&&Xr(a,r),t&&(a.g=t),i&&Zr(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&ti(r,n,t),ti(r,"VER",e.ra),ia(e,r),r}function ma(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Ui(new Ri({ob:!0})):new Ui(e.va)).Oa(e.J),t}function ya(){}function ga(){if(rn&&!(10<=Number(pn)))throw Error("Environmental error: no available transport.")}function ka(e,t){jn.call(this),this.g=new Xi(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Jt(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Jt(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _a(this)}function ba(e){Nr.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wa(){Ar.call(this),this.status=1}function _a(e){this.g=e}function xa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ia(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Ea(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(At=Ui.prototype).Oa=function(e){this.M=e},At.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Tr.g(),this.C=this.u?Er(this.u):Er(Tr),this.g.onreadystatechange=Bt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void zi(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=b(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Ot.FormData&&e instanceof Ot.FormData,!(0<=Kt(Bi,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=b(n);try{for(c.s();!(s=c.n()).done;){var l=d(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(p){c.e(p)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Hi(this),0<this.B&&((this.L=function(e){return rn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bt(this.ua,this)):this.A=ir(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){zi(this,u)}},At.ua=function(){"undefined"!=typeof Dt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bn(this,"timeout"),this.abort(8))},At.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Bn(this,"complete"),Bn(this,"abort"),Ki(this))},At.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ki(this,!0)),Ui.$.N.call(this)},At.La=function(){this.s||(this.G||this.v||this.l?Gi(this):this.kb())},At.kb=function(){Gi(this)},At.isActive=function(){return!!this.g},At.da=function(){try{return 2<Wi(this)?this.g.status:-1}catch(Si){return-1}},At.ja=function(){try{return this.g?this.g.responseText:""}catch(Si){return""}},At.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Fi(t)}},At.Ia=function(){return this.m},At.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(At=Xi.prototype).ra=8,At.H=1,At.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Pr(this,this.l,e),n=this.s;if(this.U&&(n?In(n=_n(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=aa(this,t,r),ti(i=$r(this.I),"RID",e),ti(i,"CVER",22),this.F&&ti(i,"X-HTTP-Session-Id",this.F),ia(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Yi(n)))+"&"+r:this.o&&Ji(i,this.o,n)),xi(this.i,t),this.bb&&ti(i,"TYPE","init"),this.P?(ti(i,"$req",r),ti(i,"SID","null"),t.aa=!0,Fr(t,i,null)):Fr(t,i,r),this.H=2}}else 3==this.H&&(e?ra(this,e):0==this.j.length||bi(this.i)||ra(this))},At.Ma=function(){if(this.u=null,ca(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=wr(Bt(this.jb,this),e)}},At.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,kr(10),ea(this),ca(this))},At.ib=function(){null!=this.v&&(this.v=null,ea(this),ua(this),kr(19))},At.pb=function(e){e?(this.l.info("Successfully pinged google.com"),kr(2)):(this.l.info("Failed to ping google.com"),kr(1))},At.isActive=function(){return!!this.h&&this.h.isActive(this)},(At=ya.prototype).Ba=function(){},At.Aa=function(){},At.za=function(){},At.ya=function(){},At.isActive=function(){return!0},At.Va=function(){},ga.prototype.g=function(e,t){return new ka(e,t)},qt(ka,jn),ka.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;kr(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=va(e,null,e.Y),na(e)},ka.prototype.close=function(){Zi(this.g)},ka.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=qn(e),e=n);t.j.push(new yi(t.fb++,e)),3==t.H&&na(t)},ka.prototype.N=function(){this.g.h=null,delete this.j,Zi(this.g),delete this.g,ka.$.N.call(this)},qt(ba,Nr),qt(wa,Ar),qt(_a,ya),_a.prototype.Ba=function(){Bn(this.g,"a")},_a.prototype.Aa=function(e){Bn(this.g,new ba(e))},_a.prototype.za=function(e){Bn(this.g,new wa)},_a.prototype.ya=function(){Bn(this.g,"b")},qt(xa,(function(){this.blockSize=-1})),xa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},xa.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Ia(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Ia(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Ia(this,r),i=0;break}}this.h=i,this.i+=t},xa.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Sa={};function Ta(e){return-128<=e&&128>e?function(e,t){var n=Sa;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Ea([0|e],0>e?-1:0)})):new Ea([0|e],0>e?-1:0)}function Ca(e){if(isNaN(e)||!isFinite(e))return Aa;if(0>e)return La(Ca(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Na;return new Ea(t,0)}var Na=4294967296,Aa=Ta(0),Ra=Ta(1),Pa=Ta(16777216);function Da(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Oa(e){return-1==e.h}function La(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ea(n,~e.h).add(Ra)}function Ma(e,t){return e.add(La(t))}function Fa(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ua(e,t){this.g=e,this.h=t}function Va(e,t){if(Da(t))throw Error("division by zero");if(Da(e))return new Ua(Aa,Aa);if(Oa(e))return t=Va(La(e),t),new Ua(La(t.g),La(t.h));if(Oa(t))return t=Va(e,La(t)),new Ua(La(t.g),t.h);if(30<e.g.length){if(Oa(e)||Oa(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Ra,r=t;0>=r.X(e);)n=ja(n),r=ja(r);var i=Ba(n,1),a=Ba(r,1);for(r=Ba(r,2),n=Ba(n,2);!Da(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Ba(r,1),n=Ba(n,1)}return t=Ma(e,i.R(t)),new Ua(i,t)}for(i=Aa;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Ca(n)).R(t);Oa(o)||0<o.X(e);)o=(a=Ca(n-=r)).R(t);Da(a)&&(a=Ra),i=i.add(a),e=Ma(e,o)}return new Ua(i,e)}function ja(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ea(n,e.h)}function Ba(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Ea(i,e.h)}(At=Ea.prototype).ea=function(){if(Oa(this))return-La(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Na+r)*t,t*=Na}return e},At.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Da(this))return"0";if(Oa(this))return"-"+La(this).toString(e);for(var t=Ca(Math.pow(e,6)),n=this,r="";;){var i=Va(n,t).g,a=((0<(n=Ma(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Da(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},At.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},At.X=function(e){return Oa(e=Ma(this,e))?-1:Da(e)?0:1},At.abs=function(){return Oa(this)?La(this):this},At.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Ea(n,-2147483648&n[n.length-1]?-1:0)},At.R=function(e){if(Da(this)||Da(e))return Aa;if(Oa(this))return Oa(e)?La(this).R(La(e)):La(La(this).R(e));if(Oa(e))return La(this.R(La(e)));if(0>this.X(Pa)&&0>e.X(Pa))return Ca(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Fa(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Fa(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Fa(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Fa(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ea(n,0)},At.gb=function(e){return Va(this,e).h},At.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ea(n,this.h&e.h)},At.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ea(n,this.h|e.h)},At.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ea(n,this.h^e.h)},ga.prototype.createWebChannel=ga.prototype.g,ka.prototype.send=ka.prototype.u,ka.prototype.open=ka.prototype.m,ka.prototype.close=ka.prototype.close,_r.NO_ERROR=0,_r.TIMEOUT=8,_r.HTTP_ERROR=6,xr.COMPLETE="complete",Sr.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",jn.prototype.listen=jn.prototype.O,Ui.prototype.listenOnce=Ui.prototype.P,Ui.prototype.getLastError=Ui.prototype.Sa,Ui.prototype.getLastErrorCode=Ui.prototype.Ia,Ui.prototype.getStatus=Ui.prototype.da,Ui.prototype.getResponseJson=Ui.prototype.Wa,Ui.prototype.getResponseText=Ui.prototype.ja,Ui.prototype.send=Ui.prototype.ha,Ui.prototype.setWithCredentials=Ui.prototype.Oa,xa.prototype.digest=xa.prototype.l,xa.prototype.reset=xa.prototype.reset,xa.prototype.update=xa.prototype.j,Ea.prototype.add=Ea.prototype.add,Ea.prototype.multiply=Ea.prototype.R,Ea.prototype.modulo=Ea.prototype.gb,Ea.prototype.compare=Ea.prototype.X,Ea.prototype.toNumber=Ea.prototype.ea,Ea.prototype.toString=Ea.prototype.toString,Ea.prototype.getBits=Ea.prototype.D,Ea.fromNumber=Ca,Ea.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return La(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ca(Math.pow(n,8)),i=Aa,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Ca(Math.pow(n,o)),i=i.R(o).add(Ca(u))):i=(i=i.R(r)).add(Ca(u))}return i};var za=Pt.createWebChannelTransport=function(){return new ga},qa=Pt.getStatEventTarget=function(){return vr()},Ga=Pt.ErrorCode=_r,Ka=Pt.EventType=xr,Ha=Pt.Event=dr,Wa=Pt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Qa=(Pt.FetchXmlHttpFactory=Ri,Pt.WebChannel=Sr),Ya=Pt.XhrIo=Ui,Ja=Pt.Md5=xa,$a=Pt.Integer=Ea,Xa="@firebase/firestore",Za=function(){function e(t){S(this,e),this.uid=t}return N(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Za.UNAUTHENTICATED=new Za(null),Za.GOOGLE_CREDENTIALS=new Za("google-credentials-uid"),Za.FIRST_PARTY=new Za("first-party-uid"),Za.MOCK_USER=new Za("mock-user");var eo="10.5.0",to=new be("@firebase/firestore");function no(){return to.logLevel}function ro(e){if(to.logLevel<=de.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(oo);to.debug.apply(to,["Firestore (".concat(eo,"): ").concat(e)].concat(E(i)))}}function io(e){if(to.logLevel<=de.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(oo);to.error.apply(to,["Firestore (".concat(eo,"): ").concat(e)].concat(E(i)))}}function ao(e){if(to.logLevel<=de.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(oo);to.warn.apply(to,["Firestore (".concat(eo,"): ").concat(e)].concat(E(i)))}}function oo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(eo,") INTERNAL ASSERTION FAILED: ")+e;throw io(t),new Error(t)}function so(e,t){e||uo()}function co(e,t){return e}var lo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fo=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return N(n)}(Y),ho=N((function e(){var t=this;S(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),po=N((function e(t,n){S(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),vo=function(){function e(){S(this,e)}return N(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Za.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),mo=function(){function e(t){S(this,e),this.token=t,this.changeListener=null}return N(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),yo=function(){function e(t){S(this,e),this.t=t,this.currentUser=Za.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return N(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ho;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ho,e.enqueueRetryable((function(){return i(n.currentUser)}))};var u=function(){var t=a;e.enqueueRetryable(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){ro("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(ro("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ho)}}),0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ro("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(so("string"==typeof n.accessToken),new po(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return so(null===e||"string"==typeof e),new Za(e)}}]),e}(),go=function(){function e(t,n,r){S(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Za.FIRST_PARTY,this.I=new Map}return N(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),ko=function(){function e(t,n,r){S(this,e),this.l=t,this.h=n,this.P=r}return N(e,[{key:"getToken",value:function(){return Promise.resolve(new go(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Za.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),bo=N((function e(t){S(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),wo=function(){function e(t){S(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return N(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ro("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,ro("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ro("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):ro("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(so("string"==typeof t.token),e.R=t.token,new bo(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function _o(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var xo=function(){function e(){S(this,e)}return N(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=_o(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Io(e,t){return e<t?-1:e>t?1:0}function Eo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function So(e){return e+"\0"}var To=function(){function e(t,n){if(S(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new fo(lo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fo(lo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new fo(lo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fo(lo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return N(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Io(this.nanoseconds,e.nanoseconds):Io(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Co=function(){function e(t){S(this,e),this.timestamp=t}return N(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new To(0,0))}},{key:"max",value:function(){return new e(new To(253402300799,999999999))}}]),e}(),No=function(){function e(t,n,r){S(this,e),void 0===n?n=0:n>t.length&&uo(),void 0===r?r=t.length-n:r>t.length-n&&uo(),this.segments=t,this.offset=n,this.len=r}return N(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ao=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new fo(lo.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,E(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(No),Ro=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Po=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ro.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new fo(lo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new fo(lo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new fo(lo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new fo(lo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(No),Do=function(){function e(t){S(this,e),this.path=t}return N(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ao.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ao.fromString(t))}},{key:"fromName",value:function(t){return new e(Ao.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ao.emptyPath())}},{key:"comparator",value:function(e,t){return Ao.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ao(t.slice()))}}]),e}(),Oo=N((function e(t,n,r,i){S(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Lo(e){return e.fields.find((function(e){return 2===e.kind}))}function Mo(e){return e.fields.filter((function(e){return 2!==e.kind}))}Oo.UNKNOWN_ID=-1;var Fo=N((function e(t,n){S(this,e),this.fieldPath=t,this.kind=n}));var Uo=function(){function e(t,n){S(this,e),this.sequenceNumber=t,this.offset=n}return N(e,null,[{key:"empty",value:function(){return new e(0,Bo.min())}}]),e}();function Vo(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Co.fromTimestamp(1e9===r?new To(n+1,0):new To(n,r));return new Bo(i,Do.empty(),t)}function jo(e){return new Bo(e.readTime,e.key,-1)}var Bo=function(){function e(t,n,r){S(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return N(e,null,[{key:"min",value:function(){return new e(Co.min(),Do.empty(),-1)}},{key:"max",value:function(){return new e(Co.max(),Do.empty(),-1)}}]),e}();function zo(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Do.comparator(e.documentKey,t.documentKey))?n:Io(e.largestBatchId,t.largestBatchId)}var qo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Go=function(){function e(){S(this,e),this.onCommittedListeners=[]}return N(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Ko(e){return Ho.apply(this,arguments)}function Ho(){return(Ho=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===lo.FAILED_PRECONDITION&&t.message===qo){e.next=2;break}throw t;case 2:ro("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wo=function(){function e(t){var n=this;S(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return N(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&uo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=b(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Qo=function(){function e(t,n){var r=this;S(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new ho,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new $o(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=nu(e.target.error);r.m.reject(new $o(t,n))}}return N(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(ro("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Zo(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new $o(n,t)}}}]),e}(),Yo=function(){function e(t,n,r){S(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(q())&&io("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return N(e,[{key:"N",value:function(){var e=s(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ro("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new $o(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new fo(lo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new fo(lo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new $o(t,n))},i.onupgradeneeded=function(e){ro("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){ro("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=s(o().mark((function e(t,n,r,i){var a,u,s,c,l=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,u=0,s=o().mark((function e(){var n,s,c,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++u,e.prev=1,e.next=4,l.N(t);case 4:return l.db=e.sent,n=Qo.open(l.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),Wo.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.g;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),c=e.t1,f="FirebaseError"!==c.name&&u<3,ro("SimpleDb","Transaction failed with error:",c.message,"Retrying:",f),l.close(),f){e.next=18;break}return e.abrupt("return",{v:Promise.reject(c)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if(!(c=e.t0)){e.next=7;break}return e.abrupt("return",c.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ro("SimpleDb","Removing database:",e),eu(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!Q())return!1;if(e.v())return!0;var t=q(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"v",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/libraryManagement",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Jo=function(){function e(t){S(this,e),this.q=t,this.K=!1,this.$=null}return N(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return eu(this.q.delete())}}]),e}(),$o=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this,lo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return N(n)}(fo);function Xo(e){return"IndexedDbTransactionError"===e.name}var Zo=function(){function e(t){S(this,e),this.store=t}return N(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ro("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ro("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),eu(n)}},{key:"add",value:function(e){return ro("SimpleDb","ADD",this.store.name,e,e),eu(this.store.add(e))}},{key:"get",value:function(e){var t=this;return eu(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ro("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ro("SimpleDb","DELETE",this.store.name,e),eu(this.store.delete(e))}},{key:"count",value:function(){return ro("SimpleDb","COUNT",this.store.name),eu(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Wo((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Wo((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){ro("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Wo((function(n,r){t.onerror=function(e){var t=nu(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new Wo((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Jo(i),o=t(i.primaryKey,i.value,a);if(o instanceof Wo){var u=o.catch((function(e){return a.done(),Wo.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Wo.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function eu(e){return new Wo((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=nu(e.target.error);n(t)}}))}var tu=!1;function nu(e){var t=Yo.D(q());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new fo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return tu||(tu=!0,setTimeout((function(){throw r}),0)),r}}return e}var ru=function(){function e(t,n){S(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return N(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;ro("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=ro,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Xo(e.t4)){e.next=17;break}ro("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Ko(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),iu=function(){function e(t,n){S(this,e),this.localStore=t,this.persistence=n}return N(e,[{key:"ne",value:function(){var e=s(o().mark((function e(){var t,n=this,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Wo.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return ro("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return ro("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=jo(t);zo(r,n)>0&&(n=r)})),new Bo(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),au=function(){function e(t,n){var r=this;S(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return N(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function ou(e){return null==e}function uu(e){return 0===e&&1/e==-1/0}function su(e){return"number"==typeof e&&Number.isInteger(e)&&!uu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function cu(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=fu(t)),t=lu(e.get(n),t);return fu(t)}function lu(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function fu(e){return e+"\x01\x01"}function hu(e){var t=e.length;if(so(t>=2),2===t)return so("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ao.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&uo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:uo()}a=o+2}return new Ao(r)}au.ae=-1;var du=["userId","batchId"];function pu(e,t){return[e,cu(t)]}function vu(e,t,n){return[e,cu(t),n]}var mu={},yu=["prefixPath","collectionGroup","readTime","documentId"],gu=["prefixPath","collectionGroup","documentId"],ku=["collectionGroup","readTime","prefixPath","documentId"],bu=["canonicalId","targetId"],wu=["targetId","path"],_u=["path","targetId"],xu=["collectionId","parent"],Iu=["indexId","uid"],Eu=["uid","sequenceNumber"],Su=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Tu=["indexId","uid","orderedDocumentKey"],Cu=["userId","collectionPath","documentId"],Nu=["userId","collectionPath","largestBatchId"],Au=["userId","collectionGroup","largestBatchId"],Ru=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Pu=[].concat(E(Ru),["documentOverlays"]),Du=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ou=Du,Lu=[].concat(Ou,["indexConfiguration","indexState","indexEntries"]),Mu=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return N(n)}(Go);function Fu(e,t){var n=co(e);return Yo.O(n.ue,t)}function Uu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ju(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Bu=function(){function e(t,n){S(this,e),this.comparator=t,this.root=n||qu.EMPTY}return N(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new zu(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new zu(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new zu(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new zu(this.root,e,this.comparator,!0)}}]),e}(),zu=function(){function e(t,n,r,i){S(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return N(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),qu=function(){function e(t,n,r,i,a){S(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return N(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw uo();if(this.right.isRed())throw uo();var e=this.left.check();if(e!==this.right.check())throw uo();return e+(this.isRed()?0:1)}}]),e}();qu.EMPTY=null,qu.RED=!0,qu.BLACK=!1,qu.EMPTY=new(function(){function e(){S(this,e),this.size=0}return N(e,[{key:"key",get:function(){throw uo()}},{key:"value",get:function(){throw uo()}},{key:"color",get:function(){throw uo()}},{key:"left",get:function(){throw uo()}},{key:"right",get:function(){throw uo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new qu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Gu=function(){function e(t){S(this,e),this.comparator=t,this.data=new Bu(this.comparator)}return N(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Ku(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Ku(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Ku=function(){function e(t){S(this,e),this.iter=t}return N(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Hu(e){return e.hasNext()?e.getNext():void 0}var Wu=function(){function e(t){S(this,e),this.fields=t,t.sort(Po.comparator)}return N(e,[{key:"unionWith",value:function(t){var n,r=new Gu(Po.comparator),i=b(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=b(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=b(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Eo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Qu=function(e){w(n,e);var t=x(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return N(n)}(k(Error));var Yu=function(e){function t(e){S(this,t),this.binaryString=e}return N(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Io(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Qu("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Yu.EMPTY_BYTE_STRING=new Yu("");var Ju=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $u(e){if(so(!!e),"string"==typeof e){var t=0,n=Ju.exec(e);if(so(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Xu(e.seconds),nanos:Xu(e.nanos)}}function Xu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Zu(e){return"string"==typeof e?Yu.fromBase64String(e):Yu.fromUint8Array(e)}function es(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ts(e){var t=e.mapValue.fields.__previous_value__;return es(t)?ts(t):t}function ns(e){var t=$u(e.mapValue.fields.__local_write_time__.timestampValue);return new To(t.seconds,t.nanos)}var rs=N((function e(t,n,r,i,a,o,u,s,c){S(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),is=function(){function e(t,n){S(this,e),this.projectId=t,this.database=n||"(default)"}return N(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),as={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},os={nullValue:"NULL_VALUE"};function us(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?es(e)?4:ws(e)?9007199254740991:10:uo()}function ss(e,t){if(e===t)return!0;var n=us(e);if(n!==us(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ns(e).isEqual(ns(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=$u(e.timestampValue),r=$u(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Zu(e.bytesValue).isEqual(Zu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Xu(e.geoPointValue.latitude)===Xu(t.geoPointValue.latitude)&&Xu(e.geoPointValue.longitude)===Xu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Xu(e.integerValue)===Xu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Xu(e.doubleValue),r=Xu(t.doubleValue);return n===r?uu(n)===uu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Eo(e.arrayValue.values||[],t.arrayValue.values||[],ss);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Uu(n)!==Uu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ss(n[i],r[i])))return!1;return!0}(e,t);default:return uo()}}function cs(e,t){return void 0!==(e.values||[]).find((function(e){return ss(e,t)}))}function ls(e,t){if(e===t)return 0;var n=us(e),r=us(t);if(n!==r)return Io(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Io(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Xu(e.integerValue||e.doubleValue),r=Xu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return fs(e.timestampValue,t.timestampValue);case 4:return fs(ns(e),ns(t));case 5:return Io(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Zu(e),r=Zu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Io(n[i],r[i]);if(0!==a)return a}return Io(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Io(Xu(e.latitude),Xu(t.latitude));return 0!==n?n:Io(Xu(e.longitude),Xu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ls(n[i],r[i]);if(a)return a}return Io(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===as.mapValue&&t===as.mapValue)return 0;if(e===as.mapValue)return 1;if(t===as.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Io(r[o],a[o]);if(0!==u)return u;var s=ls(n[r[o]],i[a[o]]);if(0!==s)return s}return Io(r.length,a.length)}(e.mapValue,t.mapValue);default:throw uo()}}function fs(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Io(e,t);var n=$u(e),r=$u(t),i=Io(n.seconds,r.seconds);return 0!==i?i:Io(n.nanos,r.nanos)}function hs(e){return ds(e)}function ds(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=$u(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Zu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Do.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=b(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ds(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=b(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ds(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):uo()}function ps(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function vs(e){return!!e&&"integerValue"in e}function ms(e){return!!e&&"arrayValue"in e}function ys(e){return!!e&&"nullValue"in e}function gs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ks(e){return!!e&&"mapValue"in e}function bs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Vu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=bs(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=bs(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ws(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function _s(e){return"nullValue"in e?os:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ps(is.empty(),Do.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:uo()}function xs(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ps(is.empty(),Do.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?as:uo()}function Is(e,t){var n=ls(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Es(e,t){var n=ls(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ss=function(){function e(t){S(this,e),this.value=t}return N(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ks(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bs(t)}},{key:"setAll",value:function(e){var t=this,n=Po.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=bs(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ks(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return ss(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ks(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Vu(t,(function(t,n){return e[t]=n}));var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(bs(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Ts(e){var t=[];return Vu(e.fields,(function(e,n){var r=new Po([e]);if(ks(n)){var i=Ts(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=b(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Wu(t)}var Cs=function(){function e(t,n,r,i,a,o,u){S(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return N(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Co.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Co.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Co.min(),Co.min(),Co.min(),Ss.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Co.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Co.min(),Co.min(),Ss.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Co.min(),Co.min(),Ss.empty(),2)}}]),e}(),Ns=N((function e(t,n){S(this,e),this.position=t,this.inclusive=n}));function As(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Do.comparator(Do.fromName(o.referenceValue),n.key):ls(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Rs(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ss(e.position[n],t.position[n]))return!1;return!0}var Ps=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";S(this,e),this.field=t,this.dir=n}));function Ds(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Os=N((function e(){S(this,e)})),Ls=function(e){w(n,e);var t=x(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ls(t,this.value)):null!==t&&us(this.value)===us(t)&&this.matchesComparison(ls(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return uo()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Ks(e,t,r):"array-contains"===t?new Ys(e,r):"in"===t?new Js(e,r):"not-in"===t?new $s(e,r):"array-contains-any"===t?new Xs(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Hs(e,n):new Ws(e,n)}}]),n}(Os),Ms=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return N(n,[{key:"matches",value:function(e){return Fs(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Os);function Fs(e){return"and"===e.op}function Us(e){return"or"===e.op}function Vs(e){return js(e)&&Fs(e)}function js(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Ms)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Bs(e){if(e instanceof Ls)return e.field.canonicalString()+e.op.toString()+hs(e.value);if(Vs(e))return e.filters.map((function(e){return Bs(e)})).join(",");var t=e.filters.map((function(e){return Bs(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function zs(e,t){return e instanceof Ls?function(e,t){return t instanceof Ls&&e.op===t.op&&e.field.isEqual(t.field)&&ss(e.value,t.value)}(e,t):e instanceof Ms?function(e,t){return t instanceof Ms&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&zs(n,t.filters[r])}),!0)}(e,t):void uo()}function qs(e,t){var n=e.filters.concat(t);return Ms.create(n,e.op)}function Gs(e){return e instanceof Ls?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(hs(e.value))}(e):e instanceof Ms?function(e){return e.op.toString()+" {"+e.getFilters().map(Gs).join(" ,")+"}"}(e):"Filter"}var Ks=function(e){w(n,e);var t=x(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,e,r,i)).key=Do.fromName(i.referenceValue),a}return N(n,[{key:"matches",value:function(e){var t=Do.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Ls),Hs=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,"in",r)).keys=Qs("in",r),i}return N(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ls),Ws=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,"not-in",r)).keys=Qs("not-in",r),i}return N(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ls);function Qs(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Do.fromName(e.referenceValue)}))}var Ys=function(e){w(n,e);var t=x(n);function n(e,r){return S(this,n),t.call(this,e,"array-contains",r)}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ms(t)&&cs(t.arrayValue,this.value)}}]),n}(Ls),Js=function(e){w(n,e);var t=x(n);function n(e,r){return S(this,n),t.call(this,e,"in",r)}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&cs(this.value.arrayValue,t)}}]),n}(Ls),$s=function(e){w(n,e);var t=x(n);function n(e,r){return S(this,n),t.call(this,e,"not-in",r)}return N(n,[{key:"matches",value:function(e){if(cs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!cs(this.value.arrayValue,t)}}]),n}(Ls),Xs=function(e){w(n,e);var t=x(n);function n(e,r){return S(this,n),t.call(this,e,"array-contains-any",r)}return N(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ms(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return cs(t.value.arrayValue,e)}))}}]),n}(Ls),Zs=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;S(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.le=null}));function ec(e){return new Zs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function tc(e){var t=co(e);if(null===t.le){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Bs(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ou(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return hs(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return hs(e)})).join(",")),t.le=n}return t.le}function nc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ds(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!zs(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Rs(e.startAt,t.startAt)&&Rs(e.endAt,t.endAt)}function rc(e){return Do.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ic(e,t){return e.filters.filter((function(e){return e instanceof Ls&&e.field.isEqual(t)}))}function ac(e,t,n){var r,i=os,a=!0,o=b(ic(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=os,c=!0;switch(u.op){case"<":case"<=":s=_s(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=os}Is({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Is({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function oc(e,t,n){var r,i=as,a=!0,o=b(ic(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=as,c=!0;switch(u.op){case">=":case">":s=xs(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=as}Es({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Es({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var uc=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;S(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.he=null,this.Pe=null,this.Ie=null,this.startAt,this.endAt}));function sc(e,t,n,r,i,a,o,u){return new uc(e,t,n,r,i,a,o,u)}function cc(e){return new uc(e)}function lc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function fc(e){return null!==e.collectionGroup}function hc(e){var t=co(e);if(null===t.he){t.he=[];var n,r=new Set,i=b(t.explicitOrderBy);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.he.push(a),r.add(a.field.canonicalString())}}catch(s){i.e(s)}finally{i.f()}var o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",u=function(e){var t=new Gu(Po.comparator);return e.filters.forEach((function(e){e.getFlattenedFilters().forEach((function(e){e.isInequality()&&(t=t.add(e.field))}))})),t}(t);u.forEach((function(e){r.has(e.canonicalString())||e.isKeyField()||t.he.push(new Ps(e,o))})),r.has(Po.keyField().canonicalString())||t.he.push(new Ps(Po.keyField(),o))}return t.he}function dc(e){var t=co(e);return t.Pe||(t.Pe=pc(t,hc(e))),t.Pe}function pc(e,t){if("F"===e.limitType)return ec(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new Ps(e.field,t)}));var n=e.endAt?new Ns(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ns(e.startAt.position,e.startAt.inclusive):null;return ec(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function vc(e,t){var n=e.filters.concat([t]);return new uc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function mc(e,t,n){return new uc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function yc(e,t){return nc(dc(e),dc(t))&&e.limitType===t.limitType}function gc(e){return"".concat(tc(dc(e)),"|lt:").concat(e.limitType)}function kc(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Gs(e)})).join(", "),"]")),ou(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return hs(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return hs(e)})).join(",")),"Target(".concat(t,")")}(dc(e)),"; limitType=").concat(e.limitType,")")}function bc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Do.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=b(hc(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=b(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=As(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,hc(e),t))&&!(e.endAt&&!function(e,t,n){var r=As(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,hc(e),t))}(e,t)}function wc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function _c(e){return function(t,n){var r,i=!1,a=b(hc(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=xc(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function xc(e,t,n){var r=e.field.isKeyField()?Do.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ls(r,i):uo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return uo()}}var Ic=function(){function e(t,n){S(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return N(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=d(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Vu(this.inner,(function(t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=d(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ju(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Ec=new Bu(Do.comparator);function Sc(){return Ec}var Tc=new Bu(Do.comparator);function Cc(){for(var e=Tc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Nc(e){var t=Tc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Ac(){return Pc()}function Rc(){return Pc()}function Pc(){return new Ic((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Dc=new Bu(Do.comparator),Oc=new Gu(Do.comparator);function Lc(){for(var e=Oc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Mc=new Gu(Io);function Fc(){return Mc}function Uc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uu(t)?"-0":t}}function Vc(e){return{integerValue:""+e}}function jc(e,t){return su(t)?Vc(t):Uc(e,t)}var Bc=N((function e(){S(this,e),this._=void 0}));function zc(e,t,n){return e instanceof Kc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&es(t)&&(t=ts(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Hc?Wc(e,t):e instanceof Qc?Yc(e,t):function(e,t){var n=Gc(e,t),r=$c(n)+$c(e.Te);return vs(n)&&vs(e.Te)?Vc(r):Uc(e.serializer,r)}(e,t)}function qc(e,t,n){return e instanceof Hc?Wc(e,t):e instanceof Qc?Yc(e,t):n}function Gc(e,t){return e instanceof Jc?function(e){return vs(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Kc=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n)}(Bc),Hc=function(e){w(n,e);var t=x(n);function n(e){var r;return S(this,n),(r=t.call(this)).elements=e,r}return N(n)}(Bc);function Wc(e,t){var n,r=Xc(t),i=b(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return ss(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Qc=function(e){w(n,e);var t=x(n);function n(e){var r;return S(this,n),(r=t.call(this)).elements=e,r}return N(n)}(Bc);function Yc(e,t){var n,r=Xc(t),i=b(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!ss(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Jc=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return N(n)}(Bc);function $c(e){return Xu(e.integerValue||e.doubleValue)}function Xc(e){return ms(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Zc=N((function e(t,n){S(this,e),this.field=t,this.transform=n}));var el=N((function e(t,n){S(this,e),this.version=t,this.transformResults=n})),tl=function(){function e(t,n){S(this,e),this.updateTime=t,this.exists=n}return N(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function nl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var rl=N((function e(){S(this,e)}));function il(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ml(e.key,tl.none()):new cl(e.key,e.data,tl.none());var n,r=e.data,i=Ss.empty(),a=new Gu(Po.comparator),o=b(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new ll(e.key,i,new Wu(a.toArray()),tl.none())}function al(e,t,n){e instanceof cl?function(e,t,n){var r=e.value.clone(),i=hl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ll?function(e,t,n){if(nl(e.precondition,t)){var r=hl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(fl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ol(e,t,n,r){return e instanceof cl?function(e,t,n,r){if(!nl(e.precondition,t))return n;var i=e.value.clone(),a=dl(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ll?function(e,t,n,r){if(!nl(e.precondition,t))return n;var i=dl(e.fieldTransforms,r,t),a=t.data;return a.setAll(fl(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return nl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ul(e,t){var n,r=null,i=b(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Gc(a.transform,o||null);null!=u&&(null===r&&(r=Ss.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function sl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Eo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Hc&&t instanceof Hc||e instanceof Qc&&t instanceof Qc?Eo(e.elements,t.elements,ss):e instanceof Jc&&t instanceof Jc?ss(e.Te,t.Te):e instanceof Kc&&t instanceof Kc}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var cl=function(e){w(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return S(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return N(n,[{key:"getFieldMask",value:function(){return null}}]),n}(rl),ll=function(e){w(n,e);var t=x(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return S(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return N(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(rl);function fl(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function hl(e,t,n){var r=new Map;so(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,qc(o,u,n[i]))}return r}function dl(e,t,n){var r,i=new Map,a=b(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,zc(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var pl,vl,ml=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return N(n,[{key:"getFieldMask",value:function(){return null}}]),n}(rl),yl=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return N(n,[{key:"getFieldMask",value:function(){return null}}]),n}(rl),gl=function(){function e(t,n,r,i){S(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return N(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&al(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=b(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=ol(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=b(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=ol(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Rc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=il(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Co.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Lc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,(function(e,t){return sl(e,t)}))&&Eo(this.baseMutations,e.baseMutations,(function(e,t){return sl(e,t)}))}}]),e}(),kl=function(){function e(t,n,r,i){S(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return N(e,null,[{key:"from",value:function(t,n,r){so(t.mutations.length===r.length);for(var i=Dc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),bl=function(){function e(t,n){S(this,e),this.largestBatchId=t,this.mutation=n}return N(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),wl=N((function e(t,n){S(this,e),this.count=t,this.unchangedNames=n}));function _l(e){switch(e){default:return uo();case lo.CANCELLED:case lo.UNKNOWN:case lo.DEADLINE_EXCEEDED:case lo.RESOURCE_EXHAUSTED:case lo.INTERNAL:case lo.UNAVAILABLE:case lo.UNAUTHENTICATED:return!1;case lo.INVALID_ARGUMENT:case lo.NOT_FOUND:case lo.ALREADY_EXISTS:case lo.PERMISSION_DENIED:case lo.FAILED_PRECONDITION:case lo.ABORTED:case lo.OUT_OF_RANGE:case lo.UNIMPLEMENTED:case lo.DATA_LOSS:return!0}}function xl(e){if(void 0===e)return io("GRPC error has no .code"),lo.UNKNOWN;switch(e){case pl.OK:return lo.OK;case pl.CANCELLED:return lo.CANCELLED;case pl.UNKNOWN:return lo.UNKNOWN;case pl.DEADLINE_EXCEEDED:return lo.DEADLINE_EXCEEDED;case pl.RESOURCE_EXHAUSTED:return lo.RESOURCE_EXHAUSTED;case pl.INTERNAL:return lo.INTERNAL;case pl.UNAVAILABLE:return lo.UNAVAILABLE;case pl.UNAUTHENTICATED:return lo.UNAUTHENTICATED;case pl.INVALID_ARGUMENT:return lo.INVALID_ARGUMENT;case pl.NOT_FOUND:return lo.NOT_FOUND;case pl.ALREADY_EXISTS:return lo.ALREADY_EXISTS;case pl.PERMISSION_DENIED:return lo.PERMISSION_DENIED;case pl.FAILED_PRECONDITION:return lo.FAILED_PRECONDITION;case pl.ABORTED:return lo.ABORTED;case pl.OUT_OF_RANGE:return lo.OUT_OF_RANGE;case pl.UNIMPLEMENTED:return lo.UNIMPLEMENTED;case pl.DATA_LOSS:return lo.DATA_LOSS;default:return uo()}}(vl=pl||(pl={}))[vl.OK=0]="OK",vl[vl.CANCELLED=1]="CANCELLED",vl[vl.UNKNOWN=2]="UNKNOWN",vl[vl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vl[vl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vl[vl.NOT_FOUND=5]="NOT_FOUND",vl[vl.ALREADY_EXISTS=6]="ALREADY_EXISTS",vl[vl.PERMISSION_DENIED=7]="PERMISSION_DENIED",vl[vl.UNAUTHENTICATED=16]="UNAUTHENTICATED",vl[vl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vl[vl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vl[vl.ABORTED=10]="ABORTED",vl[vl.OUT_OF_RANGE=11]="OUT_OF_RANGE",vl[vl.UNIMPLEMENTED=12]="UNIMPLEMENTED",vl[vl.INTERNAL=13]="INTERNAL",vl[vl.UNAVAILABLE=14]="UNAVAILABLE",vl[vl.DATA_LOSS=15]="DATA_LOSS";var Il=null;function El(){return new TextEncoder}var Sl=new $a([4294967295,4294967295],0);function Tl(e){var t=El().encode(e),n=new Ja;return n.update(t),new Uint8Array(n.digest())}function Cl(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new $a([n,r],0),new $a([i,a],0)]}var Nl=function(){function e(t,n,r){if(S(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Al("Invalid padding: ".concat(n));if(r<0)throw new Al("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Al("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Al("Invalid padding when bitmap length is 0: ".concat(n));this.Ee=8*t.length-n,this.de=$a.fromNumber(this.Ee)}return N(e,[{key:"Ae",value:function(e,t,n){var r=e.add(t.multiply($a.fromNumber(n)));return 1===r.compare(Sl)&&(r=new $a([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}},{key:"Re",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Ee)return!1;for(var t=d(Cl(Tl(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ae(n,r,i);if(!this.Re(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Ee)for(var t=d(Cl(Tl(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ae(n,r,i);this.Ve(a)}}},{key:"Ve",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Al=function(e){w(n,e);var t=x(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return N(n)}(k(Error)),Rl=function(){function e(t,n,r,i,a){S(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return N(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Pl.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Co.min(),i,new Bu(Io),Sc(),Lc())}}]),e}(),Pl=function(){function e(t,n,r,i,a){S(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return N(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Lc(),Lc(),Lc())}}]),e}(),Dl=N((function e(t,n,r,i){S(this,e),this.me=t,this.removedTargetIds=n,this.key=r,this.fe=i})),Ol=N((function e(t,n){S(this,e),this.targetId=t,this.ge=n})),Ll=N((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;S(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ml=function(){function e(){S(this,e),this.pe=0,this.ye=Vl(),this.we=Yu.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}return N(e,[{key:"current",get:function(){return this.Se}},{key:"resumeToken",get:function(){return this.we}},{key:"De",get:function(){return 0!==this.pe}},{key:"Ce",get:function(){return this.be}},{key:"ve",value:function(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}},{key:"Fe",value:function(){var e=Lc(),t=Lc(),n=Lc();return this.ye.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:uo()}})),new Pl(this.we,this.Se,e,t,n)}},{key:"Me",value:function(){this.be=!1,this.ye=Vl()}},{key:"xe",value:function(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}},{key:"Oe",value:function(e){this.be=!0,this.ye=this.ye.remove(e)}},{key:"Ne",value:function(){this.pe+=1}},{key:"Be",value:function(){this.pe-=1}},{key:"Le",value:function(){this.be=!0,this.Se=!0}}]),e}(),Fl=function(){function e(t){S(this,e),this.ke=t,this.qe=new Map,this.Qe=Sc(),this.Ke=Ul(),this.$e=new Bu(Io)}return N(e,[{key:"Ue",value:function(e){var t,n=b(e.me);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.fe&&e.fe.isFoundDocument()?this.We(r,e.fe):this.Ge(r,e.key,e.fe)}}catch(u){n.e(u)}finally{n.f()}var i,a=b(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Ge(o,e.key,e.fe)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ze",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.je(n);switch(e.state){case 0:t.He(n)&&r.ve(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.ve(e.resumeToken);break;case 2:r.Be(),r.De||t.removeTarget(n);break;case 3:t.He(n)&&(r.Le(),r.ve(e.resumeToken));break;case 4:t.He(n)&&(t.Je(n),r.ve(e.resumeToken));break;default:uo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((function(e,r){n.He(r)&&t(r)}))}},{key:"Ye",value:function(e){var t=e.targetId,n=e.ge.count,r=this.Ze(t);if(r){var i=r.target;if(rc(i))if(0===n){var a=new Do(i.path);this.Ge(t,a,Cs.newNoDocument(a,Co.min()))}else so(1===n);else{var o=this.Xe(t);if(o!==n){var u=this.et(e),s=u?this.tt(u,e,o):1;if(0!==s){this.Je(t);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.$e=this.$e.insert(t,c)}null==Il||Il.nt(function(e,t,n,r,i){var a,o,u,s,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(u=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===u?void 0:u.length)&&void 0!==s?s:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.ge,this.ke.rt(),u,s))}}}}},{key:"et",value:function(e){var t=e.ge.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,c=t.hashCount,l=void 0===c?0:c;try{n=Zu(o).toUint8Array()}catch(e){if(e instanceof Qu)return ao("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new Nl(n,s,l)}catch(e){return ao(e instanceof Al?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ee?null:r}},{key:"tt",value:function(e,t,n){return t.ge.count===n-this.it(e,t.targetId)?0:2}},{key:"it",value:function(e,t){var n=this,r=this.ke.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.ke.rt(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.Ge(t,r,null),i++)})),i}},{key:"st",value:function(e){var t=this,n=new Map;this.qe.forEach((function(r,i){var a=t.Ze(i);if(a){if(r.current&&rc(a.target)){var o=new Do(a.target.path);null!==t.Qe.get(o)||t.ot(i,o)||t.Ge(i,o,Cs.newNoDocument(o,e))}r.Ce&&(n.set(i,r.Fe()),r.Me())}}));var r=Lc();this.Ke.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ze(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Qe.forEach((function(t,n){return n.setReadTime(e)}));var i=new Rl(e,n,this.$e,this.Qe,r);return this.Qe=Sc(),this.Ke=Ul(),this.$e=new Bu(Io),i}},{key:"We",value:function(e,t){if(this.He(e)){var n=this.ot(e,t.key)?2:0;this.je(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.Ke=this.Ke.insert(t.key,this._t(t.key).add(e))}}},{key:"Ge",value:function(e,t,n){if(this.He(e)){var r=this.je(e);this.ot(e,t)?r.xe(t,1):r.Oe(t),this.Ke=this.Ke.insert(t,this._t(t).delete(e)),n&&(this.Qe=this.Qe.insert(t,n))}}},{key:"removeTarget",value:function(e){this.qe.delete(e)}},{key:"Xe",value:function(e){var t=this.je(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ne",value:function(e){this.je(e).Ne()}},{key:"je",value:function(e){var t=this.qe.get(e);return t||(t=new Ml,this.qe.set(e,t)),t}},{key:"_t",value:function(e){var t=this.Ke.get(e);return t||(t=new Gu(Io),this.Ke=this.Ke.insert(e,t)),t}},{key:"He",value:function(e){var t=null!==this.Ze(e);return t||ro("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ze",value:function(e){var t=this.qe.get(e);return t&&t.De?null:this.ke.ut(e)}},{key:"Je",value:function(e){var t=this;this.qe.set(e,new Ml),this.ke.getRemoteKeysForTarget(e).forEach((function(n){t.Ge(e,n,null)}))}},{key:"ot",value:function(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}]),e}();function Ul(){return new Bu(Do.comparator)}function Vl(){return new Bu(Do.comparator)}var jl={asc:"ASCENDING",desc:"DESCENDING"},Bl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zl={and:"AND",or:"OR"},ql=N((function e(t,n){S(this,e),this.databaseId=t,this.useProto3Json=n}));function Gl(e,t){return e.useProto3Json||ou(t)?t:{value:t}}function Kl(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Wl(e,t){return Kl(e,t.toTimestamp())}function Ql(e){return so(!!e),Co.fromTimestamp(function(e){var t=$u(e);return new To(t.seconds,t.nanos)}(e))}function Yl(e,t){return function(e){return new Ao(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Jl(e){var t=Ao.fromString(e);return so(bf(t)),t}function $l(e,t){return Yl(e.databaseId,t.path)}function Xl(e,t){var n=Jl(t);if(n.get(1)!==e.databaseId.projectId)throw new fo(lo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fo(lo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Do(nf(n))}function Zl(e,t){return Yl(e.databaseId,t)}function ef(e){var t=Jl(e);return 4===t.length?Ao.emptyPath():nf(t)}function tf(e){return new Ao(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function nf(e){return so(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function rf(e,t,n){return{name:$l(e,t),fields:n.value.mapValue.fields}}function af(e,t,n){var r=Xl(e,t.name),i=Ql(t.updateTime),a=t.createTime?Ql(t.createTime):Co.min(),o=new Ss({mapValue:{fields:t.fields}}),u=Cs.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function of(e,t){return"found"in t?function(e,t){so(!!t.found),t.found.name,t.found.updateTime;var n=Xl(e,t.found.name),r=Ql(t.found.updateTime),i=t.found.createTime?Ql(t.found.createTime):Co.min(),a=new Ss({mapValue:{fields:t.found.fields}});return Cs.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){so(!!t.missing),so(!!t.readTime);var n=Xl(e,t.missing),r=Ql(t.readTime);return Cs.newNoDocument(n,r)}(e,t):uo()}function uf(e,t){var n;if(t instanceof cl)n={update:rf(e,t.key,t.value)};else if(t instanceof ml)n={delete:$l(e,t.key)};else if(t instanceof ll)n={update:rf(e,t.key,t.data),updateMask:kf(t.fieldMask)};else{if(!(t instanceof yl))return uo();n={verify:$l(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Kc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Qc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Jc)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw uo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Wl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:uo()}(e,t.precondition)),n}function sf(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?tl.updateTime(Ql(e.updateTime)):void 0!==e.exists?tl.exists(e.exists):tl.none()}(t.currentDocument):tl.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)so("REQUEST_TIME"===t.setToServerValue),n=new Kc;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Hc(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Qc(i)}else"increment"in t?n=new Jc(e,t.increment):uo();var a=Po.fromServerFormat(t.fieldPath);return new Zc(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Xl(e,t.update.name),a=new Ss({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Wu(t.map((function(e){return Po.fromServerFormat(e)})))}(t.updateMask);return new ll(i,a,o,n,r)}return new cl(i,a,n,r)}if(t.delete){var u=Xl(e,t.delete);return new ml(u,n)}if(t.verify){var s=Xl(e,t.verify);return new yl(s,n)}return uo()}function cf(e,t){return{documents:[Zl(e,t.path)]}}function lf(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Zl(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Zl(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return gf(Ms.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:mf(e.field),direction:df(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=Gl(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ff(e){var t=ef(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){so(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=hf(e);return t instanceof Ms&&Vs(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new Ps(yf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return ou(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Ns(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Ns(n,t)}(n.endAt)),sc(t,i,u,o,s,"F",c,l)}function hf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=yf(e.unaryFilter.field);return Ls.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=yf(e.unaryFilter.field);return Ls.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=yf(e.unaryFilter.field);return Ls.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=yf(e.unaryFilter.field);return Ls.create(i,"!=",{nullValue:"NULL_VALUE"});default:return uo()}}(e):void 0!==e.fieldFilter?function(e){return Ls.create(yf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return uo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ms.create(e.compositeFilter.filters.map((function(e){return hf(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return uo()}}(e.compositeFilter.op))}(e):uo()}function df(e){return jl[e]}function pf(e){return Bl[e]}function vf(e){return zl[e]}function mf(e){return{fieldPath:e.canonicalString()}}function yf(e){return Po.fromServerFormat(e.fieldPath)}function gf(e){return e instanceof Ls?function(e){if("=="===e.op){if(gs(e.value))return{unaryFilter:{field:mf(e.field),op:"IS_NAN"}};if(ys(e.value))return{unaryFilter:{field:mf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gs(e.value))return{unaryFilter:{field:mf(e.field),op:"IS_NOT_NAN"}};if(ys(e.value))return{unaryFilter:{field:mf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mf(e.field),op:pf(e.op),value:e.value}}}(e):e instanceof Ms?function(e){var t=e.getFilters().map((function(e){return gf(e)}));return 1===t.length?t[0]:{compositeFilter:{op:vf(e.op),filters:t}}}(e):uo()}function kf(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function bf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var wf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Co.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Co.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yu.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;S(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return N(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),_f=N((function e(t){S(this,e),this.ct=t}));function xf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:If(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:$l(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Kl(e,t.version.toTimestamp()),createTime:Kl(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ef(t.version)};else{if(!t.isUnknownDocument())return uo();r.unknownDocument={path:n.path.toArray(),version:Ef(t.version)}}return r}function If(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ef(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Sf(e){var t=new To(e.seconds,e.nanoseconds);return Co.fromTimestamp(t)}function Tf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return sf(e.ct,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return sf(e.ct,t)})),u=To.fromMillis(t.localWriteTimeMs);return new gl(t.batchId,u,n,o)}function Cf(e){var t,n=Sf(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?Sf(e.lastLimboFreeSnapshotVersion):Co.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return so(1===e.documents.length),dc(cc(ef(e.documents[0])))}(e.query):function(e){return dc(ff(e))}(e.query),new wf(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,Yu.fromBase64String(e.resumeToken))}function Nf(e,t){var n,r=Ef(t.snapshotVersion),i=Ef(t.lastLimboFreeSnapshotVersion);n=rc(t.target)?cf(e.ct,t.target):lf(e.ct,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:tc(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Af(e){var t=ff({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?mc(t,t.limit,"L"):t}function Rf(e,t){return new bl(t.largestBatchId,sf(e.ct,t.overlayMutation))}function Pf(e,t){var n=t.path.lastSegment();return[e,cu(t.path.popLast()),n]}function Df(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Ef(r.readTime),documentKey:cu(r.documentKey.path),largestBatchId:r.largestBatchId}}var Of=function(){function e(){S(this,e)}return N(e,[{key:"getBundleMetadata",value:function(e,t){return Lf(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:Sf(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return Lf(e).put(function(e){return{bundleId:e.id,createTime:Ef(Ql(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return Mf(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:Af(e.bundledQuery),readTime:Sf(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return Mf(e).put(function(e){return{name:e.name,readTime:Ef(Ql(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Lf(e){return Fu(e,"bundles")}function Mf(e){return Fu(e,"namedQueries")}var Ff=function(){function e(t,n){S(this,e),this.serializer=t,this.userId=n}return N(e,[{key:"getOverlay",value:function(e,t){var n=this;return Uf(e).get(Pf(this.userId,t)).next((function(e){return e?Rf(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ac();return Wo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new bl(t,a);i.push(r.ht(e,o))})),Wo.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(cu(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Uf(e).J("collectionPathOverlayIndex",i))})),Wo.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Ac(),a=cu(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Uf(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Rf(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Ac(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Uf(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Rf(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ht",value:function(e,t){return Uf(e).put(function(e,t,n){var r=d(Pf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:uf(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"lt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Uf(e){return Fu(e,"documentOverlays")}var Vf=function(){function e(){S(this,e)}return N(e,[{key:"Pt",value:function(e,t){this.It(e,t),t.Tt()}},{key:"It",value:function(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Xu(e.integerValue));else if("doubleValue"in e){var n=Xu(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),uu(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At("".concat(r.seconds||"")),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Zu(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?ws(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):uo()}},{key:"Rt",value:function(e,t){this.Et(t,25),this.St(e,t)}},{key:"St",value:function(e,t){t.At(e)}},{key:"yt",value:function(e,t){var n=e.fields||{};this.Et(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Rt(a,t),this.It(n[a],t)}}},{key:"wt",value:function(e,t){var n=e.values||[];this.Et(t,50);var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.It(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"gt",value:function(e,t){var n=this;this.Et(t,37),Do.fromName(e).path.forEach((function(e){n.Et(t,60),n.St(e,t)}))}},{key:"Et",value:function(e,t){e.dt(t)}},{key:"Vt",value:function(e){e.dt(2)}}]),e}();function jf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Bf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=jf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Vf.bt=new Vf;var zf=function(){function e(){S(this,e),this.buffer=new Uint8Array(1024),this.position=0}return N(e,[{key:"Dt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ct(n.value),n=t.next();this.vt()}},{key:"Ft",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Mt(n.value),n=t.next();this.xt()}},{key:"Ot",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{var a=r.codePointAt(0);this.Ct(240|a>>>18),this.Ct(128|63&a>>>12),this.Ct(128|63&a>>>6),this.Ct(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.vt()}},{key:"Nt",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{var a=r.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.xt()}},{key:"Bt",value:function(e){var t=this.Lt(e),n=Bf(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"qt",value:function(e){var t=this.Lt(e),n=Bf(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Qt",value:function(){this.Kt(255),this.Kt(255)}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Wt",value:function(){return this.buffer.slice(0,this.position)}},{key:"Lt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ct",value:function(e){var t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}},{key:"Mt",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}},{key:"vt",value:function(){this.Kt(0),this.Kt(1)}},{key:"xt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Kt",value:function(e){this.kt(1),this.buffer[this.position++]=e}},{key:"Ut",value:function(e){this.kt(1),this.buffer[this.position++]=~e}},{key:"kt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),qf=function(){function e(t){S(this,e),this.Gt=t}return N(e,[{key:"ft",value:function(e){this.Gt.Dt(e)}},{key:"At",value:function(e){this.Gt.Ot(e)}},{key:"dt",value:function(e){this.Gt.Bt(e)}},{key:"Tt",value:function(){this.Gt.Qt()}}]),e}(),Gf=function(){function e(t){S(this,e),this.Gt=t}return N(e,[{key:"ft",value:function(e){this.Gt.Ft(e)}},{key:"At",value:function(e){this.Gt.Nt(e)}},{key:"dt",value:function(e){this.Gt.qt(e)}},{key:"Tt",value:function(){this.Gt.$t()}}]),e}(),Kf=function(){function e(){S(this,e),this.Gt=new zf,this.zt=new qf(this.Gt),this.jt=new Gf(this.Gt)}return N(e,[{key:"seed",value:function(e){this.Gt.seed(e)}},{key:"Ht",value:function(e){return 0===e?this.zt:this.jt}},{key:"Wt",value:function(){return this.Gt.Wt()}},{key:"reset",value:function(){this.Gt.reset()}}]),e}(),Hf=function(){function e(t,n,r,i){S(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return N(e,[{key:"Jt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Wf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Qf(e.arrayValue,t.arrayValue))?n:0!==(n=Qf(e.directionalValue,t.directionalValue))?n:Do.comparator(e.documentKey,t.documentKey)}function Qf(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Yf=function(){function e(t){S(this,e),this.Yt=new Gu((function(e,t){return Po.comparator(e.field,t.field)})),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];var n,r=b(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}catch(a){r.e(a)}finally{r.f()}}return N(e,[{key:"en",get:function(){return this.Yt.size>1}},{key:"tn",value:function(e){if(so(e.collectionGroup===this.collectionId),this.en)return!1;var t=Lo(e);if(void 0!==t&&!this.nn(t))return!1;for(var n=Mo(e),r=new Set,i=0,a=0;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){var o=this.Yt.getIterator().getNext();if(!r.has(o.field.canonicalString())){var u=n[i];if(!this.rn(o,u)||!this.sn(this.Zt[a++],u))return!1}++i}for(;i<n.length;++i){var s=n[i];if(a>=this.Zt.length||!this.sn(this.Zt[a++],s))return!1}return!0}},{key:"on",value:function(){if(this.en)return null;var e,t=new Gu(Po.comparator),n=[],r=b(this.Xt);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)n.push(new Fo(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new Fo(i.field,0))}}}catch(s){r.e(s)}finally{r.f()}var a,o=b(this.Zt);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||t.has(u.field)||(t=t.add(u.field),n.push(new Fo(u.field,"asc"===u.dir?0:1)))}}catch(s){o.e(s)}finally{o.f()}return new Oo(Oo.UNKNOWN_ID,this.collectionId,n,Uo.empty())}},{key:"nn",value:function(e){var t,n=b(this.Xt);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.rn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"rn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Jf(e){var t,n;if(so(e instanceof Ls||e instanceof Ms),e instanceof Ls){if(e instanceof Js){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Ls.create(e.field,"==",t)})))||[];return Ms.create(r,"or")}return e}var i=e.filters.map((function(e){return Jf(e)}));return Ms.create(i,e.op)}function $f(e){if(0===e.getFilters().length)return[];var t=th(Jf(e));return so(eh(t)),Xf(t)||Zf(t)?[t]:t.getFilters()}function Xf(e){return e instanceof Ls}function Zf(e){return e instanceof Ms&&Vs(e)}function eh(e){return Xf(e)||Zf(e)||function(e){if(e instanceof Ms&&Us(e)){var t,n=b(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Xf(r)&&!Zf(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function th(e){if(so(e instanceof Ls||e instanceof Ms),e instanceof Ls)return e;if(1===e.filters.length)return th(e.filters[0]);var t=e.filters.map((function(e){return th(e)})),n=Ms.create(t,e.op);return eh(n=ih(n))?n:(so(n instanceof Ms),so(Fs(n)),so(n.filters.length>1),n.filters.reduce((function(e,t){return nh(e,t)})))}function nh(e,t){var n;return so(e instanceof Ls||e instanceof Ms),so(t instanceof Ls||t instanceof Ms),n=e instanceof Ls?t instanceof Ls?function(e,t){return Ms.create([e,t],"and")}(e,t):rh(e,t):t instanceof Ls?rh(t,e):function(e,t){if(so(e.filters.length>0&&t.filters.length>0),Fs(e)&&Fs(t))return qs(e,t.getFilters());var n=Us(e)?e:t,r=Us(e)?t:e,i=n.filters.map((function(e){return nh(e,r)}));return Ms.create(i,"or")}(e,t),ih(n)}function rh(e,t){if(Fs(t))return qs(t,e.getFilters());var n=t.filters.map((function(t){return nh(e,t)}));return Ms.create(n,"or")}function ih(e){if(so(e instanceof Ls||e instanceof Ms),e instanceof Ls)return e;var t=e.getFilters();if(1===t.length)return ih(t[0]);if(js(e))return e;var n=t.map((function(e){return ih(e)})),r=[];return n.forEach((function(t){t instanceof Ls?r.push(t):t instanceof Ms&&(t.op===e.op?r.push.apply(r,E(t.filters)):r.push(t))})),1===r.length?r[0]:Ms.create(r,e.op)}var ah=function(){function e(){S(this,e),this._n=new oh}return N(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this._n.add(t),Wo.resolve()}},{key:"getCollectionParents",value:function(e,t){return Wo.resolve(this._n.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Wo.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Wo.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return Wo.resolve()}},{key:"createTargetIndexes",value:function(e,t){return Wo.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Wo.resolve(null)}},{key:"getIndexType",value:function(e,t){return Wo.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Wo.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Wo.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Wo.resolve(Bo.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Wo.resolve(Bo.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Wo.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Wo.resolve()}}]),e}(),oh=function(){function e(){S(this,e),this.index={}}return N(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Gu(Ao.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Gu(Ao.comparator)).toArray()}}]),e}(),uh=new Uint8Array(0),sh=function(){function e(t,n){S(this,e),this.user=t,this.databaseId=n,this.an=new oh,this.un=new Ic((function(e){return tc(e)}),(function(e,t){return nc(e,t)})),this.uid=t.uid||""}return N(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.an.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.an.add(t)}));var a={collectionId:r,parent:cu(i)};return ch(e).put(a)}return Wo.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[So(t),""],!1,!0);return ch(e).G(r).next((function(e){var r,i=b(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(hu(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=fh(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=hh(e);return a.next((function(e){o.put(Df(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=fh(e),r=hh(e),i=lh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"deleteAllFieldIndexes",value:function(e){var t=fh(e),n=lh(e),r=hh(e);return t.J().next((function(){return n.J()})).next((function(){return r.J()}))}},{key:"createTargetIndexes",value:function(e,t){var n=this;return Wo.forEach(this.cn(t),(function(t){return n.getIndexType(e,t).next((function(r){if(0===r||1===r){var i=new Yf(t).on();if(null!=i)return n.addFieldIndex(e,i)}}))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=lh(e),i=!0,a=new Map;return Wo.forEach(this.cn(t),(function(t){return n.ln(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Lc(),o=[];return Wo.forEach(a,(function(i,a){ro("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(tc(t)));var u=function(e,t){var n=Lo(t);if(void 0===n)return null;var r,i=b(ic(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=b(Mo(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=b(ic(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=b(Mo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ac(e,o.fieldPath,e.startAt):oc(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ns(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=b(Mo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?oc(e,o.fieldPath,e.endAt):ac(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ns(r,i)}(a,i),f=n.hn(i,a,c),h=n.hn(i,a,l),d=n.Pn(i,a,s),p=n.In(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return Wo.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Do.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Wo.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:$f(Ms.create(e.filters,"and")).map((function(t){return ec(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"In",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.Tn(t[h/c]):uh,f=u.En(e,s,n[h%c],r),d=u.dn(e,s,i[h%c],a),p=o.map((function(t){return u.En(e,s,t,!0)}));l.push.apply(l,E(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"En",value:function(e,t,n,r){var i=new Hf(e,Do.empty(),t,n);return r?i:i.Jt()}},{key:"dn",value:function(e,t,n,r){var i=new Hf(e,Do.empty(),t,n);return r?i.Jt():i}},{key:"ln",value:function(e,t){var n=new Yf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=b(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return Wo.forEach(i,(function(t){return n.ln(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Gu(Po.comparator),r=!1,i=b(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=b(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=b(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"An",value:function(e,t){var n,r=new Kf,i=b(Mo(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ht(a.kind);Vf.bt.Pt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Wt()}},{key:"Tn",value:function(e){var t=new Kf;return Vf.bt.Pt(e,t.Ht(0)),t.Wt()}},{key:"Rn",value:function(e,t){var n=new Kf;return Vf.bt.Pt(ps(this.databaseId,t),n.Ht(function(e){var t=Mo(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}},{key:"Pn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Kf);var i,a=0,o=b(Mo(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=b(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.Vn(t,s.fieldPath)&&ms(c))r=this.mn(r,s,c);else{var h=f.Ht(s.kind);Vf.bt.Pt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.fn(r)}},{key:"hn",value:function(e,t,n){return this.Pn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Wt();return t}},{key:"mn",value:function(e,t,n){var r,i=E(e),a=[],o=b(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=b(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Kf;f.seed(l.Wt()),Vf.bt.Pt(s,f.Ht(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"Vn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Ls&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=fh(e),i=hh(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return Wo.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Uo(t.sequenceNumber,new Bo(Sf(t.readTime),new Do(hu(t.documentKey)),t.largestBatchId)):Uo.empty(),r=e.fields.map((function(e){var t=d(e,2),n=t[0],r=t[1];return new Fo(Po.fromServerFormat(n),r)}));return new Oo(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Io(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=fh(e),a=hh(e);return this.gn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Wo.forEach(t,(function(t){return a.put(Df(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Wo.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Wo.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Wo.forEach(a,(function(r){return n.pn(e,t,r).next((function(t){var a=n.yn(i,r);return t.isEqual(a)?Wo.resolve():n.wn(e,i,r,t,a)}))}))}))}))}},{key:"Sn",value:function(e,t,n,r){return lh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"bn",value:function(e,t,n,r){return lh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}},{key:"pn",value:function(e,t,n){var r=lh(e),i=new Gu(Wf);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},(function(e,r){i=i.add(new Hf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"yn",value:function(e,t){var n=new Gu(Wf),r=this.An(t,e);if(null==r)return n;var i=Lo(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ms(a)){var o,u=b(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Hf(t.indexId,e.key,this.Tn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Hf(t.indexId,e.key,uh,r));return n}},{key:"wn",value:function(e,t,n,r,i){var a=this;ro("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Hu(a),s=Hu(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Hu(o)):l?(i(u),u=Hu(a)):(u=Hu(a),s=Hu(o))}}(r,i,Wf,(function(r){o.push(a.Sn(e,t,n,r))}),(function(r){o.push(a.bn(e,t,n,r))})),Wo.waitFor(o)}},{key:"gn",value:function(e){var t=1;return hh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Wf(e,t)})).filter((function(e,t,n){return!t||0!==Wf(e,n[t-1])}));var r=[];r.push(e);var i,a=b(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Wf(o,e),s=Wf(o,t);if(0===u)r[0]=e.Jt();else if(u>0&&s<0)r.push(o),r.push(o.Jt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Dn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,uh,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,uh,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Dn",value:function(e,t){return Wf(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(dh)}},{key:"getMinOffset",value:function(e,t){var n=this;return Wo.mapArray(this.cn(t),(function(t){return n.ln(e,t).next((function(e){return e||uo()}))})).next(dh)}}]),e}();function ch(e){return Fu(e,"collectionParents")}function lh(e){return Fu(e,"indexEntries")}function fh(e){return Fu(e,"indexConfiguration")}function hh(e){return Fu(e,"indexState")}function dh(e){so(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;zo(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Bo(t.readTime,t.documentKey,n)}var ph={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vh=function(){function e(t,n,r){S(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return N(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function mh(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){so(1===u)})));var c,l=[],f=b(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=vu(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Wo.waitFor(a).next((function(){return l}))}function yh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw uo();t=e.noDocument}return JSON.stringify(t).length}vh.DEFAULT_COLLECTION_PERCENTILE=10,vh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vh.DEFAULT=new vh(41943040,vh.DEFAULT_COLLECTION_PERCENTILE,vh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vh.DISABLED=new vh(-1,0,0);var gh=function(){function e(t,n,r,i){S(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}return N(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bh(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=wh(e),o=bh(e);return o.add({}).next((function(u){so("number"==typeof u);var s,c=new gl(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return uf(e.ct,t)})),i=n.mutations.map((function(t){return uf(e.ct,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Gu((function(e,t){return Io(e.canonicalString(),t.canonicalString())})),d=b(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=vu(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,mu))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Cn[u]=c.keys()})),Wo.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return bh(e).get(t).next((function(e){return e?(so(e.userId===n.userId),Tf(n.serializer,e)):null}))}},{key:"vn",value:function(e,t){var n=this;return this.Cn[t]?Wo.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Cn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return bh(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(so(t.batchId>=r),a=Tf(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return bh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bh(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return Tf(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=pu(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return wh(e).Z({range:i},(function(r,i,o){var u=d(r,3),s=u[0],c=u[1],l=u[2],f=hu(c);if(s===n.userId&&t.path.isEqual(f))return bh(e).get(l).next((function(e){if(!e)throw uo();so(e.userId===n.userId),a.push(Tf(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Gu(Io),i=[];return t.forEach((function(t){var a=pu(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=wh(e).Z({range:o},(function(e,i,a){var o=d(e,3),u=o[0],s=o[1],c=o[2],l=hu(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Wo.waitFor(i).next((function(){return n.Fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=pu(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Gu(Io);return wh(e).Z({range:o},(function(e,t,a){var o=d(e,3),s=o[0],c=o[1],l=o[2],f=hu(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Fn(e,u)}))}},{key:"Fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(bh(e).get(t).next((function(e){if(null===e)throw uo();so(e.userId===n.userId),r.push(Tf(n.serializer,e))})))})),Wo.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return mh(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Mn(t.batchId)})),Wo.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Mn",value:function(e){delete this.Cn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Wo.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return wh(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=hu(e[1]);i.push(a)}else r.done()})).next((function(){so(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return kh(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return _h(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"lt",value:function(t,n,r,i){return so(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function kh(e,t,n){var r=pu(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return wh(e).Z({range:a,Y:!0},(function(e,n,r){var a=d(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function bh(e){return Fu(e,"mutations")}function wh(e){return Fu(e,"documentMutations")}function _h(e){return Fu(e,"mutationQueues")}var xh=function(){function e(t){S(this,e),this.On=t}return N(e,[{key:"next",value:function(){return this.On+=2,this.On}}],[{key:"Nn",value:function(){return new e(0)}},{key:"Bn",value:function(){return new e(-1)}}]),e}(),Ih=function(){function e(t,n){S(this,e),this.referenceDelegate=t,this.serializer=n}return N(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Ln(e).next((function(n){var r=new xh(n.highestTargetId);return n.highestTargetId=r.next(),t.kn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Ln(e).next((function(e){return Co.fromTimestamp(new To(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Ln(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Ln(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.kn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.qn(e,t).next((function(){return n.Ln(e).next((function(r){return r.targetCount+=1,n.Qn(t,r),n.kn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.qn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Eh(e).delete(t.targetId)})).next((function(){return n.Ln(e)})).next((function(t){return so(t.targetCount>0),t.targetCount-=1,n.kn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Eh(e).Z((function(o,u){var s=Cf(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Wo.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Eh(e).Z((function(e,n){var r=Cf(n);t(r)}))}},{key:"Ln",value:function(e){return Sh(e).get("targetGlobalKey").next((function(e){return so(null!==e),e}))}},{key:"kn",value:function(e,t){return Sh(e).put("targetGlobalKey",t)}},{key:"qn",value:function(e,t){return Eh(e).put(Nf(this.serializer,t))}},{key:"Qn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Ln(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=tc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Eh(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Cf(n);nc(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Th(e);return t.forEach((function(t){var o=cu(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Wo.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Th(e);return Wo.forEach(t,(function(t){var a=cu(t.path);return Wo.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Th(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Th(e),i=Lc();return r.Z({range:n,Y:!0},(function(e,t,n){var r=hu(e[1]),a=new Do(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=cu(t.path),r=IDBKeyRange.bound([n],[So(n)],!1,!0),i=0;return Th(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=d(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ut",value:function(e,t){return Eh(e).get(t).next((function(e){return e?Cf(e):null}))}}]),e}();function Eh(e){return Fu(e,"targets")}function Sh(e){return Fu(e,"targetGlobal")}function Th(e){return Fu(e,"targetDocuments")}function Ch(e,t){var n=d(e,2),r=n[0],i=n[1],a=d(t,2),o=a[0],u=a[1],s=Io(r,o);return 0===s?Io(i,u):s}var Nh=function(){function e(t){S(this,e),this.Kn=t,this.buffer=new Gu(Ch),this.$n=0}return N(e,[{key:"Un",value:function(){return++this.$n}},{key:"Wn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Ch(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ah=function(){function e(t,n,r){S(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return N(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"zn",value:function(e){var t=this;ro("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Xo(e.t0)){e.next=12;break}ro("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Ko(e.t0);case 14:return e.next=16,t.zn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Rh=function(){function e(t,n){S(this,e),this.jn=t,this.params=n}return N(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.Hn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Wo.resolve(au.ae);var r=new Nh(t);return this.jn.forEachTarget(e,(function(e){return r.Wn(e.sequenceNumber)})).next((function(){return n.jn.Jn(e,(function(e){return r.Wn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ro("LruGarbageCollector","Garbage collection skipped; disabled"),Wo.resolve(ph)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ro("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),ph):n.Yn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Yn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ro("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),no()<=de.DEBUG&&ro("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Wo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Ph(e,t){return new Rh(e,t)}var Dh=function(){function e(t,n){S(this,e),this.db=t,this.garbageCollector=Ph(this,n)}return N(e,[{key:"Hn",value:function(e){var t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Zn",value:function(e){var t=0;return this.Jn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Jn",value:function(e,t){return this.Xn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Oh(e,n)}},{key:"removeReference",value:function(e,t,n){return Oh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Oh(e,t)}},{key:"er",value:function(e,t){return function(e,t){var n=!1;return _h(e).X((function(r){return kh(e,r,t).next((function(e){return e&&(n=!0),Wo.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Xn(e,(function(o,u){if(u<=t){var s=n.er(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Co.min()),Th(e).delete(function(e){return[0,cu(e.path)]}(o))}))}));i.push(s)}})).next((function(){return Wo.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Oh(e,t)}},{key:"Xn",value:function(e,t){var n,r=Th(e),i=au.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=d(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==au.ae&&t(new Do(hu(n)),i),i=s,n=u):i=au.ae})).next((function(){i!==au.ae&&t(new Do(hu(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Oh(e,t){return Th(e).put(function(e,t){return{targetId:0,path:cu(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Lh=function(){function e(){S(this,e),this.changes=new Ic((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return N(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Cs.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Wo.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Mh=function(){function e(t){S(this,e),this.serializer=t}return N(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return jh(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return jh(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],If(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.tr(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Cs.newInvalidDocument(t);return jh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Bh(t))},(function(e,i){r=n.nr(t,i)})).next((function(){return r}))}},{key:"rr",value:function(e,t){var n=this,r={size:0,document:Cs.newInvalidDocument(t)};return jh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Bh(t))},(function(e,i){r={document:n.nr(t,i),size:yh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Sc();return this.ir(e,t,(function(e,t){var i=n.nr(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"sr",value:function(e,t){var n=this,r=Sc(),i=new Bu(Do.comparator);return this.ir(e,t,(function(e,t){var a=n.nr(e,t);r=r.insert(e,a),i=i.insert(e,yh(t))})).next((function(){return{documents:r,_r:i}}))}},{key:"ir",value:function(e,t,n){if(t.isEmpty())return Wo.resolve();var r=new Gu(qh);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Bh(r.first()),Bh(r.last())),a=r.getIterator(),o=a.getNext();return jh(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Do.fromSegments([].concat(E(t.prefixPath),[t.collectionGroup,t.documentId]));o&&qh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(Bh(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r,i){var a=this,o=t.path,u=[o.popLast().toArray(),o.lastSegment(),If(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jh(e).G(IDBKeyRange.bound(u,s,!0)).next((function(e){null==i||i.incrementDocumentReadCount(e.length);var n,o=Sc(),u=b(e);try{for(u.s();!(n=u.n()).done;){var s=n.value,c=a.nr(Do.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);c.isFoundDocument()&&(bc(t,c)||r.has(c.key))&&(o=o.insert(c.key,c))}}catch(l){u.e(l)}finally{u.f()}return o}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Sc(),o=zh(t,n),u=zh(t,Bo.max());return jh(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.nr(Do.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Uh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Vh(e).get("remoteDocumentGlobalKey").next((function(e){return so(!!e),e}))}},{key:"tr",value:function(e,t){return Vh(e).put("remoteDocumentGlobalKey",t)}},{key:"nr",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=af(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Do.fromSegments(t.noDocument.path),i=Sf(t.noDocument.readTime);n=Cs.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return uo();var a=Do.fromSegments(t.unknownDocument.path),o=Sf(t.unknownDocument.version);n=Cs.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new To(e[0],e[1]);return Co.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Co.min()))return n}return Cs.newInvalidDocument(e)}}]),e}();function Fh(e){return new Mh(e)}var Uh=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).ar=e,i.trackRemovals=r,i.ur=new Ic((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return N(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Gu((function(e,t){return Io(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.ur.get(a);if(n.push(t.ar.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=xf(t.ar.serializer,o);i=i.add(a.path.popLast());var c=yh(s);r+=c-u.size,n.push(t.ar.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=xf(t.ar.serializer,o.convertToNoDocument(Co.min()));n.push(t.ar.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.ar.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.ar.updateMetadata(e,r)),Wo.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.ar.rr(e,t).next((function(e){return n.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.ar.sr(e,t).next((function(e){var t=e.documents;return e._r.forEach((function(e,r){n.ur.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Lh);function Vh(e){return Fu(e,"remoteDocumentGlobal")}function jh(e){return Fu(e,"remoteDocumentsV14")}function Bh(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function zh(e,t){var n=t.documentKey.path.toArray();return[e,If(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function qh(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Io(n[a],r[a]))return i;return(i=Io(n.length,r.length))||((i=Io(n[n.length-2],r[r.length-2]))||Io(n[n.length-1],r[r.length-1]))}var Gh=N((function e(t,n){S(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Kh=function(){function e(t,n,r,i){S(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return N(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&ol(r.mutation,e,Wu.empty(),To.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Lc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lc(),i=Ac();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Cc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Ac();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Lc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Sc(),a=Pc(),o=Pc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ll)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),ol(o.mutation,t,o.mutation.getFieldMask(),To.now())):a.set(t.key,Wu.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Gh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Pc(),i=new Bu((function(e,t){return e-t})),a=Lc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=b(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Wu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Lc()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Rc();c.forEach((function(e){if(!a.has(e)){var n=il(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Wo.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return Do.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Wo.resolve(Ac()),u=-1,s=a;return o.next((function(t){return Wo.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Wo.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Lc())})).next((function(e){return{batchId:u,changes:Nc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Do(t)).next((function(e){var t=Cc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=Cc();return this.indexManager.getCollectionParents(e,a).next((function(u){return Wo.forEach(u,(function(u){var s=function(e,t){return new uc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,u.child(a));return i.getDocumentsMatchingCollectionQuery(e,s,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Cs.newInvalidDocument(r)))}));var n=Cc();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&ol(a.mutation,r,Wu.empty(),To.now()),bc(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),Hh=function(){function e(t){S(this,e),this.serializer=t,this.cr=new Map,this.lr=new Map}return N(e,[{key:"getBundleMetadata",value:function(e,t){return Wo.resolve(this.cr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ql(e.createTime)}}(t)),Wo.resolve()}},{key:"getNamedQuery",value:function(e,t){return Wo.resolve(this.lr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Af(e.bundledQuery),readTime:Ql(e.readTime)}}(t)),Wo.resolve()}}]),e}(),Wh=function(){function e(){S(this,e),this.overlays=new Bu(Do.comparator),this.hr=new Map}return N(e,[{key:"getOverlay",value:function(e,t){return Wo.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ac();return Wo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),Wo.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.hr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.hr.delete(n)),Wo.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Ac(),i=t.length+1,a=new Do(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Wo.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Bu((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Ac(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Ac(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Wo.resolve(s)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new bl(t,n));var a=this.hr.get(t);void 0===a&&(a=Lc(),this.hr.set(t,a)),this.hr.set(t,a.add(n.key))}}]),e}(),Qh=function(){function e(){S(this,e),this.Pr=new Gu(Yh.Ir),this.Tr=new Gu(Yh.Er)}return N(e,[{key:"isEmpty",value:function(){return this.Pr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Yh(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ar(new Yh(e,t))}},{key:"Rr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Vr",value:function(e){var t=this,n=new Do(new Ao([])),r=new Yh(n,e),i=new Yh(n,e+1),a=[];return this.Tr.forEachInRange([r,i],(function(e){t.Ar(e),a.push(e.key)})),a}},{key:"mr",value:function(){var e=this;this.Pr.forEach((function(t){return e.Ar(t)}))}},{key:"Ar",value:function(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}},{key:"gr",value:function(e){var t=new Do(new Ao([])),n=new Yh(t,e),r=new Yh(t,e+1),i=Lc();return this.Tr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Yh(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Yh=function(){function e(t,n){S(this,e),this.key=t,this.pr=n}return N(e,null,[{key:"Ir",value:function(e,t){return Do.comparator(e.key,t.key)||Io(e.pr,t.pr)}},{key:"Er",value:function(e,t){return Io(e.pr,t.pr)||Do.comparator(e.key,t.key)}}]),e}(),Jh=function(){function e(t,n){S(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Gu(Yh.Ir)}return N(e,[{key:"checkEmpty",value:function(e){return Wo.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new gl(i,t,n,r);this.mutationQueue.push(a);var o,u=b(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.wr=this.wr.add(new Yh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Wo.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Wo.resolve(this.Sr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.br(n),i=r<0?0:r;return Wo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Wo.resolve(0===this.mutationQueue.length?-1:this.yr-1)}},{key:"getAllMutationBatches",value:function(e){return Wo.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Yh(t,0),i=new Yh(t,Number.POSITIVE_INFINITY),a=[];return this.wr.forEachInRange([r,i],(function(e){var t=n.Sr(e.pr);a.push(t)})),Wo.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Gu(Io);return t.forEach((function(e){var t=new Yh(e,0),i=new Yh(e,Number.POSITIVE_INFINITY);n.wr.forEachInRange([t,i],(function(e){r=r.add(e.pr)}))})),Wo.resolve(this.Dr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Do.isDocumentKey(i)||(i=i.child(""));var a=new Yh(new Do(i),0),o=new Gu(Io);return this.wr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),a),Wo.resolve(this.Dr(o))}},{key:"Dr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Sr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;so(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.wr;return Wo.forEach(t.mutations,(function(i){var a=new Yh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.wr=r}))}},{key:"Mn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Yh(t,0),r=this.wr.firstAfterOrEqual(n);return Wo.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Wo.resolve()}},{key:"Cr",value:function(e,t){return this.br(e)}},{key:"br",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Sr",value:function(e){var t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),$h=function(){function e(t){S(this,e),this.vr=t,this.docs=new Bu(Do.comparator),this.size=0}return N(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Wo.resolve(n?n.document.mutableCopy():Cs.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Sc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Cs.newInvalidDocument(e))})),Wo.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Sc(),a=t.path,o=new Do(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||zo(jo(l),n)<=0||(r.has(l.key)||bc(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Wo.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){uo()}},{key:"Fr",value:function(e,t){return Wo.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Xh(this)}},{key:"getSize",value:function(e){return Wo.resolve(this.size)}}]),e}(),Xh=function(e){w(n,e);var t=x(n);function n(e){var r;return S(this,n),(r=t.call(this)).ar=e,r}return N(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.ar.addEntry(e,i)):t.ar.removeEntry(r)})),Wo.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ar.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ar.getEntries(e,t)}}]),n}(Lh),Zh=function(){function e(t){S(this,e),this.persistence=t,this.Mr=new Ic((function(e){return tc(e)}),nc),this.lastRemoteSnapshotVersion=Co.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Qh,this.targetCount=0,this.Br=xh.Nn()}return N(e,[{key:"forEachTarget",value:function(e,t){return this.Mr.forEach((function(e,n){return t(n)})),Wo.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Wo.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Wo.resolve(this.Or)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Br.next(),Wo.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Wo.resolve()}},{key:"qn",value:function(e){this.Mr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Br=new xh(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.qn(t),this.targetCount+=1,Wo.resolve()}},{key:"updateTargetData",value:function(e,t){return this.qn(t),Wo.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Wo.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Mr.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Mr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Wo.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Wo.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Mr.get(t)||null;return Wo.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Nr.dr(t,n),Wo.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Nr.Rr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Wo.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Nr.Vr(t),Wo.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Nr.gr(t);return Wo.resolve(n)}},{key:"containsKey",value:function(e,t){return Wo.resolve(this.Nr.containsKey(t))}}]),e}(),ed=function(){function e(t,n){var r=this;S(this,e),this.Lr={},this.overlays={},this.kr=new au(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Zh(this),this.indexManager=new ah,this.remoteDocumentCache=function(e){return new $h(e)}((function(e){return r.referenceDelegate.Kr(e)})),this.serializer=new _f(n),this.$r=new Hh(this.serializer)}return N(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Wh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Lr[e.toKey()];return n||(n=new Jh(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$r}},{key:"runTransaction",value:function(e,t,n){var r=this;ro("MemoryPersistence","Starting transaction:",e);var i=new td(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((function(e){return r.referenceDelegate.Wr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gr",value:function(e,t){return Wo.or(Object.values(this.Lr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),td=function(e){w(n,e);var t=x(n);function n(e){var r;return S(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return N(n)}(Go),nd=function(){function e(t){S(this,e),this.persistence=t,this.zr=new Qh,this.jr=null}return N(e,[{key:"Jr",get:function(){if(this.jr)return this.jr;throw uo()}},{key:"addReference",value:function(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Wo.resolve()}},{key:"removeReference",value:function(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Wo.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Jr.add(t.toString()),Wo.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.zr.Vr(t.targetId).forEach((function(e){return n.Jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ur",value:function(){this.jr=new Set}},{key:"Wr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wo.forEach(this.Jr,(function(r){var i=Do.fromPath(r);return t.Yr(e,i).next((function(e){e||n.removeEntry(i,Co.min())}))})).next((function(){return t.jr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Yr(e,t).next((function(e){e?n.Jr.delete(t.toString()):n.Jr.add(t.toString())}))}},{key:"Kr",value:function(e){return 0}},{key:"Yr",value:function(e,t){var n=this;return Wo.or([function(){return Wo.resolve(n.zr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gr(e,t)}])}}],[{key:"Hr",value:function(t){return new e(t)}}]),e}(),rd=function(){function e(t){S(this,e),this.serializer=t}return N(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new Qo("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",du,{unique:!0}),e.createObjectStore("documentMutations")}(e),id(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Wo.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),id(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Co.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",du,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Wo.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Xr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.ei(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ti(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ni(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ri(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Cu});t.createIndex("collectionPathOverlayIndex",Nu,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Au,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:yu});t.createIndex("documentKeyIndex",gu),t.createIndex("collectionGroupIndex",ku)}(e)})).next((function(){return i.ii(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Iu}).createIndex("sequenceNumberIndex",Eu,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Su}).createIndex("documentKeyIndex",Tu,{unique:!1})}(e)}))),o}},{key:"ei",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=yh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Xr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return Wo.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return Wo.forEach(r,(function(r){so(r.userId===n.userId);var i=Tf(t.serializer,r);return mh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ti",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Ao(n),o=function(e){return[0,cu(e)]}(a);r.push(t.get(o).next((function(n){return n?Wo.resolve():function(n){return t.put({targetId:0,path:cu(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Wo.waitFor(r)}))}))}},{key:"ni",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:xu});var n=t.store("collectionParents"),r=new oh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:cu(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new Ao(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=d(e,3),r=(n[0],n[1]),a=(n[2],hu(r));return i(a.popLast())}))}))}},{key:"ri",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Cf(r),a=Nf(t.serializer,i);return n.put(a)}))}},{key:"ii",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new Do(Ao.fromString(e.document.name).popFirst(5)):e.noDocument?Do.fromSegments(e.noDocument.path):e.unknownDocument?Do.fromSegments(e.unknownDocument.path):uo()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return Wo.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=Fh(this.serializer),a=new ed(nd.Hr,this.serializer.ct);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Lc();Tf(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Wo.forEach(r,(function(e,r){var o=new Za(r),u=Ff.lt(n.serializer,o),s=a.getIndexManager(o),c=gh.lt(o,n.serializer,s,a.referenceDelegate);return new Kh(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Mu(t,au.ae),e).next()}))}))}}]),e}();function id(e){e.createObjectStore("targetDocuments",{keyPath:wu}).createIndex("documentTargetsIndex",_u,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bu,{unique:!0}),e.createObjectStore("targetGlobal")}var ad="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",od=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(S(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.oi=a,this.window=o,this.document=u,this._i=c,this.ai=l,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=function(e){return Promise.resolve()},!e.C())throw new fo(lo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Dh(this,i),this.Ti=n+"main",this.serializer=new _f(s),this.Ei=new Yo(this.Ti,this.ui,new rd(this.serializer)),this.Qr=new Ih(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Fh(this.serializer),this.$r=new Of,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&io("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return N(e,[{key:"start",value:function(){var e=this;return this.Ai().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new fo(lo.FAILED_PRECONDITION,ad);return e.Ri(),e.Vi(),e.mi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Qr.getHighestSequenceNumber(t)}))})).then((function(t){e.kr=new au(t,e._i)})).then((function(){e.qr=!0})).catch((function(t){return e.Ei&&e.Ei.close(),Promise.reject(t)}))}},{key:"fi",value:function(e){var t=this;return this.Ii=function(){var n=s(o().mark((function n(r){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ei.k(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ai();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ai",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return sd(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.gi(t).next((function(t){t||(e.isPrimary=!1,e.oi.enqueueRetryable((function(){return e.Ii(!1)})))}))})).next((function(){return e.pi(t)})).next((function(n){return e.isPrimary&&!n?e.yi(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Xo(t))return ro("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ro("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.oi.enqueueRetryable((function(){return e.Ii(t)})),e.isPrimary=t}))}},{key:"gi",value:function(e){var t=this;return ud(e).get("owner").next((function(e){return Wo.resolve(t.Si(e))}))}},{key:"bi",value:function(e){return sd(e).delete(this.clientId)}},{key:"Di",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ci(this.Pi,18e5)){e.next=6;break}return this.Pi=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Fu(e,"clientMetadata");return t.G().next((function(e){var n=a.vi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Wo.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.di){n=b(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.di.removeItem(this.Fi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mi",value:function(){var e=this;this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ai().then((function(){return e.Di()})).then((function(){return e.mi()}))}))}},{key:"Si",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"pi",value:function(e){var t=this;return this.ai?Wo.resolve(!0):ud(e).get("owner").next((function(n){if(null!==n&&t.Ci(n.leaseTimestampMs,5e3)&&!t.Mi(n.ownerId)){if(t.Si(n)&&t.networkEnabled)return!0;if(!t.Si(n)){if(!n.allowTabSynchronization)throw new fo(lo.FAILED_PRECONDITION,ad);return!1}}return!(!t.networkEnabled||!t.inForeground)||sd(e).G().next((function(e){return void 0===t.vi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ro("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=s(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),e.next=7,this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Mu(e,au.ae);return t.yi(n).next((function(){return t.bi(n)}))}));case 7:this.Ei.close(),this.Bi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vi",value:function(e,t){var n=this;return e.filter((function(e){return n.Ci(e.updateTimeMs,t)&&!n.Mi(e.clientId)}))}},{key:"Li",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return sd(t).G().next((function(t){return e.vi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.qr}},{key:"getMutationQueue",value:function(e,t){return gh.lt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new sh(e,this.serializer.ct.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Ff.lt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.$r}},{key:"runTransaction",value:function(e,t,n){var r=this;ro("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Lu:14===e?Ou:13===e?Du:12===e?Pu:11===e?Ru:void uo()}(this.ui);return this.Ei.runTransaction(e,a,o,(function(a){return i=new Mu(a,r.kr?r.kr.next():au.ae),"readwrite-primary"===t?r.gi(i).next((function(e){return!!e||r.pi(i)})).next((function(t){if(!t)throw io("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.oi.enqueueRetryable((function(){return r.Ii(!1)})),new fo(lo.FAILED_PRECONDITION,qo);return n(i)})).next((function(e){return r.wi(i).next((function(){return e}))})):r.ki(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"ki",value:function(e){var t=this;return ud(e).get("owner").next((function(e){if(null!==e&&t.Ci(e.leaseTimestampMs,5e3)&&!t.Mi(e.ownerId)&&!t.Si(e)&&!(t.ai||t.allowTabSynchronization&&e.allowTabSynchronization))throw new fo(lo.FAILED_PRECONDITION,ad)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ud(e).put("owner",t)}},{key:"yi",value:function(e){var t=this,n=ud(e);return n.get("owner").next((function(e){return t.Si(e)?(ro("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Wo.resolve()}))}},{key:"Ci",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(io("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=function(){e.oi.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ai()}))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}},{key:"Oi",value:function(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}},{key:"Vi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!G()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.oi.enterRestrictedMode(!0),t.oi.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"Ni",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Mi",value:function(e){var t;try{var n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ro("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return io("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){io("Failed to set zombie client id.",e)}}},{key:"Bi",value:function(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}},{key:"Fi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Yo.C()}}]),e}();function ud(e){return Fu(e,"owner")}function sd(e){return Fu(e,"clientMetadata")}function cd(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ld=function(){function e(t,n,r,i){S(this,e),this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}return N(e,null,[{key:"Ki",value:function(t,n){var r,i=Lc(),a=Lc(),o=b(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),fd=function(){function e(){S(this,e),this._documentReadCount=0}return N(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),hd=function(){function e(){S(this,e),this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=8}return N(e,[{key:"initialize",value:function(e,t){this.zi=e,this.indexManager=t,this.$i=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.ji(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.Hi(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new fd;return i.Ji(e,t,n).next((function(r){if(a.result=r,i.Ui)return i.Yi(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Yi",value:function(e,t,n,r){return n.documentReadCount<this.Wi?(no()<=de.DEBUG&&ro("QueryEngine","SDK will not create cache indexes for query:",kc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Wo.resolve()):(no()<=de.DEBUG&&ro("QueryEngine","Query:",kc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(no()<=de.DEBUG&&ro("QueryEngine","The SDK decides to create cache indexes for query:",kc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dc(t))):Wo.resolve())}},{key:"ji",value:function(e,t){var n=this;if(lc(t))return Wo.resolve(null);var r=dc(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=mc(t,null,"F"),r=dc(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Lc.apply(void 0,E(i));return n.zi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Zi(t,i);return n.Xi(t,o,a,r.readTime)?n.ji(e,mc(t,null,"F")):n.es(e,o,t,r)}))}))})))}))}},{key:"Hi",value:function(e,t,n,r){var i=this;return lc(t)||r.isEqual(Co.min())?Wo.resolve(null):this.zi.getDocuments(e,n).next((function(a){var o=i.Zi(t,a);return i.Xi(t,o,n,r)?Wo.resolve(null):(no()<=de.DEBUG&&ro("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),kc(t)),i.es(e,o,t,Vo(r,-1)).next((function(e){return e})))}))}},{key:"Zi",value:function(e,t){var n=new Gu(_c(e));return t.forEach((function(t,r){bc(e,r)&&(n=n.add(r))})),n}},{key:"Xi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ji",value:function(e,t,n){return no()<=de.DEBUG&&ro("QueryEngine","Using full collection scan to execute query:",kc(t)),this.zi.getDocumentsMatchingQuery(e,t,Bo.min(),n)}},{key:"es",value:function(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),dd=function(){function e(t,n,r,i){S(this,e),this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Bu(Io),this.rs=new Ic((function(e){return tc(e)}),nc),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}return N(e,[{key:"_s",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kh(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ns)}))}}]),e}();function pd(e,t,n,r){return new dd(e,t,n,r)}function vd(e,t){return md.apply(this,arguments)}function md(){return md=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r._s(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Lc(),s=b(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=b(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=b(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=b(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{us:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),md.apply(this,arguments)}function yd(e,t){var n=co(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Wo.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);so(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Lc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function gd(e){var t=co(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Qr.getLastRemoteSnapshotVersion(e)}))}function kd(e,t){var n=co(e),r=t.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Qr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Qr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Yu.EMPTY_BYTE_STRING,Co.min()).withLastLimboFreeSnapshotVersion(Co.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Qr.updateTargetData(e,c))}}));var u=Sc(),s=Lc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(bd(e,a,t.documentUpdates).next((function(e){u=e.cs,s=e.ls}))),!r.isEqual(Co.min())){var c=n.Qr.getLastRemoteSnapshotVersion(e).next((function(t){return n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Wo.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.ns=i,e}))}function bd(e,t,n){var r=Lc(),i=Lc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Sc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Co.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ro("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{cs:r,ls:i}}))}function wd(e,t){var n=co(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function _d(e,t){var n=co(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Qr.getTargetData(e,t).next((function(i){return i?(r=i,Wo.resolve(r)):n.Qr.allocateTargetId(e).next((function(i){return r=new wf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}function xd(e,t,n){return Id.apply(this,arguments)}function Id(){return Id=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=co(t),a=i.ns.get(n),u=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",u,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Xo(e.t1)){e.next=12;break}throw e.t1;case 12:ro("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ns=i.ns.remove(n),i.rs.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Id.apply(this,arguments)}function Ed(e,t,n){var r=co(e),i=Co.min(),a=Lc();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=co(e),i=r.rs.get(n);return void 0!==i?Wo.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,dc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ts.getDocumentsMatchingQuery(e,t,n?i:Co.min(),n?a:Lc())})).next((function(e){return Cd(r,wc(t),e),{documents:e,hs:a}}))}))}function Sd(e,t){var n=co(e),r=co(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ut(e,t).next((function(e){return e?e.target:null}))}))}function Td(e,t){var n=co(e),r=n.ss.get(t)||Co.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.os.getAllFromCollectionGroup(e,t,Vo(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Cd(n,t,e),e}))}function Cd(e,t,n){var r=e.ss.get(t)||Co.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}function Nd(e,t,n,r){return Ad.apply(this,arguments)}function Ad(){return Ad=s(o().mark((function e(t,n,r,i){var a,u,s,c,l,f,h,d,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=co(t),u=Lc(),s=Sc(),c=b(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Ps(f.metadata.name),f.document&&(u=u.add(h)),(d=n.Is(f)).setReadTime(n.Ts(f.metadata.readTime)),s=s.insert(h,d)}catch(o){c.e(o)}finally{c.f()}return p=a.os.newChangeBuffer({trackRemovals:!0}),e.next=7,_d(a,function(e){return dc(cc(Ao.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return bd(e,p,s).next((function(t){return p.apply(e),t})).next((function(t){return a.Qr.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Qr.addMatchingKeys(e,u,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls)})).next((function(){return t.cs}))}))})));case 9:case"end":return e.stop()}}),e)}))),Ad.apply(this,arguments)}function Rd(e,t){return Pd.apply(this,arguments)}function Pd(){return Pd=s(o().mark((function e(t,n){var r,i,a,u=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:Lc(),e.next=3,_d(t,dc(Af(n.bundledQuery)));case 3:return i=e.sent,a=co(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Ql(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.$r.saveNamedQuery(e,n);var o=i.withResumeToken(Yu.EMPTY_BYTE_STRING,t);return a.ns=a.ns.insert(o.targetId,o),a.Qr.updateTargetData(e,o).next((function(){return a.Qr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Qr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.$r.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Pd.apply(this,arguments)}function Dd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Od(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ld(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Md=function(){function e(t,n,r,i){S(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return N(e,[{key:"ds",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new fo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(io("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Fd=function(){function e(t,n,r){S(this,e),this.targetId=t,this.state=n,this.error=r}return N(e,[{key:"ds",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new fo(i.error.code,i.error.message))),a?new e(t,i.state,r):(io("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Ud=function(){function e(t,n){S(this,e),this.clientId=t,this.activeTargetIds=n}return N(e,null,[{key:"Es",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Fc(),o=0;i&&o<r.activeTargetIds.length;++o)i=su(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(io("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Vd=function(){function e(t,n){S(this,e),this.clientId=t,this.onlineState=n}return N(e,null,[{key:"Es",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(io("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),jd=function(){function e(){S(this,e),this.activeTargetIds=Fc()}return N(e,[{key:"As",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Rs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ds",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Bd=function(){function e(t,n,r,i,a){S(this,e),this.window=t,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Bu(Io),this.started=!1,this.ys=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ws=Dd(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new jd),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}return N(e,[{key:"start",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a,u,s,c,l,f,h,d=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Li();case 2:t=e.sent,n=b(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Vs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Dd(this.persistenceKey,i)))&&(u=Ud.Es(i,a))&&(this.ps=this.ps.insert(u.clientId,u));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ms(),(s=this.storage.getItem(this.vs))&&(c=this.xs(s))&&this.Os(c),l=b(this.ys);try{for(l.s();!(f=l.n()).done;)h=f.value,this.gs(h)}catch(o){l.e(o)}finally{l.f()}this.ys=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ss,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ns(this.ps)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ps.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Bs(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Bs(e,t,n),this.Ls(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ld(this.persistenceKey,e));if(n){var r=Fd.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ks.Rs(e),this.Ms()}},{key:"isLocalQueryTarget",value:function(e){return this.ks.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Ld(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.qs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ls(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Qs(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ks(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ro("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ro("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ro("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"gs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ro("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void io("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(s(o().mark((function e(){var r,i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.bs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.$s(n.key),e.abrupt("return",t.Us(r,null));case 6:if(!(i=t.Ws(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Us(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Ds.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Gs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.zs(a));case 16:e.next=41;break;case 18:if(!t.Cs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(u=t.js(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Hs(u));case 23:e.next=41;break;case 25:if(n.key!==t.vs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.xs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Os(s));case 30:e.next=41;break;case 32:if(n.key!==t.Ss){e.next=37;break}c=function(e){var t=au.ae;if(null!=e)try{var n=JSON.parse(e);so("number"==typeof n),t=n}catch(e){io("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),c!==au.ae&&t.sequenceNumberHandler(c),e.next=41;break;case 37:if(n.key!==t.Fs){e.next=41;break}return l=t.Js(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Ys(e)})));case 41:e.next=44;break;case 43:t.ys.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"ks",get:function(){return this.ps.get(this.Vs)}},{key:"Ms",value:function(){this.setItem(this.ws,this.ks.ds())}},{key:"Bs",value:function(e,t,n){var r=new Md(this.currentUser,e,t,n),i=Od(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}},{key:"Ls",value:function(e){var t=Od(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Qs",value:function(e){var t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}},{key:"qs",value:function(e,t,n){var r=Ld(this.persistenceKey,e),i=new Fd(e,t,n);this.setItem(r,i.ds())}},{key:"Ks",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}},{key:"$s",value:function(e){var t=this.bs.exec(e);return t?t[1]:null}},{key:"Ws",value:function(e,t){var n=this.$s(e);return Ud.Es(n,t)}},{key:"Gs",value:function(e,t){var n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Md.Es(new Za(i),r,t)}},{key:"js",value:function(e,t){var n=this.Cs.exec(e),r=Number(n[1]);return Fd.Es(r,t)}},{key:"xs",value:function(e){return Vd.Es(e)}},{key:"Js",value:function(e){return JSON.parse(e)}},{key:"zs",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Zs(t.batchId,t.state,t.error));case 2:ro("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Hs",value:function(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}},{key:"Us",value:function(e,t){var n=this,r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),a=this.Ns(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.eo(o,u).then((function(){n.ps=r}))}},{key:"Os",value:function(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ns",value:function(e){var t=Fc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),zd=function(){function e(){S(this,e),this.no=new jd,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return N(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.no.As(e),this.ro[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.ro[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.no.Rs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.no.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.ro[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.no.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.no.activeTargetIds.has(e)}},{key:"start",value:function(){return this.no=new jd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),qd=function(){function e(){S(this,e)}return N(e,[{key:"io",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Gd=function(){function e(){var t=this;S(this,e),this.so=function(){return t.oo()},this._o=function(){return t.ao()},this.uo=[],this.co()}return N(e,[{key:"io",value:function(e){this.uo.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}},{key:"co",value:function(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}},{key:"oo",value:function(){ro("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=b(this.uo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"ao",value:function(){ro("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=b(this.uo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Kd=null;function Hd(){return null===Kd?Kd=268435456+Math.round(2147483648*Math.random()):Kd++,"0x"+Kd.toString(16)}var Wd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Qd=function(){function e(t){S(this,e),this.lo=t.lo,this.ho=t.ho}return N(e,[{key:"Po",value:function(e){this.Io=e}},{key:"To",value:function(e){this.Eo=e}},{key:"onMessage",value:function(e){this.Ao=e}},{key:"close",value:function(){this.ho()}},{key:"send",value:function(e){this.lo(e)}},{key:"Ro",value:function(){this.Io()}},{key:"Vo",value:function(e){this.Eo(e)}},{key:"mo",value:function(e){this.Ao(e)}}]),e}(),Yd="WebChannelConnection",Jd=function(e){w(n,e);var t=x(n);function n(e){var r;return S(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return N(n,[{key:"Co",value:function(e,t,n,r){var i=Hd();return new Promise((function(a,o){var u=new Ya;u.setWithCredentials(!0),u.listenOnce(Ka.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Ga.NO_ERROR:var t=u.getResponseJson();ro(Yd,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Ga.TIMEOUT:ro(Yd,"RPC '".concat(e,"' ").concat(i," timed out")),o(new fo(lo.DEADLINE_EXCEEDED,"Request time out"));break;case Ga.HTTP_ERROR:var n=u.getStatus();if(ro(Yd,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(lo).indexOf(t)>=0?t:lo.UNKNOWN}(s.status);o(new fo(c,s.message))}else o(new fo(lo.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new fo(lo.UNAVAILABLE,"Connection failed."));break;default:uo()}}finally{ro(Yd,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);ro(Yd,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Fo",value:function(e,t,n){var r=Hd(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=za(),o=qa(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");ro(Yd,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new Qd({lo:function(t){h?ro(Yd,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(ro(Yd,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),ro(Yd,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},ho:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Qa.EventType.OPEN,(function(){h||ro(Yd,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Qa.EventType.CLOSE,(function(){h||(h=!0,ro(Yd,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Vo())})),p(l,Qa.EventType.ERROR,(function(t){h||(h=!0,ao(Yd,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Vo(new fo(lo.UNAVAILABLE,"The operation could not be completed")))})),p(l,Qa.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];so(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){ro(Yd,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=pl[e];if(void 0!==t)return xl(t)}(u),c=o.message;void 0===s&&(s=lo.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.Vo(new fo(s,c)),l.close()}else ro(Yd,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.mo(i)}})),p(o,Ha.STAT_EVENT,(function(t){t.stat===Wa.PROXY?ro(Yd,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Wa.NOPROXY&&ro(Yd,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Ro()}),0),d}}]),n}(function(){function e(t){S(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=n+"://"+t.host,this.po="projects/".concat(r,"/databases/").concat(i),this.yo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return N(e,[{key:"wo",get:function(){return!1}},{key:"So",value:function(e,t,n,r,i){var a=Hd(),o=this.bo(e,t);ro("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,r,i),this.Co(e,o,u,n).then((function(t){return ro("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw ao("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.So(e,t,n,r,i)}},{key:"Do",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+eo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"bo",value:function(e,t){var n=Wd[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}}]),e}());function $d(){return"undefined"!=typeof window?window:null}function Xd(){return"undefined"!=typeof document?document:null}function Zd(e){return new ql(e,!0)}var ep=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;S(this,e),this.oi=t,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=a,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}return N(e,[{key:"reset",value:function(){this.No=0}},{key:"ko",value:function(){this.No=this.Oo}},{key:"qo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&ro("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(function(){return t.Lo=Date.now(),e()})),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}},{key:"Ko",value:function(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}},{key:"cancel",value:function(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Qo",value:function(){return(Math.random()-.5)*this.No}}]),e}(),tp=function(){function e(t,n,r,i,a,o,u,s){S(this,e),this.oi=t,this.$o=r,this.Uo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ep(t,n)}return N(e,[{key:"Ho",value:function(){return 1===this.state||5===this.state||this.Jo()}},{key:"Jo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Yo()}},{key:"stop",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Ho(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zo",value:function(){this.state=0,this.jo.reset()}},{key:"Xo",value:function(){var e=this;this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(function(){return e.e_()})))}},{key:"t_",value:function(e){this.n_(),this.stream.send(e)}},{key:"e_",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Jo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"n_",value:function(){this.Go&&(this.Go.cancel(),this.Go=null)}},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"close",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():n&&n.code===lo.RESOURCE_EXHAUSTED?(io(n.toString()),io("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===lo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.To(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"i_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=d(t,2),i=r[0],a=r[1];e.Wo===n&&e.o_(i,a)}),(function(n){t((function(){var t=new fo(lo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.__(t)}))}))}},{key:"o_",value:function(e,t){var n=this,r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((function(){r((function(){return n.state=2,n.zo=n.oi.enqueueAfterDelay(n.Uo,1e4,(function(){return n.Jo()&&(n.state=3),Promise.resolve()})),n.listener.Po()}))})),this.stream.To((function(e){r((function(){return n.__(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Yo",value:function(){var e=this;this.state=5,this.jo.qo(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"__",value:function(e){return ro("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"s_",value:function(e){var t=this;return function(n){t.oi.enqueueAndForget((function(){return t.Wo===e?n():(ro("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),np=function(e){w(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return S(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return N(n,[{key:"a_",value:function(e,t){return this.connection.Fo("Listen",e,t)}},{key:"onMessage",value:function(e){this.jo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:uo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(so(void 0===t||"string"==typeof t),Yu.fromBase64String(t||"")):(so(void 0===t||t instanceof Uint8Array),Yu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?lo.UNKNOWN:xl(e.code);return new fo(t,e.message||"")}(o);n=new Ll(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Xl(e,s.document.name),l=Ql(s.document.updateTime),f=s.document.createTime?Ql(s.document.createTime):Co.min(),h=new Ss({mapValue:{fields:s.document.fields}}),d=Cs.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Dl(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Xl(e,m.document),g=m.readTime?Ql(m.readTime):Co.min(),k=Cs.newNoDocument(y,g),b=m.removedTargetIds||[];n=new Dl([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Xl(e,w.document),x=w.removedTargetIds||[];n=new Dl([],x,_,null)}else{if(!("filter"in t))return uo();t.filter;var I=t.filter;I.targetId;var E=I.count,S=void 0===E?0:E,T=I.unchangedNames,C=new wl(S,T),N=I.targetId;n=new Ol(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Co.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Co.min():t.readTime?Ql(t.readTime):Co.min()}(e);return this.listener.u_(t,n)}},{key:"c_",value:function(e){var t={};t.database=tf(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=rc(r)?{documents:cf(e,r)}:{query:lf(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Hl(e,t.resumeToken);var i=Gl(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Co.min())>0){n.readTime=Kl(e,t.snapshotVersion.toTimestamp());var a=Gl(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return uo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}},{key:"l_",value:function(e){var t={};t.database=tf(this.serializer),t.removeTarget=e,this.t_(t)}}]),n}(tp),rp=function(e){w(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return S(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.h_=!1,s}return N(n,[{key:"P_",get:function(){return this.h_}},{key:"start",value:function(){this.h_=!1,this.lastStreamToken=void 0,g(y(n.prototype),"start",this).call(this)}},{key:"i_",value:function(){this.h_&&this.I_([])}},{key:"a_",value:function(e,t){return this.connection.Fo("Write",e,t)}},{key:"onMessage",value:function(e){if(so(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();var t=function(e,t){return e&&e.length>0?(so(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ql(e.updateTime):Ql(t);return n.isEqual(Co.min())&&(n=Ql(t)),new el(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ql(e.commitTime);return this.listener.T_(n,t)}return so(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}},{key:"d_",value:function(){var e={};e.database=tf(this.serializer),this.t_(e)}},{key:"I_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return uf(t.serializer,e)}))};this.t_(n)}}]),n}(tp),ip=function(e){w(n,e);var t=x(n);function n(e,r,i,a){var o;return S(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.A_=!1,o}return N(n,[{key:"R_",value:function(){if(this.A_)throw new fo(lo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"So",value:function(e,t,n){var r=this;return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=d(i,2),o=a[0],u=a[1];return r.connection.So(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lo.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new fo(lo.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=d(a,2),u=o[0],s=o[1];return i.connection.vo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lo.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new fo(lo.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.A_=!0}}]),n}(N((function e(){S(this,e)})));var ap=function(){function e(t,n){S(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}return N(e,[{key:"p_",value:function(){var e=this;0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.f_=null,e.w_("Backend didn't respond within 10 seconds."),e.y_("Offline"),Promise.resolve()})))}},{key:"S_",value:function(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}},{key:"set",value:function(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}},{key:"y_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"w_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(io(t),this.g_=!1):ro("OnlineStateTracker",t)}},{key:"b_",value:function(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}]),e}(),op=N((function e(t,n,r,i,a){var u=this;S(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=a,this.M_.io((function(e){r.enqueueAndForget(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=yp(u),!e.t0){e.next=5;break}return ro("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=co(t)).v_.add(4),e.next=4,cp(n);case 4:return n.x_.set("Unknown"),n.v_.delete(4),e.next=8,up(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.x_=new ap(r,i)}));function up(e){return sp.apply(this,arguments)}function sp(){return(sp=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!yp(t)){e.next=18;break}n=b(t.F_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function cp(e){return lp.apply(this,arguments)}function lp(){return(lp=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b(t.F_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function fp(e,t){var n=co(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),mp(n)?vp(n):Hp(n).Jo()&&dp(n,t))}function hp(e,t){var n=co(e),r=Hp(n);n.C_.delete(t),r.Jo()&&pp(n,t),0===n.C_.size&&(r.Jo()?r.Xo():yp(n)&&n.x_.set("Unknown"))}function dp(e,t){if(e.O_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Co.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hp(e).c_(t)}function pp(e,t){e.O_.Ne(t),Hp(e).l_(t)}function vp(e){e.O_=new Fl({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ut:function(t){return e.C_.get(t)||null},rt:function(){return e.datastore.serializer.databaseId}}),Hp(e).start(),e.x_.p_()}function mp(e){return yp(e)&&!Hp(e).Ho()&&e.C_.size>0}function yp(e){return 0===co(e).v_.size}function gp(e){e.O_=void 0}function kp(e){return bp.apply(this,arguments)}function bp(){return(bp=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.C_.forEach((function(e,n){dp(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wp(e,t){return _p.apply(this,arguments)}function _p(){return(_p=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gp(t),mp(t)?(t.x_.S_(n),vp(t)):t.x_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xp(e,t,n){return Ip.apply(this,arguments)}function Ip(){return Ip=s(o().mark((function e(t,n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.x_.set("Online"),!(n instanceof Ll&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=b(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(u=a.value,e.t0=t.C_.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t.C_.delete(u),t.O_.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ro("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ep(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Dl?t.O_.Ue(n):n instanceof Ol?t.O_.Ye(n):t.O_.ze(n),r.isEqual(Co.min())){e.next=29;break}return e.prev=14,e.next=17,gd(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.O_.st(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.C_.get(t);if(r){e.C_.set(t,r.withResumeToken(Yu.EMPTY_BYTE_STRING,r.snapshotVersion)),pp(e,t);var i=new wf(r.target,t,n,r.sequenceNumber);dp(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ro("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Ep(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Ip.apply(this,arguments)}function Ep(e,t,n){return Sp.apply(this,arguments)}function Sp(){return(Sp=s(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xo(n)){e.next=2;break}throw n;case 2:return t.v_.add(1),e.next=5,cp(t);case 5:t.x_.set("Offline"),r||(r=function(){return gd(t.localStore)}),t.asyncQueue.enqueueRetryable(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ro("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.v_.delete(1),e.next=6,up(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tp(e,t){return t().catch((function(n){return Ep(e,n,t)}))}function Cp(e){return Np.apply(this,arguments)}function Np(){return Np=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=co(t),r=Wp(n),i=n.D_.length>0?n.D_[n.D_.length-1].batchId:-1;case 2:if(!Ap(n)){e.next=19;break}return e.prev=3,e.next=6,wd(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.D_.length&&r.Xo(),e.abrupt("break",19);case 10:i=a.batchId,Rp(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ep(n,e.t0);case 17:e.next=2;break;case 19:Pp(n)&&Dp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Np.apply(this,arguments)}function Ap(e){return yp(e)&&e.D_.length<10}function Rp(e,t){e.D_.push(t);var n=Wp(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Pp(e){return yp(e)&&!Wp(e).Ho()&&e.D_.length>0}function Dp(e){Wp(e).start()}function Op(e){return Lp.apply(this,arguments)}function Lp(){return(Lp=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Wp(t).d_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mp(e){return Fp.apply(this,arguments)}function Fp(){return(Fp=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Wp(t),r=b(t.D_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.I_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Up(e,t,n){return Vp.apply(this,arguments)}function Vp(){return Vp=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.D_.shift(),a=kl.from(i,n,r),e.next=3,Tp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Cp(t);case 5:case"end":return e.stop()}}),e)}))),Vp.apply(this,arguments)}function jp(e,t){return Bp.apply(this,arguments)}function Bp(){return Bp=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Wp(t).P_,!e.t0){e.next=4;break}return e.next=4,function(){var e=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return _l(e)&&e!==lo.ABORTED}(n.code)){e.next=7;break}return r=t.D_.shift(),Wp(t).Zo(),e.next=5,Tp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Cp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Pp(t)&&Dp(t);case 5:case"end":return e.stop()}}),e)}))),Bp.apply(this,arguments)}function zp(e,t){return qp.apply(this,arguments)}function qp(){return qp=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=co(t)).asyncQueue.verifyOperationInProgress(),ro("RemoteStore","RemoteStore received new credentials"),i=yp(r),r.v_.add(3),e.next=6,cp(r);case 6:return i&&r.x_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.v_.delete(3),e.next=12,up(r);case 12:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}function Gp(e,t){return Kp.apply(this,arguments)}function Kp(){return(Kp=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=co(t),!n){e.next=7;break}return r.v_.delete(2),e.next=5,up(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.v_.add(2),e.next=12,cp(r);case 12:r.x_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hp(e){return e.N_||(e.N_=function(e,t,n){var r=co(e);return r.R_(),new np(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:kp.bind(null,e),To:wp.bind(null,e),u_:xp.bind(null,e)}),e.F_.push(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.N_.Zo(),mp(e)?vp(e):e.x_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.N_.stop();case 6:gp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.N_}function Wp(e){return e.B_||(e.B_=function(e,t,n){var r=co(e);return r.R_(),new rp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Op.bind(null,e),To:jp.bind(null,e),E_:Mp.bind(null,e),T_:Up.bind(null,e)}),e.F_.push(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.B_.Zo(),t.next=4,Cp(e);case 4:t.next=9;break;case 6:return t.next=8,e.B_.stop();case 8:e.D_.length>0&&(ro("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.B_}var Qp=function(){function e(t,n,r,i,a){S(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ho,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return N(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fo(lo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Yp(e,t){if(io("AsyncQueue","".concat(t,": ").concat(e)),Xo(e))return new fo(lo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Jp=function(){function e(t){S(this,e),this.comparator=t?function(e,n){return t(e,n)||Do.comparator(e.key,n.key)}:function(e,t){return Do.comparator(e.key,t.key)},this.keyedMap=Cc(),this.sortedSet=new Bu(this.comparator)}return N(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),$p=function(){function e(){S(this,e),this.L_=new Bu(Do.comparator)}return N(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):uo():this.L_=this.L_.insert(t,e)}},{key:"k_",value:function(){var e=[];return this.L_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Xp=function(){function e(t,n,r,i,a,o,u,s,c){S(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return N(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Jp.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Zp=N((function e(){S(this,e),this.q_=void 0,this.listeners=[]})),ev=N((function e(){S(this,e),this.queries=new Ic((function(e){return gc(e)}),yc),this.onlineState="Unknown",this.Q_=new Set}));function tv(e,t){return nv.apply(this,arguments)}function nv(){return nv=s(o().mark((function e(t,n){var r,i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=co(t),i=n.query,a=!1,(u=r.queries.get(i))||(a=!0,u=new Zp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:u.q_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Yp(e.t0,"Initialization of query '".concat(kc(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,u),u.listeners.push(n),n.K_(r.onlineState),u.q_&&n.U_(u.q_)&&uv(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),nv.apply(this,arguments)}function rv(e,t){return iv.apply(this,arguments)}function iv(){return iv=s(o().mark((function e(t,n){var r,i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=co(t),i=n.query,a=!1,(u=r.queries.get(i))&&(s=u.listeners.indexOf(n))>=0&&(u.listeners.splice(s,1),a=0===u.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),iv.apply(this,arguments)}function av(e,t){var n,r=co(e),i=!1,a=b(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=b(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.U_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.q_=o}}}catch(f){a.e(f)}finally{a.f()}i&&uv(r)}function ov(e,t,n){var r=co(e),i=r.queries.get(t);if(i){var a,o=b(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function uv(e){e.Q_.forEach((function(e){e.next()}))}var sv=function(){function e(t,n,r){S(this,e),this.query=t,this.W_=n,this.G_=!1,this.z_=null,this.onlineState="Unknown",this.options=r||{}}return N(e,[{key:"U_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=b(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Xp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.G_?this.j_(e)&&(this.W_.next(e),a=!0):this.H_(e,this.onlineState)&&(this.J_(e),a=!0),this.z_=e,a}},{key:"onError",value:function(e){this.W_.error(e)}},{key:"K_",value:function(e){this.onlineState=e;var t=!1;return this.z_&&!this.G_&&this.H_(this.z_,e)&&(this.J_(this.z_),t=!0),t}},{key:"H_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Y_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"j_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.z_&&this.z_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"J_",value:function(e){e=Xp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.G_=!0,this.W_.next(e)}}]),e}(),cv=function(){function e(t,n){S(this,e),this.Z_=t,this.byteLength=n}return N(e,[{key:"X_",value:function(){return"metadata"in this.Z_}}]),e}(),lv=function(){function e(t){S(this,e),this.serializer=t}return N(e,[{key:"Ps",value:function(e){return Xl(this.serializer,e)}},{key:"Is",value:function(e){return e.metadata.exists?af(this.serializer,e.document,!1):Cs.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}},{key:"Ts",value:function(e){return Ql(e)}}]),e}(),fv=function(){function e(t,n,r){S(this,e),this.ea=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hv(t)}return N(e,[{key:"ta",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Z_.namedQuery)this.queries.push(e.Z_.namedQuery);else if(e.Z_.documentMetadata){this.documents.push({metadata:e.Z_.documentMetadata}),e.Z_.documentMetadata.exists||++t;var n=Ao.fromString(e.Z_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Z_.document&&(this.documents[this.documents.length-1].document=e.Z_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"na",value:function(e){var t,n=new Map,r=new lv(this.serializer),i=b(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ps(a.metadata.name),s=b(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Lc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nd(this.localStore,new lv(this.serializer),this.documents,this.ea.id);case 2:t=e.sent,n=this.na(this.documents),r=b(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Rd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,ra:this.collectionGroups,ia:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function hv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var dv=N((function e(t){S(this,e),this.key=t})),pv=N((function e(t){S(this,e),this.key=t})),vv=function(){function e(t,n){S(this,e),this.query=t,this.sa=n,this.oa=null,this.hasCachedResults=!1,this.current=!1,this._a=Lc(),this.mutatedKeys=Lc(),this.aa=_c(t),this.ua=new Jp(this.aa)}return N(e,[{key:"ca",get:function(){return this.sa}},{key:"la",value:function(e,t){var n=this,r=t?t.ha:new $p,i=t?t.ua:this.ua,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=bc(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Pa(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.aa(f,s)>0||c&&n.aa(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ua:o,ha:r,Xi:u,mutatedKeys:a}}},{key:"Pa",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ua;this.ua=e.ua,this.mutatedKeys=e.mutatedKeys;var a=e.ha.k_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return uo()}};return n(e)-n(t)}(e.type,t.type)||r.aa(e.doc,t.doc)})),this.Ia(n);var o=t?this.Ta():[],u=0===this._a.size&&this.current?1:0,s=u!==this.oa;return this.oa=u,0!==a.length||s?{snapshot:new Xp(this.query,e.ua,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}},{key:"K_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ua:this.ua,ha:new $p,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Ea:[]}}},{key:"da",value:function(e){return!this.sa.has(e)&&!!this.ua.has(e)&&!this.ua.get(e).hasLocalMutations}},{key:"Ia",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.sa=t.sa.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.sa=t.sa.delete(e)})),this.current=e.current)}},{key:"Ta",value:function(){var e=this;if(!this.current)return[];var t=this._a;this._a=Lc(),this.ua.forEach((function(t){e.da(t.key)&&(e._a=e._a.add(t.key))}));var n=[];return t.forEach((function(t){e._a.has(t)||n.push(new pv(t))})),this._a.forEach((function(e){t.has(e)||n.push(new dv(e))})),n}},{key:"Aa",value:function(e){this.sa=e.hs,this._a=Lc();var t=this.la(e.documents);return this.applyChanges(t,!0)}},{key:"Ra",value:function(){return Xp.fromInitialDocuments(this.query,this.ua,this.mutatedKeys,0===this.oa,this.hasCachedResults)}}]),e}(),mv=N((function e(t,n,r){S(this,e),this.query=t,this.targetId=n,this.view=r})),yv=N((function e(t){S(this,e),this.key=t,this.Va=!1})),gv=function(){function e(t,n,r,i,a,o){S(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.ma={},this.fa=new Ic((function(e){return gc(e)}),yc),this.ga=new Map,this.pa=new Set,this.ya=new Bu(Do.comparator),this.wa=new Map,this.Sa=new Qh,this.ba={},this.Da=new Map,this.Ca=xh.Bn(),this.onlineState="Unknown",this.va=void 0}return N(e,[{key:"isPrimaryClient",get:function(){return!0===this.va}}]),e}();function kv(e,t){return bv.apply(this,arguments)}function bv(){return bv=s(o().mark((function e(t,n){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hm(t),!(u=r.fa.get(n))){e.next=6;break}i=u.targetId,r.sharedClientState.addLocalQueryTarget(i),a=u.view.Ra(),e.next=15;break;case 6:return e.next=8,_d(r.localStore,dc(n));case 8:return s=e.sent,c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,wv(r,n,i,"current"===c,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&fp(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),bv.apply(this,arguments)}function wv(e,t,n,r,i){return _v.apply(this,arguments)}function _v(){return _v=s(o().mark((function e(t,n,r,i,a){var u,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Fa=function(e,n,r){return function(){var e=s(o().mark((function e(t,n,r,i){var a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.la(r),e.t0=a.Xi,!e.t0){e.next=6;break}return e.next=5,Ed(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.la(t,a)}));case 5:a=e.sent;case 6:return u=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,u),e.abrupt("return",(zv(t,n.targetId,s.Ea),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Ed(t.localStore,n,!0);case 3:return u=e.sent,c=new vv(n,u.hs),l=c.la(u.documents),f=Pl.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),h=c.applyChanges(l,t.isPrimaryClient,f),zv(t,r,h.Ea),d=new mv(n,r,c),e.abrupt("return",(t.fa.set(n,d),t.ga.has(r)?t.ga.get(r).push(n):t.ga.set(r,[n]),h.snapshot));case 11:case"end":return e.stop()}}),e)}))),_v.apply(this,arguments)}function xv(e,t){return Iv.apply(this,arguments)}function Iv(){return Iv=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=co(t),i=r.fa.get(n),!((a=r.ga.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ga.set(i.targetId,a.filter((function(e){return!yc(e,n)}))),void r.fa.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,xd(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),hp(r.remoteStore,i.targetId),jv(r,i.targetId)})).catch(Ko);case 9:e.next=14;break;case 11:return jv(r,i.targetId),e.next=14,xd(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Iv.apply(this,arguments)}function Ev(e,t,n){return Sv.apply(this,arguments)}function Sv(){return Sv=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dm(t),e.prev=1,e.next=4,function(e,t){var n,r,i=co(e),a=To.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Lc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Sc(),s=Lc();return i.os.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=b(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=ul(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new ll(c.key,l,Ts(l.value.mapValue),tl.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Nc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ba[e.currentUser.toKey()];r||(r=new Bu(Io)),r=r.insert(t,n),e.ba[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Kv(i,a.changes);case 9:return e.next=11,Cp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=Yp(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Sv.apply(this,arguments)}function Tv(e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.prev=1,e.next=4,kd(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.wa.get(t);n&&(so(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Va=!0:e.modifiedDocuments.size>0?so(n.Va):e.removedDocuments.size>0&&(so(n.Va),n.Va=!1))})),e.next=8,Kv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ko(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Cv.apply(this,arguments)}function Nv(e,t,n){var r=co(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.fa.forEach((function(e,n){var r=n.view.K_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=co(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=b(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.K_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&uv(n)}(r.eventManager,t),i.length&&r.ma.u_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Av(e,t,n){return Rv.apply(this,arguments)}function Rv(){return Rv=s(o().mark((function e(t,n,r){var i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=co(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.wa.get(n),!(u=a&&a.key)){e.next=14;break}return s=(s=new Bu(Do.comparator)).insert(u,Cs.newNoDocument(u,Co.min())),c=Lc().add(u),l=new Rl(Co.min(),new Map,new Bu(Io),s,c),e.next=9,Tv(i,l);case 9:i.ya=i.ya.remove(u),i.wa.delete(n),Gv(i),e.next=16;break;case 14:return e.next=16,xd(i.localStore,n,!1).then((function(){return jv(i,n,r)})).catch(Ko);case 16:case"end":return e.stop()}}),e)}))),Rv.apply(this,arguments)}function Pv(e,t){return Dv.apply(this,arguments)}function Dv(){return Dv=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),i=n.batch.batchId,e.prev=1,e.next=4,yd(r.localStore,n);case 4:return a=e.sent,Vv(r,i,null),Uv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Kv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ko(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Dv.apply(this,arguments)}function Ov(e,t,n){return Lv.apply(this,arguments)}function Lv(){return Lv=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),e.prev=1,e.next=4,function(e,t){var n=co(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return so(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Vv(i,n,r),Uv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Kv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ko(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Lv.apply(this,arguments)}function Mv(e,t){return Fv.apply(this,arguments)}function Fv(){return Fv=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yp((r=co(t)).remoteStore)||ro("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=co(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Da.get(i)||[]).push(n),r.Da.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=Yp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(u);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Fv.apply(this,arguments)}function Uv(e,t){(e.Da.get(t)||[]).forEach((function(e){e.resolve()})),e.Da.delete(t)}function Vv(e,t,n){var r=co(e),i=r.ba[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ba[r.currentUser.toKey()]=i}}function jv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=b(e.ga.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.fa.delete(a),n&&e.ma.Ma(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ga.delete(t),e.isPrimaryClient&&e.Sa.Vr(t).forEach((function(t){e.Sa.containsKey(t)||Bv(e,t)}))}function Bv(e,t){e.pa.delete(t.path.canonicalString());var n=e.ya.get(t);null!==n&&(hp(e.remoteStore,n),e.ya=e.ya.remove(t),e.wa.delete(n),Gv(e))}function zv(e,t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof dv?(e.Sa.addReference(a.key,t),qv(e,a)):a instanceof pv?(ro("SyncEngine","Document no longer in limbo: "+a.key),e.Sa.removeReference(a.key,t),e.Sa.containsKey(a.key)||Bv(e,a.key)):uo()}}catch(o){i.e(o)}finally{i.f()}}function qv(e,t){var n=t.key,r=n.path.canonicalString();e.ya.get(n)||e.pa.has(r)||(ro("SyncEngine","New document in limbo: "+n),e.pa.add(r),Gv(e))}function Gv(e){for(;e.pa.size>0&&e.ya.size<e.maxConcurrentLimboResolutions;){var t=e.pa.values().next().value;e.pa.delete(t);var n=new Do(Ao.fromString(t)),r=e.Ca.next();e.wa.set(r,new yv(n)),e.ya=e.ya.insert(n,r),fp(e.remoteStore,new wf(dc(cc(n.path)),r,"TargetPurposeLimboResolution",au.ae))}}function Kv(e,t,n){return Hv.apply(this,arguments)}function Hv(){return Hv=s(o().mark((function e(t,n,r){var i,a,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=co(t),a=[],u=[],c=[],e.t0=i.fa.isEmpty(),e.t0){e.next=9;break}return i.fa.forEach((function(e,t){c.push(i.Fa(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=ld.Ki(t.targetId,e);u.push(n)}})))})),e.next=6,Promise.all(c);case 6:return i.ma.u_(a),e.next=9,function(){var e=s(o().mark((function e(t,n){var r,i,a,u,s,c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Wo.forEach(n,(function(t){return Wo.forEach(t.qi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Wo.forEach(t.Qi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Xo(e.t0)){e.next=10;break}throw e.t0;case 10:ro("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=b(n);try{for(i.s();!(a=i.n()).done;)u=a.value,s=u.targetId,u.fromCache||(c=r.ns.get(s),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),r.ns=r.ns.insert(s,f))}catch(o){i.e(o)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}}),e)}))),Hv.apply(this,arguments)}function Wv(e,t){return Qv.apply(this,arguments)}function Qv(){return(Qv=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=co(t)).currentUser.isEqual(n)){e.next=11;break}return ro("SyncEngine","User change. New user:",n.toKey()),e.next=5,vd(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Da.forEach((function(e){e.forEach((function(e){e.reject(new fo(lo.CANCELLED,t))}))})),e.Da.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Kv(r,i.us);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yv(e,t){var n=co(e),r=n.wa.get(t);if(r&&r.Va)return Lc().add(r.key);var i=Lc(),a=n.ga.get(t);if(!a)return i;var o,u=b(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.fa.get(s);i=i.unionWith(c.view.ca)}}catch(l){u.e(l)}finally{u.f()}return i}function Jv(e,t){return $v.apply(this,arguments)}function $v(){return $v=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.next=3,Ed(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Aa(i),e.abrupt("return",(r.isPrimaryClient&&zv(r,n.targetId,a.Ea),a));case 6:case"end":return e.stop()}}),e)}))),$v.apply(this,arguments)}function Xv(e,t){return Zv.apply(this,arguments)}function Zv(){return(Zv=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.abrupt("return",Td(r.localStore,n).then((function(e){return Kv(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function em(e,t,n,r){return tm.apply(this,arguments)}function tm(){return tm=s(o().mark((function e(t,n,r,i){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=co(t),e.next=3,function(e,t){var n=co(e),r=co(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.vn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Wo.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(u=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Cp(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Vv(a,n,i||null),Uv(a,n),function(e,t){co(co(e).mutationQueue).Mn(t)}(a.localStore,n)):uo();case 11:return e.next=13,Kv(a,u);case 13:e.next=16;break;case 15:ro("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),tm.apply(this,arguments)}function nm(e,t){return rm.apply(this,arguments)}function rm(){return(rm=s(o().mark((function e(t,n){var r,i,a,u,s,c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hm(r=co(t)),dm(r),!0!==n||!0===r.va){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,im(r,i.toArray());case 5:return a=e.sent,r.va=!0,e.next=9,Gp(r.remoteStore,!0);case 9:u=b(a);try{for(u.s();!(s=u.n()).done;)c=s.value,fp(r.remoteStore,c)}catch(o){u.e(o)}finally{u.f()}e.next=25;break;case 13:if(!1!==n||!1===r.va){e.next=25;break}return l=[],f=Promise.resolve(),r.ga.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then((function(){return jv(r,t),xd(r.localStore,t,!0)})),hp(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,im(r,l);case 21:return function(e){var t=co(e);t.wa.forEach((function(e,n){hp(t.remoteStore,n)})),t.Sa.mr(),t.wa=new Map,t.ya=new Bu(Do.comparator)}(r),r.va=!1,e.next=25,Gp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function im(e,t,n){return am.apply(this,arguments)}function am(){return am=s(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d,p,v,m,y,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=co(t),a=[],u=[],s=b(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(h=i.ga.get(l))||0===h.length){e.next=34;break}return e.next=11,_d(i.localStore,dc(h[0]));case 11:f=e.sent,d=b(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,m=i.fa.get(v),e.next=20,Jv(i,m);case 20:(y=e.sent).snapshot&&u.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Sd(i.localStore,l);case 36:return g=e.sent,e.next=39,_d(i.localStore,g);case 39:return f=e.sent,e.next=42,wv(i,om(g),l,!1,f.resumeToken);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.ma.u_(u),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),am.apply(this,arguments)}function om(e){return sc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function um(e){return function(e){return co(co(e).persistence).Li()}(co(e).localStore)}function sm(e,t,n,r){return cm.apply(this,arguments)}function cm(){return cm=s(o().mark((function e(t,n,r,i){var a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=co(t)).va){e.next=3;break}return e.abrupt("return",void ro("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((u=a.ga.get(n))&&u.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Td(a.localStore,wc(u[0]));case 10:return s=e.sent,c=Rl.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Yu.EMPTY_BYTE_STRING),e.next=14,Kv(a,s,c);case 14:return e.abrupt("break",20);case 15:return e.next=17,xd(a.localStore,n,!0);case 17:return jv(a,n,i),e.abrupt("break",20);case 19:uo();case 20:case"end":return e.stop()}}),e)}))),cm.apply(this,arguments)}function lm(e,t,n){return fm.apply(this,arguments)}function fm(){return fm=s(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=hm(t)).va){e.next=45;break}a=b(n),e.prev=3,a.s();case 5:if((u=a.n()).done){e.next=21;break}if(s=u.value,!i.ga.has(s)){e.next=10;break}return ro("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Sd(i.localStore,s);case 12:return c=e.sent,e.next=15,_d(i.localStore,c);case 15:return l=e.sent,e.next=18,wv(i,om(c),l.targetId,!1,l.resumeToken);case 18:fp(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=b(r),e.prev=30,d=o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ga.has(t),!e.t0){e.next=5;break}return e.next=5,xd(i.localStore,t,!1).then((function(){hp(i.remoteStore,t),jv(i,t)})).catch(Ko);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),fm.apply(this,arguments)}function hm(e){var t=co(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Tv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Av.bind(null,t),t.ma.u_=av.bind(null,t.eventManager),t.ma.Ma=ov.bind(null,t.eventManager),t}function dm(e){var t=co(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Pv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ov.bind(null,t),t}function pm(e,t,n){var r=co(e);(function(){var e=s(o().mark((function e(t,n,r){var i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=co(e),r=Ql(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.$r.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(hv(i)),a=new fv(i,t.localStore,n.serializer),e.next=15,n.xa();case 15:u=e.sent;case 16:if(!u){e.next=26;break}return e.next=19,a.ta(u);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.xa();case 23:u=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return c=e.sent,e.next=31,Kv(t,c.ia,void 0);case 31:return e.next=33,function(e,t){var n=co(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.$r.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(c.progress),e.abrupt("return",Promise.resolve(c.ra));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ao("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var vm=function(){function e(){S(this,e),this.synchronizeTabs=!1}return N(e,[{key:"initialize",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Zd(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return pd(this.persistence,new hd,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new ed(nd.Hr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new zd}},{key:"terminate",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),mm=function(e){w(n,e);var t=x(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).Oa=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return N(n,[{key:"initialize",value:function(){var e=s(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Oa.initialize(this,t);case 4:return e.next=6,dm(this.Oa.syncEngine);case 6:return e.next=8,Cp(this.Oa.remoteStore);case 8:return e.next=10,this.persistence.fi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return pd(this.persistence,new hd,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Ah(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new iu(t,this.persistence);return new ru(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=cd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vh.withCacheSize(this.cacheSizeBytes):vh.DEFAULT;return new od(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,$d(),Xd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new zd}}]),n}(vm),ym=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,r,!1)).Oa=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return N(n,[{key:"initialize",value:function(){var e=s(o().mark((function e(t){var r,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Oa.syncEngine,e.t0=this.sharedClientState instanceof Bd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Zs:em.bind(null,r),Xs:sm.bind(null,r),eo:lm.bind(null,r),Li:um.bind(null,r),Ys:Xv.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.fi(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nm(i.Oa.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=$d();if(!Bd.C(t))throw new fo(lo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=cd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(mm),gm=function(){function e(){S(this,e)}return N(e,[{key:"initialize",value:function(){var e=s(o().mark((function e(t,n){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Nv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Wv.bind(null,this.syncEngine),e.next=12,Gp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new ev}},{key:"createDatastore",value:function(e){var t=Zd(e.databaseInfo.databaseId),n=function(e){return new Jd(e)}(e.databaseInfo);return function(e,t,n,r){return new ip(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new op(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return Nv(t.syncEngine,e,0)}),Gd.C()?new Gd:new qd)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new gv(e,t,n,r,i,a);return o&&(u.va=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=co(t),ro("RemoteStore","RemoteStore shutting down."),n.v_.add(5),e.next=5,cp(n);case 5:n.M_.shutdown(),n.x_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function km(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return s(o().mark((function r(){var i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var bm=function(){function e(t){S(this,e),this.observer=t,this.muted=!1}return N(e,[{key:"next",value:function(e){this.observer.next&&this.Na(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Na(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString())}},{key:"Ba",value:function(){this.muted=!0}},{key:"Na",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),wm=function(){function e(t,n){var r=this;S(this,e),this.La=t,this.serializer=n,this.metadata=new ho,this.buffer=new Uint8Array,this.ka=new TextDecoder("utf-8"),this.qa().then((function(e){e&&e.X_()?r.metadata.resolve(e.Z_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Z_))))}),(function(e){return r.metadata.reject(e)}))}return N(e,[{key:"close",value:function(){return this.La.cancel()}},{key:"getMetadata",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xa",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.qa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"qa",value:function(){var e=s(o().mark((function e(){var t,n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Qa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ka.decode(t),r=Number(n),isNaN(r)&&this.Ka("length string (".concat(n,") is not valid number")),e.next=9,this.$a(r);case 9:return i=e.sent,e.abrupt("return",new cv(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ua",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Qa",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Ua()<0)){e.next=7;break}return e.next=3,this.Wa();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Ua())<0&&this.Ka("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$a",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Wa();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Ka("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ka.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ka",value:function(e){throw this.La.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Wa",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.La.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),_m=function(){function e(t){S(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return N(e,[{key:"lookup",value:function(){var e=s(o().mark((function e(t){var n,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new fo(lo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=s(o().mark((function e(t,n){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),i=tf(r.serializer)+"/documents",a={documents:n.map((function(e){return $l(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return u=e.sent,s=new Map,u.forEach((function(e){var t=of(r.serializer,e);s.set(t.key.toString(),t)})),c=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());so(!!t),c.push(t)})),c));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new ml(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=s(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Do.fromPath(t);n.mutations.push(new yl(r,n.precondition(r)))})),e.next=7,function(){var e=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),i=tf(r.serializer)+"/documents",a={writes:n.map((function(e){return uf(r.serializer,e)}))},e.next=3,r.So("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw uo();t=Co.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new fo(lo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Co.min())?tl.exists(!1):tl.updateTime(t):tl.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Co.min()))throw new fo(lo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tl.updateTime(t)}return tl.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),xm=function(){function e(t,n,r,i,a){S(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Ga=r.maxAttempts,this.jo=new ep(this.asyncQueue,"transaction_retry")}return N(e,[{key:"run",value:function(){this.Ga-=1,this.za()}},{key:"za",value:function(){var e=this;this.jo.qo(s(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new _m(e.datastore),(r=e.ja(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ha(t)}))}))})).catch((function(t){e.Ha(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ja",value:function(e){try{var t=this.updateFunction(e);return!ou(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ha",value:function(e){var t=this;this.Ga>0&&this.Ja(e)?(this.Ga-=1,this.asyncQueue.enqueueAndForget((function(){return t.za(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Ja",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!_l(t)}return!1}}]),e}(),Im=function(){function e(t,n,r,i){var a=this;S(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Za.UNAUTHENTICATED,this.clientId=xo.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ro("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ro("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return N(e,[{key:"getConfiguration",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new fo(lo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ho;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(s(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Yp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Em(e,t){return Sm.apply(this,arguments)}function Sm(){return Sm=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ro("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,vd(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Sm.apply(this,arguments)}function Tm(e,t){return Cm.apply(this,arguments)}function Cm(){return Cm=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Am(t);case 3:return r=e.sent,ro("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return zp(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return zp(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Cm.apply(this,arguments)}function Nm(e){return"FirebaseError"===e.name?e.code===lo.FAILED_PRECONDITION||e.code===lo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Am(e){return Rm.apply(this,arguments)}function Rm(){return(Rm=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return ro("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Em(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Nm(n=e.t0)){e.next=13;break}throw n;case 13:return ao("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Em(t,new vm);case 16:e.next=21;break;case 18:return ro("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Em(t,new vm);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function Pm(e){return Dm.apply(this,arguments)}function Dm(){return(Dm=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return ro("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Tm(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return ro("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Tm(t,new gm);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Om(e){return Am(e).then((function(e){return e.persistence}))}function Lm(e){return Am(e).then((function(e){return e.localStore}))}function Mm(e){return Pm(e).then((function(e){return e.remoteStore}))}function Fm(e){return Pm(e).then((function(e){return e.syncEngine}))}function Um(e){return Pm(e).then((function(e){return e.datastore}))}function Vm(e){return jm.apply(this,arguments)}function jm(){return(jm=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=kv.bind(null,n.syncEngine),r.onUnlisten=xv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ho;return e.asyncQueue.enqueueAndForget(s(o().mark((function i(){return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new bm({next:function(a){t.enqueueAndForget((function(){return rv(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new fo(lo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new fo(lo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new sv(cc(n.path),a,{includeMetadataChanges:!0,Y_:!0});return tv(e,o)},i.next=3,Vm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function zm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ho;return e.asyncQueue.enqueueAndForget(s(o().mark((function i(){return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new bm({next:function(n){t.enqueueAndForget((function(){return rv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new fo(lo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new sv(n,a,{includeMetadataChanges:!0,Y_:!0});return tv(e,o)},i.next=3,Vm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function qm(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var Gm=new Map;function Km(e,t,n){if(!n)throw new fo(lo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Hm(e,t,n,r){if(!0===t&&!0===r)throw new fo(lo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Wm(e){if(!Do.isDocumentKey(e))throw new fo(lo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Qm(e){if(Do.isDocumentKey(e))throw new fo(lo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ym(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":uo()}function Jm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fo(lo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ym(e);throw new fo(lo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function $m(e,t){if(t<=0)throw new fo(lo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Xm=function(){function e(t){var n,r;if(S(this,e),void 0===t.host){if(void 0!==t.ssl)throw new fo(lo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fo(lo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Hm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qm(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new fo(lo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new fo(lo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new fo(lo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return N(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Zm=function(){function e(t,n,r,i){S(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xm({}),this._settingsFrozen=!1}return N(e,[{key:"app",get:function(){if(!this._app)throw new fo(lo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new fo(lo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new vo;switch(e.type){case"firstParty":return new ko(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new fo(lo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Gm.get(e);t&&(ro("ComponentProvider","Removing Datastore"),Gm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function ey(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Jm(e,Zm))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=Za.MOCK_USER;else{u=z(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new fo(lo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Za(c)}e._authCredentials=new mo(new po(u,s))}}var ty=function(){function e(t,n,r){S(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return N(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ny=function(){function e(t,n,r){S(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return N(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ry(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),ry=function(e){w(n,e);var t=x(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,e,r,cc(i)))._path=i,a.type="collection",a}return N(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ny(this.firestore,null,new Do(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(ty);function iy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=se(e),Km("collection","path",t),e instanceof Zm){var a=Ao.fromString.apply(Ao,[t].concat(r));return Qm(a),new ry(e,null,a)}if(!(e instanceof ny||e instanceof ry))throw new fo(lo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ao.fromString.apply(Ao,[t].concat(r)));return Qm(o),new ry(e.firestore,null,o)}function ay(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=se(e),1===arguments.length&&(t=xo.V()),Km("doc","path",t),e instanceof Zm){var a=Ao.fromString.apply(Ao,[t].concat(r));return Wm(a),new ny(e,null,new Do(a))}if(!(e instanceof ny||e instanceof ry))throw new fo(lo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ao.fromString.apply(Ao,[t].concat(r)));return Wm(o),new ny(e.firestore,e instanceof ry?e.converter:null,new Do(o))}function oy(e,t){return e=se(e),t=se(t),(e instanceof ny||e instanceof ry)&&(t instanceof ny||t instanceof ry)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function uy(e,t){return e=se(e),t=se(t),e instanceof ty&&t instanceof ty&&e.firestore===t.firestore&&yc(e._query,t._query)&&e.converter===t.converter}var sy=function(){function e(){var t=this;S(this,e),this.Ya=Promise.resolve(),this.Za=[],this.Xa=!1,this.eu=[],this.tu=null,this.nu=!1,this.ru=!1,this.iu=[],this.jo=new ep(this,"async_queue_retry"),this.su=function(){var e=Xd();e&&ro("AsyncQueue","Visibility state changed to "+e.visibilityState),t.jo.Ko()};var n=Xd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.su)}return N(e,[{key:"isShuttingDown",get:function(){return this.Xa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ou(),this._u(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Xa){this.Xa=!0,this.ru=e||!1;var t=Xd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.su)}}},{key:"enqueue",value:function(e){var t=this;if(this.ou(),this.Xa)return new Promise((function(){}));var n=new ho;return this._u((function(){return t.Xa&&t.ru?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Za.push(e),t.au()}))}},{key:"au",value:function(){var e=s(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Za.length){e.next=14;break}return e.prev=1,e.next=4,this.Za[0]();case 4:this.Za.shift(),this.jo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Xo(e.t0)){e.next=12;break}throw e.t0;case 12:ro("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Za.length>0&&this.jo.qo((function(){return t.au()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"_u",value:function(e){var t=this,n=this.Ya.then((function(){return t.nu=!0,e().catch((function(e){t.tu=e,t.nu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw io("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.nu=!1,e}))}));return this.Ya=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ou(),this.iu.indexOf(e)>-1&&(t=0);var i=Qp.createAndSchedule(this,e,t,n,(function(e){return r.uu(e)}));return this.eu.push(i),i}},{key:"ou",value:function(){this.tu&&uo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"cu",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Ya,e.next=3,t;case 3:if(t!==this.Ya){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"lu",value:function(e){var t,n=b(this.eu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"hu",value:function(e){var t=this;return this.cu().then((function(){t.eu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=b(t.eu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.cu()}))}},{key:"Pu",value:function(e){this.iu.push(e)}},{key:"uu",value:function(e){var t=this.eu.indexOf(e);this.eu.splice(t,1)}}]),e}();function cy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=b(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var ly=function(){function e(){S(this,e),this._progressObserver={},this._taskCompletionResolver=new ho,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return N(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),fy=function(e){w(n,e);var t=x(n);function n(e,r,i,a){var o;return S(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new sy,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return N(n,[{key:"_terminate",value:function(){return this._firestoreClient||dy(this),this._firestoreClient.terminate()}}]),n}(Zm);function hy(e){return e._firestoreClient||dy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function dy(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new rs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,qm(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Im(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function py(e,t,n){var r=new ho;return e.asyncQueue.enqueue(s(o().mark((function i(){var a;return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Em(e,n);case 3:return i.next=5,Tm(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),Nm(a=i.t0)){i.next=13;break}throw a;case 13:ao("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function vy(e){return function(e){var t=new ho;return e.asyncQueue.enqueueAndForget(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Mv,n.next=3,Fm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(hy(e=Jm(e,fy)))}function my(e){return function(e){return e.asyncQueue.enqueue(s(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Om(e);case 2:return n=t.sent,t.next=5,Mm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=co(e);return t.v_.delete(0),up(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(hy(e=Jm(e,fy)))}function yy(e){return function(e){return e.asyncQueue.enqueue(s(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Om(e);case 2:return n=t.sent,t.next=5,Mm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=co(t)).v_.add(0),e.next=4,cp(n);case 4:n.x_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(hy(e=Jm(e,fy)))}function gy(e,t){var n=hy(e=Jm(e,fy)),r=new ly;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new wm(e,t)}(function(e,t){if(e instanceof Uint8Array)return km(e,t);if(e instanceof ArrayBuffer)return km(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?El().encode(e):e),t)}(n,Zd(t));e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=pm,t.next=3,Fm(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function ky(e,t){return function(e,t){return e.asyncQueue.enqueue(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=co(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.$r.getNamedQuery(e,t)}))},n.next=3,Lm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(hy(e=Jm(e,fy)),t).then((function(t){return t?new ty(e,null,t.query):null}))}function by(e){if(e._initialized||e._terminated)throw new fo(lo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var wy=function(){function e(t){S(this,e),this._byteString=t}return N(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Yu.fromBase64String(t))}catch(t){throw new fo(lo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Yu.fromUint8Array(t))}}]),e}(),_y=function(){function e(){S(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new fo(lo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Po(n)}return N(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var xy=N((function e(t){S(this,e),this._methodName=t})),Iy=function(){function e(t,n){if(S(this,e),!isFinite(t)||t<-90||t>90)throw new fo(lo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new fo(lo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return N(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Io(this._lat,e._lat)||Io(this._long,e._long)}}]),e}(),Ey=/^__.*__$/,Sy=function(){function e(t,n,r){S(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return N(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ll(e,this.data,this.fieldMask,t,this.fieldTransforms):new cl(e,this.data,t,this.fieldTransforms)}}]),e}(),Ty=function(){function e(t,n,r){S(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return N(e,[{key:"toMutation",value:function(e,t){return new ll(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Cy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw uo()}}var Ny=function(){function e(t,n,r,i,a,o){S(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Iu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return N(e,[{key:"path",get:function(){return this.settings.path}},{key:"Tu",get:function(){return this.settings.Tu}},{key:"Eu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"du",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Au:!1});return r.Ru(e),r}},{key:"Vu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Au:!1});return r.Iu(),r}},{key:"mu",value:function(e){return this.Eu({path:void 0,Au:!0})}},{key:"fu",value:function(e){return Yy(e,this.settings.methodName,this.settings.gu||!1,this.path,this.settings.pu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Iu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Ru(this.path.get(e))}},{key:"Ru",value:function(e){if(0===e.length)throw this.fu("Document fields must not be empty");if(Cy(this.Tu)&&Ey.test(e))throw this.fu('Document fields cannot begin and end with "__"')}}]),e}(),Ay=function(){function e(t,n,r){S(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Zd(t)}return N(e,[{key:"yu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ny({Tu:e,methodName:t,pu:n,path:Po.emptyPath(),Au:!1,gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Ry(e){var t=e._freezeSettings(),n=Zd(e._databaseId);return new Ay(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Py(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.yu(a.merge||a.mergeFields?2:0,t,n,i);Ky("Data must be an object, but it was:",o,r);var u,s,c=qy(r,o);if(a.merge)u=new Wu(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=b(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Hy(t,l.value,n);if(!o.contains(d))throw new fo(lo.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Jy(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Wu(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Sy(new Ss(c),u,s)}var Dy=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Tu)throw 1===e.Tu?e.fu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.fu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(xy);function Oy(e,t,n){return new Ny({Tu:3,pu:t.settings.pu,methodName:e._methodName,Au:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Ly=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"_toFieldTransform",value:function(e){return new Zc(e.path,new Kc)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(xy),My=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e)).wu=r,i}return N(n,[{key:"_toFieldTransform",value:function(e){var t=Oy(this,e,!0),n=this.wu.map((function(e){return zy(e,t)})),r=new Hc(n);return new Zc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(xy),Fy=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e)).wu=r,i}return N(n,[{key:"_toFieldTransform",value:function(e){var t=Oy(this,e,!0),n=this.wu.map((function(e){return zy(e,t)})),r=new Qc(n);return new Zc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(xy),Uy=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e)).Su=r,i}return N(n,[{key:"_toFieldTransform",value:function(e){var t=new Jc(e.serializer,jc(e.serializer,this.Su));return new Zc(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(xy);function Vy(e,t,n,r){var i=e.yu(1,t,n);Ky("Data must be an object, but it was:",i,r);var a=[],o=Ss.empty();Vu(r,(function(e,r){var u=Qy(t,e,n);r=se(r);var s=i.Vu(u);if(r instanceof Dy)a.push(u);else{var c=zy(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Wu(a);return new Ty(o,u,i.fieldTransforms)}function jy(e,t,n,r,i,a){var o=e.yu(1,t,n),u=[Hy(t,r,n)],s=[i];if(a.length%2!=0)throw new fo(lo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Hy(t,a[c])),s.push(a[c+1]);for(var l=[],f=Ss.empty(),h=u.length-1;h>=0;--h)if(!Jy(l,u[h])){var d=u[h],p=s[h];p=se(p);var v=o.Vu(d);if(p instanceof Dy)l.push(d);else{var m=zy(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Wu(l);return new Ty(f,y,o.fieldTransforms)}function By(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return zy(n,e.yu(r?4:3,t))}function zy(e,t){if(Gy(e=se(e)))return Ky("Unsupported field value:",t,e),qy(e,t);if(e instanceof xy)return function(e,t){if(!Cy(t.Tu))throw t.fu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.fu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Au&&4!==t.Tu)throw t.fu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=b(e);try{for(a.s();!(n=a.n()).done;){var o=zy(n.value,t.mu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=se(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return jc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=To.fromDate(e);return{timestampValue:Kl(t.serializer,n)}}if(e instanceof To){var r=new To(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Kl(t.serializer,r)}}if(e instanceof Iy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof wy)return{bytesValue:Hl(t.serializer,e._byteString)};if(e instanceof ny){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.fu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Yl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.fu("Unsupported field value: ".concat(Ym(e)))}(e,t)}function qy(e,t){var n={};return ju(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vu(e,(function(e,r){var i=zy(r,t.du(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Gy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof To||e instanceof Iy||e instanceof wy||e instanceof ny||e instanceof xy)}function Ky(e,t,n){if(!Gy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Ym(n);throw"an object"===r?t.fu(e+" a custom object"):t.fu(e+" "+r)}}function Hy(e,t,n){if((t=se(t))instanceof _y)return t._internalPath;if("string"==typeof t)return Qy(e,t);throw Yy("Field path arguments must be of type string or ",e,!1,void 0,n)}var Wy=new RegExp("[~\\*/\\[\\]]");function Qy(e,t,n){if(t.search(Wy)>=0)throw Yy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return m(_y,E(t.split(".")))._internalPath}catch(qt){throw Yy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Yy(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new fo(lo.INVALID_ARGUMENT,u+e+s)}function Jy(e,t){return e.some((function(e){return e.isEqual(t)}))}var $y=function(){function e(t,n,r,i,a){S(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return N(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ny(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Xy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Zy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Xy=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(){return g(y(n.prototype),"data",this).call(this)}}]),n}($y);function Zy(e,t){return"string"==typeof t?Qy(e,t):t instanceof _y?t._internalPath:t._delegate._internalPath}function eg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fo(lo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tg=N((function e(){S(this,e)})),ng=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n)}(tg);function rg(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof tg&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof ag})).length,n=e.filter((function(e){return e instanceof ig})).length;if(t>1||t>0&&n>0)throw new fo(lo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=b(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var ig=function(e){w(n,e);var t=x(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return N(n,[{key:"_apply",value:function(e){var t=this._parse(e);return yg(e._query,t),new ty(e.firestore,e.converter,vc(e._query,t))}},{key:"_parse",value:function(e){var t=Ry(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new fo(lo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){mg(o,a);var s,c=[],l=b(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(vg(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=vg(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||mg(o,a),u=By(n,t,o,"in"===a||"not-in"===a);return Ls.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ng);var ag=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return N(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Ms.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=b(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;yg(r,a),r=vc(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new ty(e.firestore,e.converter,vc(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(tg);var og=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return N(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new fo(lo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new fo(lo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ps(t,n)}(e._query,this._field,this._direction);return new ty(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new uc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ng);var ug=function(e){w(n,e);var t=x(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return N(n,[{key:"_apply",value:function(e){return new ty(e.firestore,e.converter,mc(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ng);var sg=function(e){w(n,e);var t=x(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return N(n,[{key:"_apply",value:function(e){var t=pg(e,this.type,this._docOrFields,this._inclusive);return new ty(e.firestore,e.converter,function(e,t){return new uc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ng);function cg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sg._create("startAt",t,!0)}function lg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sg._create("startAfter",t,!1)}var fg=function(e){w(n,e);var t=x(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return N(n,[{key:"_apply",value:function(e){var t=pg(e,this.type,this._docOrFields,this._inclusive);return new ty(e.firestore,e.converter,function(e,t){return new uc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ng);function hg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fg._create("endBefore",t,!1)}function dg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fg._create("endAt",t,!0)}function pg(e,t,n,r){if(n[0]=se(n[0]),n[0]instanceof $y)return function(e,t,n,r,i){if(!r)throw new fo(lo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=b(hc(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ps(t,r.key));else{var c=r.data.field(s.field);if(es(c))throw new fo(lo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new fo(lo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Ns(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Ry(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new fo(lo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new fo(lo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!fc(e)&&-1!==c.indexOf("/"))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ao.fromString(c));if(!Do.isDocumentKey(l))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Do(l);u.push(ps(t,f))}else{var h=By(n,r,c);u.push(h)}}return new Ns(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function vg(e,t,n){if("string"==typeof(n=se(n))){if(""===n)throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fc(t)&&-1!==n.indexOf("/"))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ao.fromString(n));if(!Do.isDocumentKey(r))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ps(e,new Do(r))}if(n instanceof ny)return ps(e,n._key);throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ym(n),"."))}function mg(e,t){if(!Array.isArray(e)||0===e.length)throw new fo(lo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function yg(e,t){var n=function(e,t){var n,r=b(e);try{for(r.s();!(n=r.n()).done;){var i,a=b(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new fo(lo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new fo(lo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}var gg=function(){function e(){S(this,e)}return N(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw uo()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Vu(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new Iy(Xu(e.latitude),Xu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ts(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ns(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=$u(e);return new To(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ao.fromString(e);so(bf(n));var r=new is(n.get(1),n.get(3)),i=new Do(n.popFirst(5));return r.isEqual(t)||io("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function kg(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var bg=function(e){w(n,e);var t=x(n);function n(e){var r;return S(this,n),(r=t.call(this)).firestore=e,r}return N(n,[{key:"convertBytes",value:function(e){return new wy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ny(this.firestore,null,t)}}]),n}(gg);var wg=function(){function e(t,n){S(this,e),this.hasPendingWrites=t,this.fromCache=n}return N(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),_g=function(e){w(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return S(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return N(n,[{key:"exists",value:function(){return g(y(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new xg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Zy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}($y),xg=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g(y(n.prototype),"data",this).call(this,e)}}]),n}(_g),Ig=function(){function e(t,n,r,i){S(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new wg(i.hasPendingWrites,i.fromCache),this.query=r}return N(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new xg(n._firestore,n._userDataWriter,r.key,r,new wg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new fo(lo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new xg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new xg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Eg(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Eg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return uo()}}function Sg(e,t){return e instanceof _g&&t instanceof _g?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ig&&t instanceof Ig&&e._firestore===t._firestore&&uy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Tg=function(e){w(n,e);var t=x(n);function n(e){var r;return S(this,n),(r=t.call(this)).firestore=e,r}return N(n,[{key:"convertBytes",value:function(e){return new wy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ny(this.firestore,null,t)}}]),n}(gg);function Cg(e){e=Jm(e,ny);var t=Jm(e.firestore,fy),n=hy(t),r=new Tg(t);return function(e,t){var n=new ho;return e.asyncQueue.enqueueAndForget(s(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=co(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new fo(lo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Yp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Lm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new _g(t,r,e._key,n,new wg(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Ng(e){e=Jm(e,ty);var t=Jm(e.firestore,fy),n=hy(t),r=new Tg(t);return eg(e._query),zm(n,e._query).then((function(n){return new Ig(t,r,e,n)}))}function Ag(e){e=Jm(e,ty);var t=Jm(e.firestore,fy),n=hy(t),r=new Tg(t);return function(e,t){var n=new ho;return e.asyncQueue.enqueueAndForget(s(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=s(o().mark((function e(t,n,r){var i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ed(t,n,!0);case 3:i=e.sent,a=new vv(n,i.hs),u=a.la(i.documents),s=a.applyChanges(u,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=Yp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Lm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Ig(t,r,e,n)}))}function Rg(e){e=Jm(e,ty);var t=Jm(e.firestore,fy),n=hy(t),r=new Tg(t);return zm(n,e._query,{source:"server"}).then((function(n){return new Ig(t,r,e,n)}))}function Pg(e,t,n){e=Jm(e,ny);var r=Jm(e.firestore,fy),i=kg(e.converter,t,n);return Mg(r,[Py(Ry(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,tl.none())])}function Dg(e,t,n){e=Jm(e,ny);for(var r=Jm(e.firestore,fy),i=Ry(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Mg(r,[("string"==typeof(t=se(t))||t instanceof _y?jy(i,"updateDoc",e._key,t,n,o):Vy(i,"updateDoc",e._key,t)).toMutation(e._key,tl.exists(!0))])}function Og(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,u;e=se(e);var c={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||cy(n[l])||(c=n[l],l++);var f,h,d,p={includeMetadataChanges:c.includeMetadataChanges};if(cy(n[l])){var v=n[l];n[l]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[l+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[l+2]=null===(u=v.complete)||void 0===u?void 0:u.bind(v)}if(e instanceof ny)h=Jm(e.firestore,fy),d=cc(e._key.path),f={next:function(t){n[l]&&n[l](Fg(h,e,t))},error:n[l+1],complete:n[l+2]};else{var m=Jm(e,ty);h=Jm(m.firestore,fy),d=m._query;var y=new Tg(h);f={next:function(e){n[l]&&n[l](new Ig(h,y,m,e))},error:n[l+1],complete:n[l+2]},eg(e._query)}return function(e,t,n,r){var i=new bm(r),a=new sv(t,i,n);return e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=tv,t.next=3,Vm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ba(),e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=rv,t.next=3,Vm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(hy(h),d,p,f)}function Lg(e,t){return function(e,t){var n=new bm(t);return e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){co(e).Q_.add(t),t.next()},t.next=3,Vm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ba(),e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){co(e).Q_.delete(t)},t.next=3,Vm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(hy(e=Jm(e,fy)),cy(t)?t:{next:t})}function Mg(e,t){return function(e,t){var n=new ho;return e.asyncQueue.enqueueAndForget(s(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Ev,r.next=3,Fm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(hy(e),t)}function Fg(e,t,n){var r=n.docs.get(t._key),i=new Tg(e);return new _g(e,i,t._key,r,new wg(n.hasPendingWrites,n.fromCache),t.converter)}var Ug={maxAttempts:5},Vg=function(){function e(t,n){S(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ry(t)}return N(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=jg(e,this._firestore),i=kg(r.converter,t,n),a=Py(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,tl.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=jg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=se(t))||t instanceof _y?jy(this._dataReader,"WriteBatch.update",i._key,t,n,o):Vy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,tl.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=jg(e,this._firestore);return this._mutations=this._mutations.concat(new ml(t._key,tl.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new fo(lo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function jg(e,t){if((e=se(e)).firestore!==t)throw new fo(lo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Bg=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,r))._firestore=e,i}return N(n,[{key:"get",value:function(e){var t=this,r=jg(e,this._firestore),i=new Tg(this._firestore);return g(y(n.prototype),"get",this).call(this,e).then((function(e){return new _g(t._firestore,i,r._key,e._document,new wg(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){S(this,e),this._firestore=t,this._transaction=n,this._dataReader=Ry(t)}return N(e,[{key:"get",value:function(e){var t=this,n=jg(e,this._firestore),r=new bg(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return uo();var i=e[0];if(i.isFoundDocument())return new $y(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new $y(t._firestore,r,n._key,null,n.converter);throw uo()}))}},{key:"set",value:function(e,t,n){var r=jg(e,this._firestore),i=kg(r.converter,t,n),a=Py(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=jg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=se(t))||t instanceof _y?jy(this._dataReader,"Transaction.update",i._key,t,n,o):Vy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=jg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function zg(e,t,n){e=Jm(e,fy);var r=Object.assign(Object.assign({},Ug),n);return function(e){if(e.maxAttempts<1)throw new fo(lo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new ho;return e.asyncQueue.enqueueAndForget(s(o().mark((function i(){var a;return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Um(e);case 2:a=i.sent,new xm(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(hy(e),(function(n){return t(new Bg(e,n))}),r)}function qg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new My("arrayUnion",t)}function Gg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Fy("arrayRemove",t)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){eo=e}(at),Xe(new ce("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new fy(new yo(e.getProvider("auth-internal")),new wo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fo(lo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new is(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ft(Xa,"4.3.0",e),ft(Xa,"4.3.0","esm2017")}();var Kg,Hg=function(){return Hg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Hg.apply(this,arguments)},Wg=function(e){return{loading:void 0===e||null===e,value:e}},Qg=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return Hg(Hg({},e),{error:t.error,loading:!1,value:void 0});case"reset":return Wg(t.defaultValue);case"value":return Hg(Hg({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),Wg(n)),i=r[0],a=r[1],o=(0,t.useCallback)((function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})}),[e]),u=(0,t.useCallback)((function(e){a({type:"error",error:e})}),[]),s=(0,t.useCallback)((function(e){a({type:"value",value:e})}),[]);return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},Yg=function(e,n,r){var i=(0,t.useRef)(e);return(0,t.useEffect)((function(){n(e,i.current)||(i.current=e,r&&r())})),i},Jg=function(e,t){var n=!e&&!t,r=!!e&&!!t&&uy(e,t);return n||r},$g=function(e,t){return Yg(e,Jg,t)},Xg=function(e,n){var r=function(e,n){var r=Qg(),i=r.error,a=r.loading,o=r.reset,u=r.setError,s=r.setValue,c=r.value,l=$g(e,o);return(0,t.useEffect)((function(){if(l.current){var e=(null===n||void 0===n?void 0:n.snapshotListenOptions)?Og(l.current,n.snapshotListenOptions,s,u):Og(l.current,s,u);return function(){e()}}s(void 0)}),[l.current]),[c,a,i]}(e,n),i=r[0],a=r[1],o=r[2];return[Zg(i,null===n||void 0===n?void 0:n.snapshotOptions,null===n||void 0===n?void 0:n.initialValue),a,o,i]},Zg=function(e,n,r){return(0,t.useMemo)((function(){var t;return null!==(t=null===e||void 0===e?void 0:e.docs.map((function(e){return e.data(n)})))&&void 0!==t?t:r}),[e,n])},ek=function(){function e(t,n){var r=this;S(this,e),this._delegate=t,this.firebase=n,Je(t,new ce("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return N(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ct(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Je(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){$e(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),tk=(A(Kg={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),A(Kg,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Kg),nk=new J("app-compat","Firebase",tk);var rk=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ot(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(X(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ft,setLogLevel:dt,onLog:ht,apps:null,SDK_VERSION:at,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Xe(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw nk.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&M(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!X(n,e=e||He))throw nk.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ek);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){M(n,e)},createSubscribe:ae,ErrorFactory:J,deepExtend:M}),n}(),ik=new be("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ik.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ak=self.firebase.SDK_VERSION;ak&&ak.indexOf("LITE")>=0&&ik.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ok=rk;!function(e){ft("@firebase/app-compat","0.2.20",e)}();ok.registerVersion("firebase","10.5.0","app-compat");function uk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new fo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function sk(){if("undefined"===typeof Uint8Array)throw new fo("unimplemented","Uint8Arrays are not available in this environment.")}function ck(){if("undefined"==typeof atob)throw new fo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var lk=function(){function e(t){S(this,e),this._delegate=t}return N(e,[{key:"toBase64",value:function(){return ck(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return sk(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return ck(),new e(wy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return sk(),new e(wy.fromUint8Array(t))}}]),e}();function fk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=b(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var hk=function(){function e(){S(this,e)}return N(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){by(e=Jm(e,fy));var n=hy(e);if(n._uninitializedComponentsProvider)throw new fo(lo.FAILED_PRECONDITION,"SDK cache is already specified.");ao("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new gm;return py(n,i,new mm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){by(e=Jm(e,fy));var t=hy(e);if(t._uninitializedComponentsProvider)throw new fo(lo.FAILED_PRECONDITION,"SDK cache is already specified.");ao("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new gm;return py(t,r,new ym(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new fo(lo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ho;return e._queue.enqueueAndForgetEvenWhileRestricted(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yo.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Yo.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(cd(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),dk=function(){function e(t,n,r){var i=this;S(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof is||(this._appCompat=t)}return N(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ao("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ey(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return my(this._delegate)}},{key:"disableNetwork",value:function(){return yy(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Hm("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return vy(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Lg(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new fo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Tk(this,iy(this._delegate,e))}catch(t){throw kk(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new gk(this,ay(this._delegate,e))}catch(t){throw kk(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Ik(this,function(e,t){if(e=Jm(e,Zm),Km("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new fo(lo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ty(e,null,function(e){return new uc(Ao.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw kk(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return zg(this._delegate,(function(n){return e(new vk(t,n))}))}},{key:"batch",value:function(){var e=this;return hy(this._delegate),new mk(new Vg(this._delegate,(function(t){return Mg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return gy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return ky(this._delegate,e).then((function(e){return e?new Ik(t,e):null}))}}]),e}(),pk=function(e){w(n,e);var t=x(n);function n(e){var r;return S(this,n),(r=t.call(this)).firestore=e,r}return N(n,[{key:"convertBytes",value:function(e){return new lk(new wy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return gk.forKey(t,this.firestore,null)}}]),n}(gg);var vk=function(){function e(t,n){S(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new pk(t)}return N(e,[{key:"get",value:function(e){var t=this,n=Ck(e);return this._delegate.get(n).then((function(e){return new _k(t._firestore,new _g(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Ck(e);return n?(uk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Ck(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ck(e);return this._delegate.delete(t),this}}]),e}(),mk=function(){function e(t){S(this,e),this._delegate=t}return N(e,[{key:"set",value:function(e,t,n){var r=Ck(e);return n?(uk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Ck(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ck(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),yk=function(){function e(t,n,r){S(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return N(e,[{key:"fromFirestore",value:function(e,t){var n=new xg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xk(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new pk(t),n),i.set(n,a)),a}}]),e}();yk.INSTANCES=new WeakMap;var gk=function(){function e(t,n){S(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new pk(t)}return N(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Tk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Tk(this.firestore,iy(this._delegate,e))}catch(t){throw kk(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=se(e))instanceof ny&&oy(this._delegate,e)}},{key:"set",value:function(e,t){t=uk("DocumentReference.set",t);try{return t?Pg(this._delegate,e,t):Pg(this._delegate,e)}catch(n){throw kk(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Dg(this._delegate,e):Dg.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw kk(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Mg(Jm((e=this._delegate).firestore,fy),[new ml(e._key,tl.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=bk(n),a=wk(n,(function(t){return new _k(e.firestore,new _g(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Og(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Cg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Jm(e,ny);var t=Jm(e.firestore,fy);return Bm(hy(t),e._key,{source:"server"}).then((function(n){return Fg(t,e,n)}))}(this._delegate):function(e){e=Jm(e,ny);var t=Jm(e.firestore,fy);return Bm(hy(t),e._key).then((function(n){return Fg(t,e,n)}))}(this._delegate)).then((function(e){return new _k(t.firestore,new _g(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(yk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new fo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new ny(n._delegate,r,new Do(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new ny(n._delegate,r,t))}}]),e}();function kk(e,t,n){return e.message=e.message.replace(t,n),e}function bk(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!fk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function wk(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=fk(e[0])?e[0]:fk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var _k=function(){function e(t,n){S(this,e),this._firestore=t,this._delegate=n}return N(e,[{key:"ref",get:function(){return new gk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Sg(this._delegate,e._delegate)}}]),e}(),xk=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||uo(),t}}]),n}(_k),Ik=function(){function e(t,n){S(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new pk(t)}return N(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,rg(this._delegate,function(e,t,n){var r=t,i=Zy("where",e);return ig._create(i,r,n)}(t,n,r)))}catch(i){throw kk(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,rg(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Zy("orderBy",e);return og._create(n,t)}(t,n)))}catch(r){throw kk(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,rg(this._delegate,($m("limit",n=t),ug._create("limit",n,"F"))))}catch(n){throw kk(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,rg(this._delegate,($m("limitToLast",n=t),ug._create("limitToLast",n,"L"))))}catch(n){throw kk(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,rg(this._delegate,cg.apply(void 0,arguments)))}catch(t){throw kk(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,rg(this._delegate,lg.apply(void 0,arguments)))}catch(t){throw kk(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,rg(this._delegate,hg.apply(void 0,arguments)))}catch(t){throw kk(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,rg(this._delegate,dg.apply(void 0,arguments)))}catch(t){throw kk(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return uy(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Ag(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?Rg(this._delegate):Ng(this._delegate)).then((function(e){return new Sk(t.firestore,new Ig(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=bk(n),a=wk(n,(function(t){return new Sk(e.firestore,new Ig(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Og(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(yk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Ek=function(){function e(t,n){S(this,e),this._firestore=t,this._delegate=n}return N(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new xk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Sk=function(){function e(t,n){S(this,e),this._firestore=t,this._delegate=n}return N(e,[{key:"query",get:function(){return new Ik(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new xk(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Ek(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new xk(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Sg(this._delegate,e._delegate)}}]),e}(),Tk=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return N(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new gk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new gk(this.firestore,void 0===e?ay(this._delegate):ay(this._delegate,e))}catch(t){throw kk(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Jm(e.firestore,fy),r=ay(e),i=kg(e.converter,t);return Mg(n,[Py(Ry(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,tl.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new gk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return oy(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(yk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Ik);function Ck(e){return Jm(e,ny)}var Nk,Ak=function(){function e(){S(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=m(_y,n)}return N(e,[{key:"isEqual",value:function(e){return(e=se(e))instanceof _y&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Po.keyField().canonicalString())}}]),e}(),Rk=function(){function e(t){S(this,e),this._delegate=t}return N(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Ly("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Dy("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=qg.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Gg.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new Uy("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Pk={Firestore:dk,GeoPoint:Iy,Timestamp:To,Blob:lk,Transaction:vk,WriteBatch:mk,DocumentReference:gk,DocumentSnapshot:_k,Query:Ik,QueryDocumentSnapshot:xk,QuerySnapshot:Sk,CollectionReference:Tk,FieldPath:Ak,FieldValue:Rk,setLogLevel:function(e){var t;t=e,to.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ce("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Pk)))})(Nk=ok,(function(e,t){return new dk(e,t,new hk)})),Nk.registerVersion("@firebase/firestore-compat","0.3.19");var Dk,Ok="firebasestorage.googleapis.com",Lk="storageBucket",Mk=function(e){w(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return S(this,n),(i=t.call(this,Fk(e),"Firebase Storage: ".concat(r," (").concat(Fk(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(_(i),n.prototype),i}return N(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return Fk(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Y);function Fk(e){return"storage/"+e}function Uk(){return new Mk(Dk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Vk(){return new Mk(Dk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jk(){return new Mk(Dk.CANCELED,"User canceled the upload/download.")}function Bk(){return new Mk(Dk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zk(e){return new Mk(Dk.INVALID_ARGUMENT,e)}function qk(){return new Mk(Dk.APP_DELETED,"The Firebase app was deleted.")}function Gk(e,t){return new Mk(Dk.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Kk(e){throw new Mk(Dk.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Dk||(Dk={}));var Hk,Wk=function(){function e(t,n){S(this,e),this.bucket=t,this.path_=n}return N(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new Mk(Dk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Ok?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Mk(Dk.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Qk=function(){function e(t){S(this,e),this.promise_=Promise.reject(t)}return N(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Yk(e){return"string"===typeof e||e instanceof String}function Jk(e){return $k()&&e instanceof Blob}function $k(){return"undefined"!==typeof Blob&&!G()}function Xk(e,t,n,r){if(r<t)throw zk("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw zk("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Zk(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function eb(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function tb(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Hk||(Hk={}));var nb=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];S(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return N(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=Uk();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?qk():jk());else i(Vk())}};this.canceled_?t(0,new rb(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new rb(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Hk.NO_ERROR,a=r.getStatus();if(!n||tb(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===Hk.ABORT;t(!1,new rb(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new rb(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),rb=N((function e(t,n,r){S(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function ib(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ab(){for(var e=ib(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if($k())return new Blob(n);throw new Mk(Dk.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function ob(e){if("undefined"===typeof atob)throw t="base-64",new Mk(Dk.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var ub={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},sb=N((function e(t,n){S(this,e),this.data=t,this.contentType=n||null}));function cb(e,t){switch(e){case ub.RAW:return new sb(lb(t));case ub.BASE64:case ub.BASE64URL:return new sb(fb(e,t));case ub.DATA_URL:return new sb(function(e){var t=new hb(e);return t.base64?fb(ub.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Gk(ub.DATA_URL,"Malformed data URL.")}return lb(t)}(t.rest)}(t),new hb(t).contentType)}throw Uk()}function lb(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function fb(e,t){switch(e){case ub.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Gk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case ub.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Gk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=ob(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw Gk(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var hb=N((function e(t){S(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Gk(ub.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var db=function(){function e(t,n){S(this,e);var r=0,i="";Jk(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return N(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Jk(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if($k()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(ab.apply(null,i))}var a=n.map((function(e){return Yk(e)?cb(ub.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function pb(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function vb(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function mb(e,t){return t}var yb=N((function e(t,n,r,i){S(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||mb})),gb=null;function kb(){if(gb)return gb;var e=[];e.push(new yb("bucket")),e.push(new yb("generation")),e.push(new yb("metageneration")),e.push(new yb("name","fullPath",!0));var t=new yb("name");t.xform=function(e,t){return function(e){return!Yk(e)||e.length<2?e:vb(e)}(t)},e.push(t);var n=new yb("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new yb("timeCreated")),e.push(new yb("updated")),e.push(new yb("md5Hash",null,!0)),e.push(new yb("cacheControl",null,!0)),e.push(new yb("contentDisposition",null,!0)),e.push(new yb("contentEncoding",null,!0)),e.push(new yb("contentLanguage",null,!0)),e.push(new yb("contentType",null,!0)),e.push(new yb("metadata","customMetadata",!0)),gb=e}function bb(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Wk(n,r);return t._makeStorageReference(i)}})}(r,e),r}function wb(e,t,n){var r=pb(t);return null===r?null:bb(e,r,n)}function _b(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var xb=N((function e(t,n,r,i){S(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Ib(e){if(!e)throw Uk()}function Eb(e,t){return function(n,r){var i=wb(e,r,t);return Ib(null!==i),i}}function Sb(e,t){return function(n,r){var i=wb(e,r,t);return Ib(null!==i),function(e,t,n,r){var i=pb(t);if(null===i)return null;if(!Yk(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Zk("/b/"+o(i)+"/o/"+o(a),n,r)+eb({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Tb(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Mk(Dk.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Mk(Dk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Mk(Dk.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Mk(Dk.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Cb(e){var t=Tb(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Mk(Dk.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Nb(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Ab(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=Nb(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+_b(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=db.getBlob(c,r,l);if(null===f)throw Bk();var h={name:s.fullPath},d=Zk(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new xb(d,"POST",Eb(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=Tb(t),v}var Rb=null,Pb=function(){function e(){var t=this;S(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hk.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Hk.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Hk.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return N(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Kk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Kk("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Kk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Kk("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Kk("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Db=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Pb);function Ob(){return Rb?Rb():new Db}var Lb=function(){function e(t,n){S(this,e),this._service=t,this._location=n instanceof Wk?n:Wk.makeFromUrl(n,t.host)}return N(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Wk(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return vb(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Wk(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new Mk(Dk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function Mb(e,t,n){e._throwIfRoot("uploadBytes");var r=Ab(e.storage,e._location,kb(),new db(t,!0),n);return e.storage.makeRequestWithTokens(r,Ob).then((function(t){return{metadata:t,ref:e}}))}function Fb(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Zk(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new xb(r,"GET",Sb(e,n),i);return a.errorHandler=Cb(t),a}(e.storage,e._location,kb());return e.storage.makeRequestWithTokens(t,Ob).then((function(e){if(null===e)throw new Mk(Dk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Ub(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Wk(e._location.bucket,n);return new Lb(e.storage,r)}function Vb(e,t){if(e instanceof zb){var n=e;if(null==n._bucket)throw new Mk(Dk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Lk+"' property when initializing the app?");var r=new Lb(n,n._bucket);return null!=t?Vb(r,t):r}return void 0!==t?Ub(e,t):e}function jb(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof zb)return new Lb(e,t);throw zk("To use ref(service, url), the first argument must be a Storage instance.")}return Vb(e,t)}function Bb(e,t){var n=null===t||void 0===t?void 0:t[Lk];return null==n?null:Wk.makeFromBucketSpec(n,e)}var zb=function(){function e(t,n,r,i,a){S(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Ok,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Wk.makeFromBucketSpec(i,this._host):Bb(this._host,this.app.options)}return N(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Wk.makeFromBucketSpec(this._url,e):this._bucket=Bb(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Xk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Xk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Lb(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Qk(qk());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=eb(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new nb(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=d(r,2),a=i[0],u=i[1],e.abrupt("return",this._makeRequest(t,n,a,u).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),qb="@firebase/storage",Gb="0.11.2",Kb="storage";function Hb(e,t,n){return Mb(e=se(e),t,n)}function Wb(e){return Fb(e=se(e))}function Qb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut(),t=arguments.length>1?arguments[1]:void 0,n=Ze(e=se(e),Kb).getImmediate({identifier:t}),r=V("storage");return r&&Yb.apply(void 0,[n].concat(E(r))),n}function Yb(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:z(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Jb(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new zb(r,i,a,n,at)}function $b(e){return c(e)||I(e)||f(e)||h()}Xe(new ce(Kb,Jb,"PUBLIC").setMultipleInstances(!0)),ft(qb,Gb,""),ft(qb,Gb,"esm2017");function Xb(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Zb,ew={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},tw="EMAIL_SIGNIN",nw="PASSWORD_RESET",rw="RECOVER_EMAIL",iw="REVERT_SECOND_FACTOR_ADDITION",aw="VERIFY_AND_CHANGE_EMAIL",ow="VERIFY_EMAIL";function uw(e){return void 0!==e&&void 0!==e.getResponse}function sw(e){return void 0!==e&&void 0!==e.enterprise}var cw=N((function e(t){if(S(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function lw(){return A({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var fw=function(){var e;return A(e={},"admin-restricted-operation","This operation is restricted to administrators only."),A(e,"argument-error",""),A(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),A(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),A(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),A(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),A(e,"cordova-not-ready","Cordova framework is not ready."),A(e,"cors-unsupported","This browser is not supported."),A(e,"credential-already-in-use","This credential is already associated with a different user account."),A(e,"custom-token-mismatch","The custom token corresponds to a different audience."),A(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),A(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),A(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),A(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),A(e,"email-already-in-use","The email address is already in use by another account."),A(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),A(e,"expired-action-code","The action code has expired."),A(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),A(e,"internal-error","An internal AuthError has occurred."),A(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),A(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),A(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),A(e,"invalid-auth-event","An internal AuthError has occurred."),A(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),A(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),A(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),A(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),A(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),A(e,"invalid-email","The email address is badly formatted."),A(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),A(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),A(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),A(e,"invalid-credential","The supplied auth credential is malformed or has expired."),A(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),A(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),A(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),A(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),A(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),A(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),A(e,"wrong-password","The password is invalid or the user does not have a password."),A(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),A(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),A(e,"invalid-provider-id","The specified provider ID is invalid."),A(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),A(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),A(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),A(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),A(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),A(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),A(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),A(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),A(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),A(e,"missing-continue-uri","A continue URL must be provided in the request."),A(e,"missing-iframe-start","An internal AuthError has occurred."),A(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),A(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),A(e,"missing-password","A non-empty password must be provided"),A(e,"missing-multi-factor-info","No second factor identifier is provided."),A(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),A(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),A(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),A(e,"app-deleted","This instance of FirebaseApp has been deleted."),A(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),A(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),A(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),A(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),A(e,"no-auth-event","An internal AuthError has occurred."),A(e,"no-such-provider","User was not linked to an account with the given provider."),A(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),A(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),A(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),A(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),A(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),A(e,"provider-already-linked","User can only be linked to one identity for the given provider."),A(e,"quota-exceeded","The project's quota for this operation has been exceeded."),A(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),A(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),A(e,"rejected-credential","The request contains malformed or mismatching credentials."),A(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),A(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),A(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),A(e,"timeout","The operation has timed out."),A(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),A(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),A(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),A(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),A(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),A(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),A(e,"unverified-email","The operation requires a verified email."),A(e,"user-cancelled","The user did not grant your application the permissions it requested."),A(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),A(e,"user-disabled","The user account has been disabled by an administrator."),A(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),A(e,"user-signed-out",""),A(e,"weak-password","The password must be 6 characters long or more."),A(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),A(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),A(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),A(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),A(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),A(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),A(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),A(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),A(e,"invalid-req-type","Invalid request parameters."),A(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),A(e,"unsupported-password-policy-schema-version","The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK."),A(e,"password-does-not-meet-requirements","The password does not meet the requirements."),e},hw=lw,dw=new J("auth","Firebase",lw()),pw=new be("@firebase/auth");function vw(e){if(pw.logLevel<=de.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];pw.warn.apply(pw,["Auth (".concat(at,"): ").concat(e)].concat(n))}}function mw(e){if(pw.logLevel<=de.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];pw.error.apply(pw,["Auth (".concat(at,"): ").concat(e)].concat(n))}}function yw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ww.apply(void 0,[e].concat(n))}function gw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ww.apply(void 0,[e].concat(n))}function kw(e,t,n){var r=Object.assign(Object.assign({},hw()),A({},t,n));return new J("auth","Firebase",r).create(t,{appName:e.name})}function bw(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&yw(e,"argument-error"),kw(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ww(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=E(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(E(o)))}return dw.create.apply(dw,[e].concat(n))}function _w(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ww.apply(void 0,[t].concat(r))}}function xw(e){var t="INTERNAL ASSERTION FAILED: "+e;throw mw(t),new Error(t)}function Iw(e,t){e||xw(t)}function Ew(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Sw(){return"http:"===Tw()||"https:"===Tw()}function Tw(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Cw=function(){function e(t,n){S(this,e),this.shortDelay=t,this.longDelay=n,Iw(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(q())||H()}return N(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Sw()||K()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Nw(e,t){Iw(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Aw=function(){function e(){S(this,e)}return N(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void xw("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void xw("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void xw("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Rw=(A(Zb={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),A(Zb,"MISSING_CUSTOM_TOKEN","internal-error"),A(Zb,"INVALID_IDENTIFIER","invalid-email"),A(Zb,"MISSING_CONTINUE_URI","internal-error"),A(Zb,"INVALID_PASSWORD","wrong-password"),A(Zb,"MISSING_PASSWORD","missing-password"),A(Zb,"EMAIL_EXISTS","email-already-in-use"),A(Zb,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),A(Zb,"INVALID_IDP_RESPONSE","invalid-credential"),A(Zb,"INVALID_PENDING_TOKEN","invalid-credential"),A(Zb,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),A(Zb,"MISSING_REQ_TYPE","internal-error"),A(Zb,"EMAIL_NOT_FOUND","user-not-found"),A(Zb,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),A(Zb,"EXPIRED_OOB_CODE","expired-action-code"),A(Zb,"INVALID_OOB_CODE","invalid-action-code"),A(Zb,"MISSING_OOB_CODE","internal-error"),A(Zb,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),A(Zb,"INVALID_ID_TOKEN","invalid-user-token"),A(Zb,"TOKEN_EXPIRED","user-token-expired"),A(Zb,"USER_NOT_FOUND","user-token-expired"),A(Zb,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),A(Zb,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),A(Zb,"INVALID_CODE","invalid-verification-code"),A(Zb,"INVALID_SESSION_INFO","invalid-verification-id"),A(Zb,"INVALID_TEMPORARY_PROOF","invalid-credential"),A(Zb,"MISSING_SESSION_INFO","missing-verification-id"),A(Zb,"SESSION_EXPIRED","code-expired"),A(Zb,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),A(Zb,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),A(Zb,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),A(Zb,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),A(Zb,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),A(Zb,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),A(Zb,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),A(Zb,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),A(Zb,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),A(Zb,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),A(Zb,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),A(Zb,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),A(Zb,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),A(Zb,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),A(Zb,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),A(Zb,"MISSING_CLIENT_TYPE","missing-client-type"),A(Zb,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),A(Zb,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),A(Zb,"INVALID_REQ_TYPE","invalid-req-type"),Zb),Pw=new Cw(3e4,6e4);function Dw(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ow(e,t,n,r){return Lw.apply(this,arguments)}function Lw(){return Lw=s(o().mark((function e(t,n,r,i){var a,u=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.abrupt("return",Mw(t,a,s(o().mark((function e(){var a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},u={},i&&("GET"===n?u=i:a={body:JSON.stringify(i)}),s=ne(Object.assign({key:t.config.apiKey},u)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Aw.fetch()(jw(t,t.config.apiHost,r,s),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Lw.apply(this,arguments)}function Mw(e,t,n){return Fw.apply(this,arguments)}function Fw(){return Fw=s(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Rw),n),e.prev=2,a=new Bw(t),e.next=6,Promise.race([r(),a.promise]);case 6:return u=e.sent,a.clearNetworkTimeout(),e.next=10,u.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw zw(t,"account-exists-with-different-credential",s);case 13:if(!u.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=u.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=d(l,2),h=f[0],p=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw zw(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw zw(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw zw(t,"user-disabled",s);case 29:if(v=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=34;break}throw kw(t,v,p);case 34:yw(t,v);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Y)){e.next=41;break}throw e.t0;case 41:yw(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Fw.apply(this,arguments)}function Uw(e,t,n,r){return Vw.apply(this,arguments)}function Vw(){return Vw=s(o().mark((function e(t,n,r,i){var a,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Ow(t,n,r,i,a);case 3:return"mfaPendingCredential"in(u=e.sent)&&yw(t,"multi-factor-auth-required",{_serverResponse:u}),e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)}))),Vw.apply(this,arguments)}function jw(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Nw(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Bw=function(){function e(t){var n=this;S(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(gw(n.auth,"network-request-failed"))}),Pw.get())}))}return N(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function zw(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=gw(e,t,r);return i.customData._tokenResponse=n,i}function qw(e){return Gw.apply(this,arguments)}function Gw(){return Gw=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ow(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}function Kw(e,t){return Hw.apply(this,arguments)}function Hw(){return Hw=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"GET","/v2/recaptchaConfig",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),Hw.apply(this,arguments)}function Ww(e,t){return Qw.apply(this,arguments)}function Qw(){return Qw=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Qw.apply(this,arguments)}function Yw(e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Jw.apply(this,arguments)}function $w(e,t){return Xw.apply(this,arguments)}function Xw(){return Xw=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Xw.apply(this,arguments)}function Zw(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function e_(){return e_=s(o().mark((function e(t){var n,r,i,a,u,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=se(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,_w((a=n_(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),u="object"===typeof a.firebase?a.firebase:void 0,s=null===u||void 0===u?void 0:u.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Zw(t_(a.auth_time)),issuedAtTime:Zw(t_(a.iat)),expirationTime:Zw(t_(a.exp)),signInProvider:s||null,signInSecondFactor:(null===u||void 0===u?void 0:u.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),e_.apply(this,arguments)}function t_(e){return 1e3*Number(e)}function n_(e){var t=d(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return mw("JWT malformed, contained fewer than 3 sections"),null;try{var a=L(r);return a?JSON.parse(a):(mw("Failed to decode base64 JWT payload"),null)}catch(o){return mw("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function r_(e,t){return i_.apply(this,arguments)}function i_(){return i_=s(o().mark((function e(t,n){var r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Y&&a_(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),i_.apply(this,arguments)}function a_(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var o_=function(){function e(t){S(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return N(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),u_=function(){function e(t,n){S(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return N(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Zw(this.lastLoginAt),this.creationTime=Zw(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function s_(e){return c_.apply(this,arguments)}function c_(){return c_=s(o().mark((function e(t){var n,r,i,a,u,s,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,r_(t,$w(r,{idToken:i}));case 6:_w(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),u=a.users[0],t._notifyReloadListener(u),s=(null===(n=u.providerUserInfo)||void 0===n?void 0:n.length)?u.providerUserInfo.map((function(e){var t=e.providerId,n=Xb(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=f_(t.providerData,s),l=t.isAnonymous,f=!(t.email&&u.passwordHash)&&!(null===c||void 0===c?void 0:c.length),h=!!l&&f,d={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:c,metadata:new u_(u.createdAt,u.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),c_.apply(this,arguments)}function l_(){return l_=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=se(t),e.next=3,s_(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(E(n),E(t))}function h_(e,t){return d_.apply(this,arguments)}function d_(){return d_=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mw(t,{},s(o().mark((function e(){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ne({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,u=i.apiKey,s=jw(t,a,"/v1/token","key=".concat(u)),e.next=5,t._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Aw.fetch()(s,{method:"POST",headers:c,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),d_.apply(this,arguments)}var p_=function(){function e(){S(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return N(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){_w(e.idToken,"internal-error"),_w("undefined"!==typeof e.idToken,"internal-error"),_w("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=n_(e);return _w(t,"internal-error"),_w("undefined"!==typeof t.exp,"internal-error"),_w("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=s(o().mark((function e(t){var n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],_w(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h_(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,u=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(u));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return xw("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(_w("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(_w("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(_w("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function v_(e,t){_w("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var m_=function(){function e(t){S(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Xb(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new o_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?E(a.providerData):[],this.metadata=new u_(a.createdAt||void 0,a.lastLoginAt||void 0)}return N(e,[{key:"getIdToken",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r_(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(_w(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return e_.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return l_.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(_w(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){_w(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=s(o().mark((function e(t){var n,r,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,s_(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,r_(this,Ww(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;_w(k&&x,t,"internal-error");var I=p_.fromJSON(this.name,x);_w("string"===typeof k,t,"internal-error"),v_(f,t.name),v_(h,t.name),_w("boolean"===typeof b,t,"internal-error"),_w("boolean"===typeof w,t,"internal-error"),v_(d,t.name),v_(p,t.name),v_(v,t.name),v_(m,t.name),v_(y,t.name),v_(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=s(o().mark((function t(n,r){var i,a,u,s=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new p_).updateFromServerResponse(r),u=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,s_(u);case 6:return t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),y_=new Map;function g_(e){Iw(e instanceof Function,"Expected a class definition");var t=y_.get(e);return t?(Iw(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,y_.set(e,t),t)}var k_=function(){function e(){S(this,e),this.type="NONE",this.storage={}}return N(e,[{key:"_isAvailable",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();k_.type="NONE";var b_=k_;function w_(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var __=function(){function e(t,n,r){S(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=w_(this.userKey,a.apiKey,o),this.fullPersistenceKey=w_("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return N(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?m_._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=s(o().mark((function t(n,r){var i,a,u,c,l,f,h,d,p,v,m,y=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(g_(b_),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),u=a[0]||g_(b_),c=w_(i,n.config.apiKey,n.name),l=null,f=b(r),t.prev=10,f.s();case 12:if((h=f.n()).done){t.next=29;break}return d=h.value,t.prev=14,t.next=17,d._get(c);case 17:if(!(p=t.sent)){t.next=23;break}return v=m_._fromJSON(n,p),d!==u&&(l=v),u=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),f.e(t.t1);case 34:return t.prev=34,f.f(),t.finish(34);case 37:if(m=a.filter((function(e){return e._shouldAllowMigration})),u._shouldAllowMigration&&m.length){t.next=40;break}return t.abrupt("return",new e(u,n,i));case 40:if(u=m[0],!l){t.next=44;break}return t.next=44,u._set(c,l.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===u){e.next=8;break}return e.prev=1,e.next=4,t._remove(c);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(u,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function x_(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(T_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(I_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(N_(t))return"Blackberry";if(A_(t))return"Webos";if(E_(t))return"Safari";if((t.includes("chrome/")||S_(t))&&!t.includes("edge/"))return"Chrome";if(C_(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function I_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();return/firefox\//i.test(e)}function E_(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:q()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();return/crios\//i.test(e)}function T_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();return/iemobile/i.test(e)}function C_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();return/android/i.test(e)}function N_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();return/blackberry/i.test(e)}function A_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();return/webos/i.test(e)}function R_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function P_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();return R_(e)||C_(e)||A_(e)||N_(e)||/windows phone/i.test(e)||T_(e)}function D_(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=x_(q());break;case"Worker":t="".concat(x_(q()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(at,"/").concat(r)}var O_=function(){function e(t){S(this,e),this.auth=t,this.queue=[]}return N(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=s(o().mark((function e(t){var n,r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=b(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),u=b(n);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(o){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function L_(e){return M_.apply(this,arguments)}function M_(){return M_=s(o().mark((function e(t){var n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ow(t,"GET","/v2/passwordPolicy",Dw(t,n)));case 2:case"end":return e.stop()}}),e)}))),M_.apply(this,arguments)}var F_=function(){function e(t){var n,r,i,a;S(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return N(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(n=u.meetsMaxPasswordLength)||void 0===n||n),u.isValid&&(u.isValid=null===(r=u.containsLowercaseLetter)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsUppercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(a=u.containsNumericCharacter)||void 0===a||a),u.isValid&&(u.isValid=null===(o=u.containsNonAlphanumericCharacter)||void 0===o||o),u}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),U_=function(){function e(t,n,r,i){S(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j_(this),this.idTokenSubscription=new j_(this),this.beforeStateQueue=new O_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return N(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=g_(t)),this._initializationPromise=this.queue(s(o().mark((function r(){var i,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,__.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=s(o().mark((function e(t){var n,r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return u=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:c=e.sent,u&&u!==s||!(null===c||void 0===c?void 0:c.user)||(i=c.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return _w(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s_(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?se(t):null)&&_w(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=s(o().mark((function e(t){var n,r=this,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&_w(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(g_(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L_(this);case 2:t=e.sent,n=new F_(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new J("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return _w(n=t&&g_(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,__.create(this,[g_(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=s(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(_w(u,this,"internal-error"),u.then((function(){o||a(i.currentUser)})),"function"===typeof t){var s=e.addObserver(t,n,r);return function(){o=!0,s()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return _w(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=D_(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=s(o().mark((function e(){var t,n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=A({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&vw("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function V_(e){return se(e)}var j_=function(){function e(t){var n=this;S(this,e),this.auth=t,this.observer=null,this.addObserver=ae((function(e){return n.observer=e}))}return N(e,[{key:"next",get:function(){return _w(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function B_(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=gw("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function z_(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var q_=function(){function e(t){S(this,e),this.type="recaptcha-enterprise",this.auth=V_(t)}return N(e,[{key:"verify",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a,u=this,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;sw(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=s(o().mark((function e(n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Kw(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new cw(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=c.length>0&&void 0!==c[0]?c[0]:"verify",n=c.length>1&&void 0!==c[1]&&c[1],e.abrupt("return",new Promise((function(e,t){r(u.auth).then((function(r){if(!n&&sw(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));B_("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function G_(e,t,n){return K_.apply(this,arguments)}function K_(){return K_=s(o().mark((function e(t,n,r){var i,a,u,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>3&&void 0!==c[3]&&c[3],a=new q_(t),e.prev=2,e.next=5,a.verify(r);case 5:u=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:u=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:u}):Object.assign(s,{captchaResponse:u}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),K_.apply(this,arguments)}function H_(e,t,n){var r=V_(e);_w(r._canInitEmulator,r,"emulator-config-failed"),_w(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=W_(t),o=function(e){var t=W_(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Q_(r.substr(a.length+1))}}var o=d(r.split(":"),2);return{host:o[0],port:Q_(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function W_(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Q_(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Y_=function(){function e(t,n){S(this,e),this.providerId=t,this.signInMethod=n}return N(e,[{key:"toJSON",value:function(){return xw("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return xw("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return xw("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return xw("not implemented")}}]),e}();function J_(e,t){return $_.apply(this,arguments)}function $_(){return $_=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:resetPassword",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),$_.apply(this,arguments)}function X_(e,t){return Z_.apply(this,arguments)}function Z_(){return Z_=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Z_.apply(this,arguments)}function ex(e,t){return tx.apply(this,arguments)}function tx(){return tx=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:update",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),tx.apply(this,arguments)}function nx(e,t){return rx.apply(this,arguments)}function rx(){return rx=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uw(t,"POST","/v1/accounts:signInWithPassword",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),rx.apply(this,arguments)}function ix(e,t){return ax.apply(this,arguments)}function ax(){return ax=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:sendOobCode",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),ax.apply(this,arguments)}function ox(e,t){return ux.apply(this,arguments)}function ux(){return ux=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ix(t,n));case 1:case"end":return e.stop()}}),e)}))),ux.apply(this,arguments)}function sx(e,t){return cx.apply(this,arguments)}function cx(){return cx=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ix(t,n));case 1:case"end":return e.stop()}}),e)}))),cx.apply(this,arguments)}function lx(e,t){return fx.apply(this,arguments)}function fx(){return fx=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ix(t,n));case 1:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}function hx(e,t){return dx.apply(this,arguments)}function dx(){return dx=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ix(t,n));case 1:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(e,t){return vx.apply(this,arguments)}function vx(){return vx=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uw(t,"POST","/v1/accounts:signInWithEmailLink",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),vx.apply(this,arguments)}function mx(e,t){return yx.apply(this,arguments)}function yx(){return yx=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uw(t,"POST","/v1/accounts:signInWithEmailLink",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),yx.apply(this,arguments)}var gx=function(e){w(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return S(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return N(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,G_(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",nx(t,i));case 11:return e.abrupt("return",nx(t,r).catch(function(){var e=s(o().mark((function e(n){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,G_(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",nx(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",px(t,{email:this._email,oobCode:this._password}));case 13:yw(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",X_(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",mx(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:yw(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Y_);function kx(e,t){return bx.apply(this,arguments)}function bx(){return bx=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uw(t,"POST","/v1/accounts:signInWithIdp",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),bx.apply(this,arguments)}var wx=function(e){w(n,e);var t=x(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return N(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return kx(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,kx(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,kx(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ne(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yw("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Xb(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Y_);function _x(e,t){return xx.apply(this,arguments)}function xx(){return xx=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:sendVerificationCode",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function Ix(){return Ix=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uw(t,"POST","/v1/accounts:signInWithPhoneNumber",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ix.apply(this,arguments)}function Ex(){return Ex=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uw(t,"POST","/v1/accounts:signInWithPhoneNumber",Dw(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw zw(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Ex.apply(this,arguments)}var Sx=A({},"USER_NOT_FOUND","user-not-found");function Tx(){return Tx=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Uw(t,"POST","/v1/accounts:signInWithPhoneNumber",Dw(t,r),Sx));case 2:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}var Cx=function(e){w(n,e);var t=x(n);function n(e){var r;return S(this,n),(r=t.call(this,"phone","phone")).params=e,r}return N(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ix.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ex.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Tx.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Y_);var Nx=function(){function e(t){var n,r,i,a,o,u;S(this,e);var s=re(ie(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);_w(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return N(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=re(ie(e)).link,n=t?re(ie(t)).deep_link_id:null,r=re(ie(e)).deep_link_id;return(r?re(ie(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Ax=function(){function e(){S(this,e),this.providerId=e.PROVIDER_ID}return N(e,null,[{key:"credential",value:function(e,t){return gx._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Nx.parseLink(t);return _w(n,"argument-error"),gx._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ax.PROVIDER_ID="password",Ax.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ax.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Rx=function(){function e(t){S(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return N(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Px=function(e){w(n,e);var t=x(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).scopes=[],e}return N(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return E(this.scopes)}}]),n}(Rx),Dx=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return _w(e.idToken||e.accessToken,"argument-error"),wx._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return _w("providerId"in t&&"signInMethod"in t,"argument-error"),wx._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Px),Ox=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.call(this,"facebook.com")}return N(n,null,[{key:"credential",value:function(e){return wx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Px);Ox.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ox.PROVIDER_ID="facebook.com";var Lx=function(e){w(n,e);var t=x(n);function n(){var e;return S(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return N(n,null,[{key:"credential",value:function(e,t){return wx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Px);Lx.GOOGLE_SIGN_IN_METHOD="google.com",Lx.PROVIDER_ID="google.com";var Mx=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.call(this,"github.com")}return N(n,null,[{key:"credential",value:function(e){return wx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Px);Mx.GITHUB_SIGN_IN_METHOD="github.com",Mx.PROVIDER_ID="github.com";var Fx=function(e){w(n,e);var t=x(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return N(n,[{key:"_getIdTokenResponse",value:function(e){return kx(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,kx(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,kx(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Y_),Ux=function(e){w(n,e);var t=x(n);function n(e){return S(this,n),_w(e.startsWith("saml."),"argument-error"),t.call(this,e)}return N(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Fx.fromJSON(e);return _w(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Fx._create(r,n)}catch(i){return null}}}]),n}(Rx),Vx=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.call(this,"twitter.com")}return N(n,null,[{key:"credential",value:function(e,t){return wx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Px);function jx(e,t){return Bx.apply(this,arguments)}function Bx(){return Bx=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uw(t,"POST","/v1/accounts:signUp",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),Bx.apply(this,arguments)}Vx.TWITTER_SIGN_IN_METHOD="twitter.com",Vx.PROVIDER_ID="twitter.com";var zx=function(){function e(t){S(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return N(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=s(o().mark((function t(n,r,i){var a,u,s,c,l=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,m_._fromIdTokenResponse(n,i,a);case 3:return u=t.sent,s=qx(i),c=new e({user:u,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=s(o().mark((function t(n,r,i){var a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=qx(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function qx(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Gx(){return Gx=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=V_(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new zx({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,jx(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,zx._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Gx.apply(this,arguments)}var Kx=function(e){w(n,e);var t=x(n);function n(e,r,i,a){var o,u;return S(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(_(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return N(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Y);function Hx(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Kx._fromErrorAndOperation(e,n,t,r);throw n}))}function Wx(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Qx(e,t){return Yx.apply(this,arguments)}function Yx(){return Yx=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=se(t),e.next=3,Xx(!0,r,n);case 3:return e.t0=Yw,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,u=Wx(a||[]),r.providerData=r.providerData.filter((function(e){return u.has(e.providerId)})),u.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Yx.apply(this,arguments)}function Jx(e,t){return $x.apply(this,arguments)}function $x(){return $x=s(o().mark((function e(t,n){var r,i,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=r_,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",zx._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),$x.apply(this,arguments)}function Xx(e,t,n){return Zx.apply(this,arguments)}function Zx(){return Zx=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s_(n);case 2:i=Wx(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",_w(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)}))),Zx.apply(this,arguments)}function eI(e,t){return tI.apply(this,arguments)}function tI(){return tI=s(o().mark((function e(t,n){var r,i,a,u,s,c,l=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,r_(t,Hx(i,a,n,t),r);case 6:return _w((u=e.sent).idToken,i,"internal-error"),_w(s=n_(u.idToken),i,"internal-error"),c=s.sub,_w(t.uid===c,i,"user-mismatch"),e.abrupt("return",zx._forOperation(t,a,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&yw(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),tI.apply(this,arguments)}function nI(e,t){return rI.apply(this,arguments)}function rI(){return rI=s(o().mark((function e(t,n){var r,i,a,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Hx(t,i,n);case 4:return a=e.sent,e.next=7,zx._fromIdTokenResponse(t,i,a);case 7:if(u=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(u.user);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),rI.apply(this,arguments)}function iI(e,t){return aI.apply(this,arguments)}function aI(){return aI=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nI(V_(t),n));case 1:case"end":return e.stop()}}),e)}))),aI.apply(this,arguments)}function oI(e,t){return uI.apply(this,arguments)}function uI(){return uI=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=se(t),e.next=3,Xx(!1,r,n.providerId);case 3:return e.abrupt("return",Jx(r,n));case 4:case"end":return e.stop()}}),e)}))),uI.apply(this,arguments)}function sI(e,t){return cI.apply(this,arguments)}function cI(){return cI=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eI(se(t),n));case 1:case"end":return e.stop()}}),e)}))),cI.apply(this,arguments)}function lI(e,t){return fI.apply(this,arguments)}function fI(){return fI=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uw(t,"POST","/v1/accounts:signInWithCustomToken",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),fI.apply(this,arguments)}function hI(){return hI=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=V_(t),e.next=3,lI(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,zx._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),hI.apply(this,arguments)}var dI=function(){function e(t,n){S(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return N(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?pI._fromServerResponse(e,t):"totpInfo"in t?vI._fromServerResponse(e,t):yw(e,"internal-error")}}]),e}(),pI=function(e){w(n,e);var t=x(n);function n(e){var r;return S(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return N(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(dI),vI=function(e){w(n,e);var t=x(n);function n(e){return S(this,n),t.call(this,"totp",e)}return N(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(dI);function mI(e,t,n){var r;_w((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),_w("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_w(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(_w(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function yI(e){return gI.apply(this,arguments)}function gI(){return gI=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=V_(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)}))),gI.apply(this,arguments)}function kI(){return kI=s(o().mark((function e(t,n,r){var i,a,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=V_(t),u={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,G_(a,u,"getOobCode",!0);case 5:return c=e.sent,r&&mI(a,c,r),e.next=9,sx(a,c);case 9:e.next=14;break;case 11:return r&&mI(a,u,r),e.next=14,sx(a,u).catch(function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,G_(a,u,"getOobCode",!0);case 4:return n=e.sent,r&&mI(a,n,r),e.next=8,sx(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),kI.apply(this,arguments)}function bI(){return bI=s(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J_(se(t),{oobCode:n,newPassword:r}).catch(function(){var e=s(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&yI(t),n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),bI.apply(this,arguments)}function wI(){return wI=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ex(se(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),wI.apply(this,arguments)}function _I(e,t){return xI.apply(this,arguments)}function xI(){return xI=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=se(t),e.next=3,J_(r,{oobCode:n});case 3:i=e.sent,_w(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return _w(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:_w(i.mfaInfo,r,"internal-error");case 13:_w(i.email,r,"internal-error");case 14:return u=null,i.mfaInfo&&(u=dI._fromServerResponse(V_(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:u},operation:a});case 17:case"end":return e.stop()}}),e)}))),xI.apply(this,arguments)}function II(){return II=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_I(se(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),II.apply(this,arguments)}function EI(e,t,n){return SI.apply(this,arguments)}function SI(){return SI=s(o().mark((function e(t,n,r){var i,a,u,c,l,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=V_(t),u={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,G_(a,u,"signUpPassword");case 5:l=e.sent,c=jx(a,l),e.next=10;break;case 9:c=jx(a,u).catch(function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=6;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,G_(a,u,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",jx(a,n));case 6:throw t;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,c.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&yI(t),e}));case 12:return f=e.sent,e.next=15,zx._fromIdTokenResponse(a,"signIn",f);case 15:return h=e.sent,e.next=18,a._updateCurrentUser(h.user);case 18:return e.abrupt("return",h);case 19:case"end":return e.stop()}}),e)}))),SI.apply(this,arguments)}function TI(){return TI=s(o().mark((function e(t,n,r){var i,a,u,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=function(e,t){_w(t.handleCodeInApp,a,"argument-error"),t&&mI(a,e,t)},a=V_(t),u={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,G_(a,u,"getOobCode",!0);case 6:return l=e.sent,c(l,r),e.next=10,lx(a,l);case 10:e.next=15;break;case 12:return c(u,r),e.next=15,lx(a,u).catch(function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,G_(a,u,"getOobCode",!0);case 4:return n=e.sent,c(n,r),e.next=8,lx(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),TI.apply(this,arguments)}function CI(){return CI=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=se(t),_w((a=Ax.credentialWithLink(n,r||Ew()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",iI(i,a));case 4:case"end":return e.stop()}}),e)}))),CI.apply(this,arguments)}function NI(e,t){return AI.apply(this,arguments)}function AI(){return AI=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:createAuthUri",Dw(t,n)));case 1:case"end":return e.stop()}}),e)}))),AI.apply(this,arguments)}function RI(){return RI=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sw()?Ew():"http://localhost",i={identifier:n,continueUri:r},e.next=4,NI(se(t),i);case 4:return a=e.sent,u=a.signinMethods,e.abrupt("return",u||[]);case 7:case"end":return e.stop()}}),e)}))),RI.apply(this,arguments)}function PI(){return PI=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=se(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&mI(r.auth,a,n),e.next=8,ox(r.auth,a);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)}))),PI.apply(this,arguments)}function DI(){return DI=s(o().mark((function e(t,n,r){var i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=se(t),e.next=3,t.getIdToken();case 3:return a=e.sent,u={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&mI(i.auth,u,r),e.next=8,hx(i.auth,u);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)}))),DI.apply(this,arguments)}function OI(e,t){return LI.apply(this,arguments)}function LI(){return LI=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),LI.apply(this,arguments)}function MI(){return MI=s(o().mark((function e(t,n){var r,i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=se(t),e.next=6,a.getIdToken();case 6:return u=e.sent,s={idToken:u,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,r_(a,OI(a.auth,s));case 10:return c=e.sent,a.displayName=c.displayName||null,a.photoURL=c.photoUrl||null,(l=a.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=a.displayName,l.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(c);case 17:case"end":return e.stop()}}),e)}))),MI.apply(this,arguments)}function FI(e,t,n){return UI.apply(this,arguments)}function UI(){return UI=s(o().mark((function e(t,n,r){var i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,u={idToken:a,returnSecureToken:!0},n&&(u.email=n),r&&(u.password=r),e.next=9,r_(t,X_(i,u));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),UI.apply(this,arguments)}var VI=N((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),jI=function(e){w(n,e);var t=x(n);function n(e,r,i,a){var o;return S(this,n),(o=t.call(this,e,r,i)).username=a,o}return N(n)}(VI),BI=function(e){w(n,e);var t=x(n);function n(e,r){return S(this,n),t.call(this,e,"facebook.com",r)}return N(n)}(VI),zI=function(e){w(n,e);var t=x(n);function n(e,r){return S(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return N(n)}(jI),qI=function(e){w(n,e);var t=x(n);function n(e,r){return S(this,n),t.call(this,e,"google.com",r)}return N(n)}(VI),GI=function(e){w(n,e);var t=x(n);function n(e,r,i){return S(this,n),t.call(this,e,"twitter.com",r,i)}return N(n)}(jI);function KI(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=n_(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new VI(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new BI(a,i);case"github.com":return new zI(a,i);case"google.com":return new qI(a,i);case"twitter.com":return new GI(a,i,e.screenName||null);case"custom":case"anonymous":return new VI(a,null);default:return new VI(a,r,i)}}(n)}var HI=function(){function e(t,n,r){S(this,e),this.type=t,this.credential=n,this.user=r}return N(e,[{key:"toJSON",value:function(){return{multiFactorSession:A({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),WI=function(){function e(t,n,r){S(this,e),this.session=t,this.hints=n,this.signInResolver=r}return N(e,[{key:"resolveSignIn",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=V_(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return dI._fromServerResponse(r,e)}));_w(i.mfaPendingCredential,r,"internal-error");var u=HI._fromMfaPendingCredential(i.mfaPendingCredential);return new e(u,a,function(){var e=s(o().mark((function e(t){var a,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,u);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,zx._fromIdTokenResponse(r,n.operationType,s);case 11:return c=e.sent,e.next=14,r._updateCurrentUser(c.user);case 14:return e.abrupt("return",c);case 15:return _w(n.user,r,"internal-error"),e.abrupt("return",zx._forOperation(n.user,n.operationType,s));case 17:yw(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function QI(e,t){return Ow(e,"POST","/v2/accounts/mfaEnrollment:start",Dw(e,t))}function YI(e,t){return Ow(e,"POST","/v2/accounts/mfaEnrollment:start",Dw(e,t))}function JI(e,t){return Ow(e,"POST","/v2/accounts/mfaEnrollment:finalize",Dw(e,t))}function $I(e,t){return Ow(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Dw(e,t))}var XI=function(){function e(t){var n=this;S(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return dI._fromServerResponse(t.auth,e)})))}))}return N(e,[{key:"getSession",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=HI,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,r_(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,r_(this.user,$I(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ZI=new WeakMap;var eE="__sak",tE=function(){function e(t,n){S(this,e),this.storageRetriever=t,this.type=n}return N(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(eE,"1"),this.storage.removeItem(eE),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var nE=function(e){w(n,e);var t=x(n);function n(){var e;return S(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=q();return E_(e)||R_(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=P_(),e._shouldAllowMigration=!0,e}return N(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);W()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=s(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=s(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(tE);nE.type="LOCAL";var rE=nE,iE=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return N(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(tE);iE.type="SESSION";var aE=iE;function oE(e){return Promise.all(e.map(function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var uE=function(){function e(t){S(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return N(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=s(o().mark((function e(t){var n,r,i,a,u,c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,u=r.data,null===(c=this.handlersMap[a])||void 0===c?void 0:c.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),l=Array.from(c).map(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,u));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,oE(l);case 9:f=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function sE(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}uE.receivers=[];var cE=function(){function e(t){S(this,e),this.target=t,this.handlers=new Set}return N(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=s(o().mark((function e(t,n){var r,i,a,u,s=this,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,o){var c=sE("",20);i.port1.start();var l=setTimeout((function(){o(new Error("unsupported_event"))}),r);u={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),o(new Error("invalid_response"))}}},s.handlers.add(u),i.port1.addEventListener("message",u.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){u&&s.removeMessageHandler(u)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function lE(){return window}function fE(e){lE().location.href=e}function hE(){return"undefined"!==typeof lE().WorkerGlobalScope&&"function"===typeof lE().importScripts}function dE(){return pE.apply(this,arguments)}function pE(){return(pE=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function vE(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var mE="firebaseLocalStorageDb",yE="firebaseLocalStorage",gE="fbase_key",kE=function(){function e(t){S(this,e),this.request=t}return N(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function bE(e,t){return e.transaction([yE],t?"readwrite":"readonly").objectStore(yE)}function wE(){var e=indexedDB.deleteDatabase(mE);return new kE(e).toPromise()}function _E(){var e=indexedDB.open(mE,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(yE,{keyPath:gE})}catch(r){n(r)}})),e.addEventListener("success",s(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(yE)){n.next=12;break}return r.close(),n.next=5,wE();case 5:return n.t0=t,n.next=8,_E();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function xE(e,t,n){return IE.apply(this,arguments)}function IE(){return IE=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=bE(t,!0).put((A(i={},gE,n),A(i,"value",r),i)),e.abrupt("return",new kE(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),IE.apply(this,arguments)}function EE(e,t){return SE.apply(this,arguments)}function SE(){return SE=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bE(t,!1).get(n),e.next=3,new kE(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),SE.apply(this,arguments)}function TE(e,t){var n=bE(e,!0).delete(t);return new kE(n).toPromise()}var CE=function(){function e(){S(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return N(e,[{key:"_openDb",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,_E();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hE()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=s(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=uE._getInstance(hE()?self:null),this.receiver._subscribe("keyChanged",function(){var e=s(o().mark((function e(n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=s(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dE();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new cE(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&vE()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,_E();case 5:return t=e.sent,e.next=8,xE(t,eE,"1");case 8:return e.next=10,TE(t,eE);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=s(o().mark((function e(t,n){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return xE(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return EE(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=s(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return TE(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a,u,s,c,l,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=bE(e,!1).getAll();return new kE(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=b(t);try{for(i.s();!(a=i.n()).done;)u=a.value,s=u.fbase_key,c=u.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(c)&&(this.notifyListeners(s,c),n.push(s))}catch(o){i.e(o)}finally{i.f()}for(l=0,f=Object.keys(this.localCache);l<f.length;l++)h=f[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();CE.type="LOCAL";var NE=CE;function AE(e,t){return Ow(e,"POST","/v2/accounts/mfaSignIn:start",Dw(e,t))}function RE(e,t){return Ow(e,"POST","/v2/accounts/mfaSignIn:finalize",Dw(e,t))}var PE=1e12,DE=function(){function e(t){S(this,e),this.auth=t,this.counter=PE,this._widgets=new Map}return N(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new OE(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||PE;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||PE;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||PE,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),OE=function(){function e(t,n,r){var i=this;S(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;_w(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return N(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var LE=z_("rcb"),ME=new Cw(3e4,6e4),FE=function(){function e(){var t;S(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=lE().grecaptcha)||void 0===t?void 0:t.render)}return N(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return _w(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&uw(lE().grecaptcha)?Promise.resolve(lE().grecaptcha):new Promise((function(r,i){var a=lE().setTimeout((function(){i(gw(e,"network-request-failed"))}),ME.get());lE()[LE]=function(){lE().clearTimeout(a),delete lE()[LE];var o=lE().grecaptcha;if(o&&uw(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(gw(e,"internal-error"))},B_("".concat("https://www.google.com/recaptcha/api.js?","?").concat(ne({onload:LE,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(gw(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=lE().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var UE=function(){function e(){S(this,e)}return N(e,[{key:"load",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new DE(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),VE="recaptcha",jE={theme:"light",type:"image"},BE=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},jE);S(this,e),this.parameters=r,this.type=VE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=V_(t),this.isInvisible="invisible"===this.parameters.size,_w("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;_w(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new UE:new FE,this.validateStartingState()}return N(e,[{key:"verify",value:function(){var e=s(o().mark((function e(){var t,n,r,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){_w(!this.parameters.sitekey,this.auth,"argument-error"),_w(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_w("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=lE()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){_w(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _w(Sw()&&!hE(),this.auth,"internal-error"),e.next=3,zE();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,qw(this.auth);case 8:_w(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return _w(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function zE(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var qE=function(){function e(t,n){S(this,e),this.verificationId=t,this.onConfirmation=n}return N(e,[{key:"confirm",value:function(e){var t=Cx._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function GE(){return GE=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=V_(t),e.next=3,QE(i,n,se(r));case 3:return a=e.sent,e.abrupt("return",new qE(a,(function(e){return iI(i,e)})));case 5:case"end":return e.stop()}}),e)}))),GE.apply(this,arguments)}function KE(e,t,n){return HE.apply(this,arguments)}function HE(){return HE=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=se(t),e.next=3,Xx(!1,i,"phone");case 3:return e.next=5,QE(i.auth,n,se(r));case 5:return a=e.sent,e.abrupt("return",new qE(a,(function(e){return oI(i,e)})));case 7:case"end":return e.stop()}}),e)}))),HE.apply(this,arguments)}function WE(){return WE=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=se(t),e.next=3,QE(i.auth,n,se(r));case 3:return a=e.sent,e.abrupt("return",new qE(a,(function(e){return sI(i,e)})));case 5:case"end":return e.stop()}}),e)}))),WE.apply(this,arguments)}function QE(e,t,n){return YE.apply(this,arguments)}function YE(){return YE=s(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,_w("string"===typeof a,t,"argument-error"),_w(r.type===VE,t,"argument-error"),!("session"in(u="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=u.session,!("phoneNumber"in u)){e.next=17;break}return _w("enroll"===s.type,t,"internal-error"),e.next=13,QI(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:u.phoneNumber,recaptchaToken:a}});case 13:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 17:return _w("signin"===s.type,t,"internal-error"),_w(l=(null===(i=u.multiFactorHint)||void 0===i?void 0:i.uid)||u.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,AE(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return f=e.sent,e.abrupt("return",f.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,_x(t,{phoneNumber:u.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,d=h.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),YE.apply(this,arguments)}function JE(){return JE=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jx(se(t),n);case 2:case"end":return e.stop()}}),e)}))),JE.apply(this,arguments)}var $E=function(){function e(t){S(this,e),this.providerId=e.PROVIDER_ID,this.auth=V_(t)}return N(e,[{key:"verifyPhoneNumber",value:function(e,t){return QE(this.auth,e,se(t))}}],[{key:"credential",value:function(e,t){return Cx._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Cx._fromTokenResponse(n,r):null}}]),e}();function XE(e,t){return t?g_(t):(_w(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}$E.PROVIDER_ID="phone",$E.PHONE_SIGN_IN_METHOD="phone";var ZE=function(e){w(n,e);var t=x(n);function n(e){var r;return S(this,n),(r=t.call(this,"custom","custom")).params=e,r}return N(n,[{key:"_getIdTokenResponse",value:function(e){return kx(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return kx(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return kx(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Y_);function eS(e){return nI(e.auth,new ZE(e),e.bypassAuthState)}function tS(e){var t=e.auth,n=e.user;return _w(n,t,"internal-error"),eI(n,new ZE(e),e.bypassAuthState)}function nS(e){return rS.apply(this,arguments)}function rS(){return rS=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,_w(r=t.user,n,"internal-error"),e.abrupt("return",Jx(r,new ZE(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),rS.apply(this,arguments)}var iS=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];S(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return N(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=s(o().mark((function t(n,r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=s(o().mark((function e(t){var n,r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,u=t.error,s=t.type,!u){e.next=4;break}return this.reject(u),e.abrupt("return");case 4:return c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(c);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eS;case"linkViaPopup":case"linkViaRedirect":return nS;case"reauthViaPopup":case"reauthViaRedirect":return tS;default:yw(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Iw(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Iw(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),aS=new Cw(2e3,1e4);function oS(e,t,n){return uS.apply(this,arguments)}function uS(){return uS=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=V_(t),bw(t,n,Rx),a=XE(i,r),u=new fS(i,"signInViaPopup",n,a),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),uS.apply(this,arguments)}function sS(){return sS=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bw((i=se(t)).auth,n,Rx),a=XE(i.auth,r),u=new fS(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),sS.apply(this,arguments)}function cS(e,t,n){return lS.apply(this,arguments)}function lS(){return lS=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bw((i=se(t)).auth,n,Rx),a=XE(i.auth,r),u=new fS(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),lS.apply(this,arguments)}var fS=function(e){w(n,e);var t=x(n);function n(e,r,i,a,o){var u;return S(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=_(u),u}return N(n,[{key:"executeNotNull",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return _w(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=s(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Iw(1===this.filter.length,"Popup operations only handle one event"),t=sE(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(gw(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(gw(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(gw(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,aS.get())}()}}]),n}(iS);fS.currentPopupAction=null;var hS="pendingRedirect",dS=new Map,pS=function(e){w(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return S(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return N(n,[{key:"execute",value:function(){var e=s(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=dS.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,vS(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,g(y(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:dS.set(this.auth._key(),t);case 21:return this.bypassAuthState||dS.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=s(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",g(y(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",g(y(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(iS);function vS(e,t){return mS.apply(this,arguments)}function mS(){return mS=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wS(n),i=bS(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),mS.apply(this,arguments)}function yS(e,t){return gS.apply(this,arguments)}function gS(){return gS=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bS(t)._set(wS(n),"true"));case 1:case"end":return e.stop()}}),e)}))),gS.apply(this,arguments)}function kS(e,t){dS.set(e._key(),t)}function bS(e){return g_(e._redirectPersistence)}function wS(e){return w_(hS,e.config.apiKey,e.name)}function _S(e,t,n){return function(e,t,n){return xS.apply(this,arguments)}(e,t,n)}function xS(){return xS=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=V_(t),bw(t,n,Rx),e.next=4,i._initializationPromise;case 4:return a=XE(i,r),e.next=7,yS(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),xS.apply(this,arguments)}function IS(e,t,n){return function(e,t,n){return ES.apply(this,arguments)}(e,t,n)}function ES(){return ES=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bw((i=se(t)).auth,n,Rx),e.next=4,i.auth._initializationPromise;case 4:return a=XE(i.auth,r),e.next=7,yS(a,i.auth);case 7:return e.next=9,PS(i);case 9:return u=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",u));case 11:case"end":return e.stop()}}),e)}))),ES.apply(this,arguments)}function SS(e,t,n){return function(e,t,n){return TS.apply(this,arguments)}(e,t,n)}function TS(){return TS=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bw((i=se(t)).auth,n,Rx),e.next=4,i.auth._initializationPromise;case 4:return a=XE(i.auth,r),e.next=7,Xx(!1,i,n.providerId);case 7:return e.next=9,yS(a,i.auth);case 9:return e.next=11,PS(i);case 11:return u=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",u));case 13:case"end":return e.stop()}}),e)}))),TS.apply(this,arguments)}function CS(e,t){return NS.apply(this,arguments)}function NS(){return NS=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V_(t)._initializationPromise;case 2:return e.abrupt("return",AS(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),NS.apply(this,arguments)}function AS(e,t){return RS.apply(this,arguments)}function RS(){return RS=s(o().mark((function e(t,n){var r,i,a,u,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=V_(t),a=XE(i,n),u=new pS(i,a,r),e.next=6,u.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),RS.apply(this,arguments)}function PS(e){return DS.apply(this,arguments)}function DS(){return DS=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sE("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),DS.apply(this,arguments)}var OS=function(){function e(t){S(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return N(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MS(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!MS(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(gw(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(LS(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(LS(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function LS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function MS(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function FS(e){return US.apply(this,arguments)}function US(){return US=s(o().mark((function e(t){var n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ow(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),US.apply(this,arguments)}var VS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jS=/^https?/;function BS(){return BS=s(o().mark((function e(t){var n,r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,FS(t);case 4:n=e.sent,r=n.authorizedDomains,i=b(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(u=a.value,e.prev=11,!zS(u)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:yw(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),BS.apply(this,arguments)}function zS(e){var t=Ew(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!jS.test(r))return!1;if(VS.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var qS=new Cw(3e4,6e4);function GS(){var e=lE().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=E(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var KS=null;function HS(e){return KS=KS||function(e){return new Promise((function(t,n){var r,i,a;function o(){GS(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){GS(),n(gw(e,"network-request-failed"))},timeout:qS.get()})}if(null===(i=null===(r=lE().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=lE().gapi)||void 0===a?void 0:a.load)){var u=z_("iframefcb");return lE()[u]=function(){gapi.load?o():n(gw(e,"network-request-failed"))},B_("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw KS=null,e}))}(e),KS}var WS=new Cw(5e3,15e3),QS="__/auth/iframe",YS="emulator/auth/iframe",JS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$S=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XS(e){var t=e.config;_w(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Nw(t,YS):"https://".concat(e.config.authDomain,"/").concat(QS),r={apiKey:t.apiKey,appName:e.name,v:at},i=$S.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ne(r).slice(1))}function ZS(e){return eT.apply(this,arguments)}function eT(){return eT=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HS(t);case 2:return n=e.sent,_w(r=lE().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:XS(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JS,dontclear:!0},(function(e){return new Promise(function(){var n=s(o().mark((function n(r,i){var a,u,s;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){lE().clearTimeout(u),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=gw(t,"network-request-failed"),u=lE().setTimeout((function(){i(a)}),WS.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),eT.apply(this,arguments)}var tT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nT=function(){function e(t){S(this,e),this.window=t,this.associatedEvent=null}return N(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function rT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},tT),{width:r.toString(),height:i.toString(),top:a,left:o}),c=q().toLowerCase();n&&(u=S_(c)?"_blank":n),I_(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=d(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return R_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:q())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new nT(null);var f=window.open(t||"",u,l);_w(f,e,"popup-blocked");try{f.focus()}catch(h){}return new nT(f)}var iT="__/auth/handler",aT="emulator/auth/handler",oT=encodeURIComponent("fac");function uT(e,t,n,r,i,a){return sT.apply(this,arguments)}function sT(){return sT=s(o().mark((function e(t,n,r,i,a,u){var s,c,l,f,h,p,v,m,y,g,k,b,w;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_w(t.config.authDomain,t,"auth-domain-config-required"),_w(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:at,eventId:a},n instanceof Rx)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Z(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),c=0,l=Object.entries(u||{});c<l.length;c++)f=d(l[c],2),h=f[0],p=f[1],s[h]=p;for(n instanceof Px&&(v=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=v.join(",")),t.tenantId&&(s.tid=t.tenantId),m=s,y=0,g=Object.keys(m);y<g.length;y++)k=g[y],void 0===m[k]&&delete m[k];return e.next=10,t._getAppCheckToken();case 10:return b=e.sent,w=b?"#".concat(oT,"=").concat(encodeURIComponent(b)):"",e.abrupt("return","".concat(cT(t),"?").concat(ne(m).slice(1)).concat(w));case 13:case"end":return e.stop()}}),e)}))),sT.apply(this,arguments)}function cT(e){var t=e.config;return t.emulator?Nw(t,aT):"https://".concat(t.authDomain,"/").concat(iT)}var lT="webStorageSupport",fT=function(){function e(){S(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aE,this._completeRedirectFn=AS,this._overrideRedirectResult=kS}return N(e,[{key:"_openPopup",value:function(){var e=s(o().mark((function e(t,n,r,i){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Iw(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,uT(t,n,r,Ew(),i);case 3:return u=e.sent,e.abrupt("return",rT(t,u,sE()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=s(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,uT(t,n,r,Ew(),i);case 4:return fE(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Iw(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZS(t);case 2:return n=e.sent,r=new OS(t),n.register("authEvent",(function(e){return _w(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(lT,{type:lT},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[lT];void 0!==i&&t(!!i),yw(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return BS.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return P_()||E_()||R_()}}]),e}(),hT=fT,dT=function(){function e(t){S(this,e),this.factorId=t}return N(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return xw("unexpected MultiFactorSessionType")}}}]),e}(),pT=function(e){w(n,e);var t=x(n);function n(e){var r;return S(this,n),(r=t.call(this,"phone")).credential=e,r}return N(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ow(e,"POST","/v2/accounts/mfaEnrollment:finalize",Dw(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ow(e,"POST","/v2/accounts/mfaSignIn:finalize",Dw(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(dT),vT=function(){function e(){S(this,e)}return N(e,null,[{key:"assertion",value:function(e){return pT._fromCredential(e)}}]),e}();vT.FACTOR_ID="phone";var mT=function(){function e(){S(this,e)}return N(e,null,[{key:"assertionForEnrollment",value:function(e,t){return yT._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return yT._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _w("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,YI(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",gT._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();mT.FACTOR_ID="totp";var yT=function(e){w(n,e);var t=x(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return N(n,[{key:"_finalizeEnroll",value:function(){var e=s(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _w("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",JI(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _w(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",RE(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(dT),gT=function(){function e(t,n,r,i,a,o,u){S(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return N(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(kT(e)||kT(t))&&(r=!0),r&&(kT(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),kT(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function kT(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var bT="@firebase/auth",wT="1.3.0",_T=function(){function e(t){S(this,e),this.auth=t,this.internalListeners=new Map}return N(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){_w(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var xT;!function(e){var t;null===(t=U())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function IT(){return window}xT="Browser",Xe(new ce("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;_w(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:xT,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:D_(xT)},l=new U_(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(g_);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Xe(new ce("auth-internal",(function(e){return function(e){return new _T(e)}(V_(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ft(bT,wT,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(xT)),ft(bT,wT,"esm2017");var ET=2e3;function ST(e,t,n){return TT.apply(this,arguments)}function TT(){return TT=s(o().mark((function e(t,n,r){var i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=IT(),u=a.BuildInfo,Iw(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,DT(n.sessionId);case 4:return s=e.sent,c={},R_()?c.ibi=u.packageName:C_()?c.apn=u.packageName:yw(t,"operation-not-supported-in-this-environment"),u.displayName&&(c.appDisplayName=u.displayName),c.sessionId=s,e.abrupt("return",uT(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,c));case 10:case"end":return e.stop()}}),e)}))),TT.apply(this,arguments)}function CT(){return CT=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=IT(),r=n.BuildInfo,i={},R_()?i.iosBundleId=r.packageName:C_()?i.androidPackageName=r.packageName:yw(t,"operation-not-supported-in-this-environment"),e.next=5,FS(t,i);case 5:case"end":return e.stop()}}),e)}))),CT.apply(this,arguments)}function NT(e){var t=IT().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function AT(e,t,n){return RT.apply(this,arguments)}function RT(){return RT=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=IT(),a=i.cordova,u=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var o=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){o||(o=window.setTimeout((function(){i(gw(t,"redirect-cancelled-by-user"))}),ET))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),C_()&&document.addEventListener("visibilitychange",l,!1),u=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),o&&window.clearTimeout(o)}}));case 5:return e.prev=5,u(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),RT.apply(this,arguments)}function PT(e){var t,n,r,i,a,o,u,s,c,l,f=IT();_w("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_w("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_w("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_w("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_w("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function DT(e){return OT.apply(this,arguments)}function OT(){return(OT=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=LT(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LT(e){if(Iw(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var MT=20,FT=function(e){w(n,e);var t=x(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return N(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),g(y(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OS);function UT(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:qT(),postBody:null,tenantId:e.tenantId,error:gw(e,"no-auth-event")}}function VT(e,t){return GT()._set(KT(e),t)}function jT(e){return BT.apply(this,arguments)}function BT(){return BT=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GT()._get(KT(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,GT()._remove(KT(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),BT.apply(this,arguments)}function zT(e,t){var n,r,i=function(e){var t=HT(e),n=t.link?decodeURIComponent(t.link):void 0,r=HT(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return HT(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=HT(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?gw(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function qT(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<MT;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function GT(){return g_(rE)}function KT(e){return w_("authEvent",e.config.apiKey,e.name)}function HT(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=$b(e.split("?"));t[0];return re(t.slice(1).join("?"))}var WT=function(){function e(){S(this,e),this._redirectPersistence=aE,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=AS,this._overrideRedirectResult=kS}return N(e,[{key:"_initialize",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new FT(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){yw(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=s(o().mark((function e(t,n,r,i){var a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return PT(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),dS.clear(),e.next=10,this._originValidation(t);case 10:return u=UT(t,r,i),e.next=13,VT(t,u);case 13:return e.next=15,ST(t,u,n);case 15:return s=e.sent,e.next=18,NT(s);case 18:return c=e.sent,e.abrupt("return",AT(t,a,c));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return CT.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=IT(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,u=setTimeout(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,jT(e);case 2:t.onEvent(YT());case 3:case"end":return n.stop()}}),n)}))),500),c=function(){var n=s(o().mark((function n(r){var i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(u),n.next=3,jT(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=zT(i,r.url)),t.onEvent(a||YT());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,c);var l=i,f="".concat(a.packageName.toLowerCase(),"://");IT().handleOpenURL=function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(f)&&c({url:t}),"function"===typeof l)try{l(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),QT=WT;function YT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:gw("no-auth-event")}}var JT=1e3;function $T(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function XT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();return!("file:"!==$T()&&"ionic:"!==$T()&&"capacitor:"!==$T()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ZT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();return W()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();return/Edge\/\d+/.test(e)}(e)}function eC(){try{var e=self.localStorage,t=sE();if(e)return e.setItem(t,"1"),e.removeItem(t),!ZT()||Q()}catch(n){return tC()&&Q()}return!1}function tC(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function nC(){return("http:"===$T()||"https:"===$T()||K()||XT())&&!(H()||G())&&eC()&&!tC()}function rC(){return XT()&&"undefined"!==typeof document}function iC(){return aC.apply(this,arguments)}function aC(){return(aC=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rC()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),JT);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oC={LOCAL:"local",NONE:"none",SESSION:"session"},uC=_w,sC="persistence";function cC(e,t){uC(Object.values(oC).includes(t),e,"invalid-persistence-type"),H()?uC(t!==oC.SESSION,e,"unsupported-persistence-type"):G()?uC(t===oC.NONE,e,"unsupported-persistence-type"):tC()?uC(t===oC.NONE||t===oC.LOCAL&&Q(),e,"unsupported-persistence-type"):uC(t===oC.NONE||eC(),e,"unsupported-persistence-type")}function lC(e){return fC.apply(this,arguments)}function fC(){return fC=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=hC(),r=w_(sC,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),fC.apply(this,arguments)}function hC(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var dC=_w,pC=function(){function e(){S(this,e),this.browserResolver=g_(hT),this.cordovaResolver=g_(QT),this.underlyingResolver=null,this._redirectPersistence=aE,this._completeRedirectFn=AS,this._overrideRedirectResult=kS}return N(e,[{key:"_initialize",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=s(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=s(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return rC()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return dC(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,iC();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vC(e){return e.unwrap()}function mC(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new wC(e,function(e,t){var n,r=se(e),i=t;return _w(t.customData.operationType,r,"argument-error"),_w(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),WI._fromError(r,i)}(e,t));else if(r){var i=yC(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function yC(e){var t=(e instanceof Y?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Y)&&"temporaryProof"in t&&"phoneNumber"in t)return $E.credentialFromResult(e);var n,r=t.providerId;if(!r||r===ew.PASSWORD)return null;switch(r){case ew.GOOGLE:n=Lx;break;case ew.FACEBOOK:n=Ox;break;case ew.GITHUB:n=Mx;break;case ew.TWITTER:n=Vx;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Fx._create(r,u):wx._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Dx(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Y?n.credentialFromError(e):n.credentialFromResult(e)}function gC(e,t){return t.catch((function(t){throw t instanceof Y&&mC(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,yC(t)),additionalUserInfo:KI(e),user:_C.getOrCreate(r)}}))}function kC(e,t){return bC.apply(this,arguments)}function bC(){return bC=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return gC(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),bC.apply(this,arguments)}var wC=function(){function e(t,n){S(this,e),this.resolver=n,this.auth=t.wrapped()}return N(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return gC(vC(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),_C=function(){function e(t){S(this,e),this._delegate=t,this.multiFactor=function(e){var t=se(e);return ZI.has(t)||ZI.set(t,XI._fromUser(t)),ZI.get(t)}(t)}return N(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gC(this.auth,oI(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kC(this.auth,KE(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gC(this.auth,cS(this._delegate,t,pC)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lC(V_(this.auth));case 2:return e.abrupt("return",SS(this._delegate,t,pC));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gC(this.auth,sI(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return kC(this.auth,function(e,t,n){return WE.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return gC(this.auth,function(e,t,n){return sS.apply(this,arguments)}(this._delegate,e,pC))}},{key:"reauthenticateWithRedirect",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lC(V_(this.auth));case 2:return e.abrupt("return",IS(this._delegate,t,pC));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return PI.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qx(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return FI(se(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return FI(se(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return JE.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return MI.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return DI.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();_C.USER_MAP=new WeakMap;var xC=_w,IC=function(){function e(t,n){if(S(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;xC(r,"invalid-api-key",{appName:t.name}),xC(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?pC:void 0;this._delegate=n.initialize({options:{persistence:SC(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(fw),this.linkUnderlyingAuth()}return N(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?_C.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){H_(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return wI.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return _I(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return bI.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gC(this._delegate,EI(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return RI.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Nx.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xC(nC(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,CS(this._delegate,pC);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",gC(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){V_(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=EC(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=EC(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return TI.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return kI.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cC(this._delegate,t),e.t0=t,e.next=e.t0===oC.SESSION?4:e.t0===oC.LOCAL?6:e.t0===oC.NONE?11:13;break;case 4:return n=aE,e.abrupt("break",14);case 6:return e.next=8,g_(NE)._isAvailable();case 8:return r=e.sent,n=r?NE:rE,e.abrupt("break",14);case 11:return n=b_,e.abrupt("break",14);case 13:return e.abrupt("return",yw("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return gC(this._delegate,function(e){return Gx.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return gC(this._delegate,iI(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return gC(this._delegate,function(e,t){return hI.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return gC(this._delegate,function(e,t,n){return iI(se(e),Ax.credential(t,n)).catch(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&yI(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return gC(this._delegate,function(e,t,n){return CI.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return kC(this._delegate,function(e,t,n){return GE.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xC(nC(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",gC(this._delegate,oS(this._delegate,t,pC)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xC(nC(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,lC(this._delegate);case 3:return e.abrupt("return",_S(this._delegate,t,pC));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return II.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function EC(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&_C.getOrCreate(e))},error:t,complete:n}}function SC(e,t){var n=function(e,t){var n=hC();if(!n)return[];var r=w_(sC,e,t);switch(n.getItem(r)){case oC.NONE:return[b_];case oC.LOCAL:return[NE,aE];case oC.SESSION:return[aE];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(NE)||n.push(NE),"undefined"!==typeof window)for(var r=0,i=[rE,aE];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(b_)||n.push(b_),n}IC.Persistence=oC;var TC=function(){function e(){S(this,e),this.providerId="phone",this._delegate=new $E(vC(ok.auth()))}return N(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return $E.credential(e,t)}}]),e}();TC.PHONE_SIGN_IN_METHOD=$E.PHONE_SIGN_IN_METHOD,TC.PROVIDER_ID=$E.PROVIDER_ID;var CC=_w,NC=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ok.app();S(this,e),CC(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new BE(i.auth(),t,n),this.type=this._delegate.type}return N(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();function AC(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function RC(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}!function(e){e.INTERNAL.registerComponent(new ce("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new IC(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:tw,PASSWORD_RESET:nw,RECOVER_EMAIL:rw,REVERT_SECOND_FACTOR_ADDITION:iw,VERIFY_AND_CHANGE_EMAIL:aw,VERIFY_EMAIL:ow}},EmailAuthProvider:Ax,FacebookAuthProvider:Ox,GithubAuthProvider:Mx,GoogleAuthProvider:Lx,OAuthProvider:Dx,SAMLAuthProvider:Ux,PhoneAuthProvider:TC,PhoneMultiFactorGenerator:vT,RecaptchaVerifier:NC,TwitterAuthProvider:Vx,Auth:IC,AuthCredential:Y_,Error:Y}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.6")}(ok);var PC,DC=function(){return DC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},DC.apply(this,arguments)},OC=function(e){return{loading:void 0===e||null===e,value:e}},LC=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return DC(DC({},e),{error:t.error,loading:!1,value:void 0});case"reset":return OC(t.defaultValue);case"value":return DC(DC({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),OC(n)),i=r[0],a=r[1],o=(0,t.useCallback)((function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})}),[e]),u=(0,t.useCallback)((function(e){a({type:"error",error:e})}),[]),s=(0,t.useCallback)((function(e){a({type:"value",value:e})}),[]);return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},MC=function(e,n){var r=LC((function(){return e.currentUser})),i=r.error,a=r.loading,o=r.setError,u=r.setValue,s=r.value;return(0,t.useEffect)((function(){var t=function(e,t,n,r){return se(e).onAuthStateChanged(t,n,r)}(e,(function(e){return AC(void 0,void 0,void 0,(function(){var t;return RC(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return u(e),[2]}}))}))}),o);return function(){t()}}),[e]),[s,a,i]};function FC(){return FC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FC.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(PC||(PC={}));var UC,VC="popstate";function jC(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function BC(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function zC(e,t){return{usr:e.state,key:e.key,idx:t}}function qC(e,t,n,r){return void 0===n&&(n=null),FC({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?KC(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function GC(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function KC(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function HC(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=PC.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=PC.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:GC(e);return jC(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(FC({},c.state,{idx:h}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(VC,p),f=e,function(){o.removeEventListener(VC,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=PC.Push;var r=qC(m.location,e,t);n&&n(r,e);var i=zC(r,h=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(a)}s&&f&&f({action:l,location:m.location,delta:1})},replace:function(e,t){l=PC.Replace;var r=qC(m.location,e,t);n&&n(r,e);var i=zC(r,h=d()),a=m.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(UC||(UC={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function WC(e,t,n){void 0===n&&(n="/");var r=uN(("string"===typeof t?KC(t):t).pathname||"/",n);if(null==r)return null;var i=QC(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=iN(i[o],oN(r));return a}function QC(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(jC(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=fN([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(jC(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),QC(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:rN(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=b(YC(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function YC(e){var t=e.split("/");if(0===t.length)return[];var n=$b(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=YC(i.join("/")),s=[];return s.push.apply(s,E(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,E(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var JC=/^:\w+$/,$C=3,XC=2,ZC=1,eN=10,tN=-2,nN=function(e){return"*"===e};function rN(e,t){var n=e.split("/"),r=n.length;return n.some(nN)&&(r+=tN),t&&(r+=XC),n.filter((function(e){return!nN(e)})).reduce((function(e,t){return e+(JC.test(t)?$C:""===t?ZC:eN)}),r)}function iN(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=aN({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:fN([i,l.pathname]),pathnameBase:hN(fN([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=fN([i,l.pathnameBase]))}return a}function aN(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);BC("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=d(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return BC(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function oN(e){try{return decodeURI(e)}catch(t){return BC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function uN(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function sN(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function cN(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function lN(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=KC(e):(jC(!(i=FC({},e)).pathname||!i.pathname.includes("?"),sN("?","pathname","search",i)),jC(!i.pathname||!i.pathname.includes("#"),sN("#","pathname","hash",i)),jC(!i.search||!i.search.includes("#"),sN("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?KC(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:dN(a),hash:pN(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var fN=function(e){return e.join("/").replace(/\/\/+/g,"/")},hN=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},dN=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},pN=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},vN=function(e){w(n,e);var t=x(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n)}(k(Error));function mN(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var yN=["post","put","patch","delete"],gN=(new Set(yN),["get"].concat(yN));new Set(gN),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function kN(){return kN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kN.apply(this,arguments)}var bN=t.createContext(null);var wN=t.createContext(null);var _N=t.createContext(null);var xN=t.createContext(null);var IN=t.createContext(null);var EN=t.createContext({outlet:null,matches:[],isDataRoute:!1});var SN=t.createContext(null);function TN(){return null!=t.useContext(IN)}function CN(){return TN()||jC(!1),t.useContext(IN).location}function NN(e){t.useContext(xN).static||t.useLayoutEffect(e)}function AN(){return t.useContext(EN).isDataRoute?function(){var e=jN(UN.UseNavigateStable).router,n=zN(VN.UseNavigateStable),r=t.useRef(!1);NN((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,kN({fromRouteId:n},i)))}),[e,n]);return i}():function(){TN()||jC(!1);var e=t.useContext(bN),n=t.useContext(xN),r=n.basename,i=n.navigator,a=t.useContext(EN).matches,o=CN().pathname,u=JSON.stringify(cN(a).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);return NN((function(){s.current=!0})),t.useCallback((function(t,n){if(void 0===n&&(n={}),s.current)if("number"!==typeof t){var a=lN(t,JSON.parse(u),o,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:fN([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(t)}),[r,i,u,o,e])}()}function RN(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(EN).matches,a=CN().pathname,o=JSON.stringify(cN(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return lN(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function PN(e,n,r){TN()||jC(!1);var i,a=t.useContext(xN).navigator,o=t.useContext(EN).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,CN());if(n){var f,h="string"===typeof n?KC(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||jC(!1),i=h}else i=l;var d=i.pathname||"/",p=WC(e,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=FN(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:fN([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:fN([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&v?t.createElement(IN.Provider,{value:{location:kN({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:PC.Pop}},v):v}function DN(){var e=function(){var e,n=t.useContext(SN),r=BN(VN.UseRouteError),i=zN(VN.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=mN(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var ON=t.createElement(DN,null),LN=function(e){w(r,e);var n=x(r);function r(e){var t;return S(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return N(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(EN.Provider,{value:this.props.routeContext},t.createElement(SN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function MN(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(bN);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(EN.Provider,{value:n},i)}function FN(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,u=null==(i=r)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||jC(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;r&&(c=i.route.errorElement||ON);var l=n.concat(o.slice(0,a+1)),f=function(){var n;return n=s?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(MN,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(LN,{location:r.location,revalidation:r.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}var UN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(UN||{}),VN=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(VN||{});function jN(e){var n=t.useContext(bN);return n||jC(!1),n}function BN(e){var n=t.useContext(wN);return n||jC(!1),n}function zN(e){var n=function(e){var n=t.useContext(EN);return n||jC(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||jC(!1),r.route.id}r.startTransition;function qN(e){var n=e.to,r=e.replace,i=e.state,a=e.relative;TN()||jC(!1);var o=t.useContext(EN).matches,u=CN().pathname,s=AN(),c=lN(n,cN(o).map((function(e){return e.pathnameBase})),u,"path"===a),l=JSON.stringify(c);return t.useEffect((function(){return s(JSON.parse(l),{replace:r,state:i,relative:a})}),[s,l,a,r,i]),null}function GN(e){jC(!1)}function KN(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?PC.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;TN()&&jC(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=KC(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,_=void 0===w?null:w,x=p.key,I=void 0===x?"default":x,E=t.useMemo((function(){var e=uN(m,h);return null==e?null:{location:{pathname:e,search:g,hash:b,state:_,key:I},navigationType:s}}),[h,m,g,b,_,I,s]);return null==E?null:t.createElement(xN.Provider,{value:d},t.createElement(IN.Provider,{children:a,value:E}))}function HN(e){var t=e.children,n=e.location;return PN(YN(t),n)}var WN=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(WN||{}),QN=new Promise((function(){}));t.Component;function YN(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(E(n),[i]);if(e.type!==t.Fragment){e.type!==GN&&jC(!1),e.props.index&&e.props.children&&jC(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=YN(e.props.children,a)),r.push(o)}else r.push.apply(r,YN(e.props.children,a))}})),r}var JN=n.p+"static/media/KnowledgeCacheLight.f71ebd4c513c36e3aa78.png",$N=n.p+"static/media/KnowledgeCacheDark.8d9c74d28c0f31b837d9.png";function XN(){return XN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XN.apply(this,arguments)}function ZN(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var eA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];var tA=r.startTransition;function nA(e){var n,r=e.basename,i=e.children,a=e.future,o=e.window,u=t.useRef();null==u.current&&(u.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),HC((function(e,t){var n=e.location;return qC("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:GC(t)}),null,n)));var s=u.current,c=d(t.useState({action:s.action,location:s.location}),2),l=c[0],f=c[1],h=(a||{}).v7_startTransition,p=t.useCallback((function(e){h&&tA?tA((function(){return f(e)})):f(e)}),[f,h]);return t.useLayoutEffect((function(){return s.listen(p)}),[s,p]),t.createElement(KN,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:s})}var rA="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,iA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aA=t.forwardRef((function(e,n){var r,i=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=e.unstable_viewTransition,d=ZN(e,eA),p=t.useContext(xN).basename,v=!1;if("string"===typeof l&&iA.test(l)&&(r=l,rA))try{var m=new URL(window.location.href),y=l.startsWith("//")?new URL(m.protocol+l):new URL(l),g=uN(y.pathname,p);y.origin===m.origin&&null!=g?l=g+y.search+y.hash:v=!0}catch(w){}var k=function(e,n){var r=(void 0===n?{}:n).relative;TN()||jC(!1);var i=t.useContext(xN),a=i.basename,o=i.navigator,u=RN(e,{relative:r}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:fN([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),b=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=r.preventScrollReset,s=r.relative,c=r.unstable_viewTransition,l=AN(),f=CN(),h=RN(e,{relative:s});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:GC(f)===GC(h);l(e,{replace:n,state:o,preventScrollReset:u,relative:s,unstable_viewTransition:c})}}),[f,l,h,a,o,i,e,u,s,c])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a,unstable_viewTransition:h});return t.createElement("a",XN({},d,{href:r||k,onClick:v||o?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:n,target:c}))}));var oA,uA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(oA||(oA={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(uA||(uA={}));var sA=n.p+"static/media/logout.a7cf3408bec8b53aa303.png",cA=n.p+"static/media/sun.09b1546a421326832a9c.png",lA=n.p+"static/media/moon.d91f118702503b40d9a7.png",fA=n.p+"static/media/blankHeart.c412cbaead4744166c20.png",hA=n.p+"static/media/redHeart.556c78a5a9b89d6b2eeb.png",dA=n.p+"static/media/clip (1).b83eb79bb001650ed93f.png",pA=n.p+"static/media/addBook.011ec3b780e15c20c3cc.png",vA=n.p+"static/media/close.bce59ddf2b4b4eb6d77b.png",mA=n(184);ok.initializeApp({apiKey:"AIzaSyANwg_2pkXYMpArJm9Owj9Y6X0ckkv0wx0",authDomain:"knowledgecache-110903.firebaseapp.com",projectId:"knowledgecache-110903",storageBucket:"knowledgecache-110903.appspot.com",messagingSenderId:"324674126372",appId:"1:324674126372:web:0e154f408c6659c24b0eb1",measurementId:"G-XT5WD4Y6SP"});var yA=ok.auth(),gA=ok.firestore(),kA=yA.currentUser;var bA=function(){var e=d(MC(yA),1)[0],n=d((0,t.useState)("dark"),2),r=n[0],i=n[1];function a(){"light"===r?i("dark"):"dark"===r&&i("light")}return console.log("Site opened"),(0,mA.jsx)("div",{className:"light"===r?"Site lightBG":"Site",children:e&&!0===e.emailVerified?(0,mA.jsxs)(mA.Fragment,{children:[(0,mA.jsx)(wA,{mode:r,changeMode:a}),(0,mA.jsxs)(HN,{children:[(0,mA.jsx)(GN,{path:"/libraryManagement/home",element:(0,mA.jsx)(SA,{mode:r,changeMode:a})}),(0,mA.jsx)(GN,{path:"/libraryManagement/profile",element:(0,mA.jsx)(NA,{mode:r})}),(0,mA.jsx)(GN,{path:"/libraryManagement/booklist",element:(0,mA.jsx)(EA,{mode:r})}),(0,mA.jsx)(GN,{path:"/libraryManagement/wishlist",element:(0,mA.jsx)(IA,{mode:r})}),(0,mA.jsx)(GN,{path:"/libraryManagement/requests",element:(0,mA.jsx)(AA,{mode:r})}),(0,mA.jsx)(GN,{path:"/*",element:(0,mA.jsx)(qN,{to:"/libraryManagement/home"})})]})]}):(0,mA.jsxs)(HN,{children:[(0,mA.jsx)(GN,{path:"/libraryManagement/signIn",element:(0,mA.jsx)(xA,{mode:r,changeMode:a})}),(0,mA.jsx)(GN,{path:"/libraryManagement/signUp",element:(0,mA.jsx)(_A,{mode:r,changeMode:a})}),(0,mA.jsx)(GN,{path:"/*",element:(0,mA.jsx)(qN,{to:"/libraryManagement/signIn"})})]})})};function wA(e){var t=e.mode,n=e.changeMode,r=gA.collection("users"),i=d(Xg(r),1)[0],a=AN();yA.currentUser;function o(){yA.signOut(),a("/libraryManagement/signIn")}var u=CN(),s=function(e){return u.pathname===e};return(0,mA.jsx)("div",{className:"NavParent",children:(0,mA.jsxs)("div",{className:"NavChild",children:[(0,mA.jsx)("div",{className:"Logo",children:(0,mA.jsx)(aA,{to:"/libraryManagement/home",className:"light"===t?s("/libraryManagement/home")?"itemLight active":"itemLight":"dark"===t?s("/libraryManagement/home")?"itemLight Dark active":"itemLight Dark":null,children:(0,mA.jsx)("img",{src:"light"===t?JN:$N,className:"LogoImg"})})}),i&&i.map((function(e){if(e.uid===yA.currentUser.uid){var r=e.role&&e.role.toLowerCase();return console.log(r),"student"===r?(0,mA.jsxs)("div",{className:"Menu",children:[(0,mA.jsx)(aA,{to:"/libraryManagement/profile",className:"light"===t?s("/libraryManagement/profile")?"itemLight active":"itemLight":"dark"===t?s("/libraryManagement/profile")?"itemLight Dark active":"itemLight Dark":null,children:"Profile"}),(0,mA.jsx)(aA,{to:"/libraryManagement/booklist",className:"light"===t?s("/libraryManagement/booklist")?"itemLight active":"itemLight":"dark"===t?s("/libraryManagement/booklist")?"itemLight Dark active":"itemLight Dark":null,children:"Booklist"}),(0,mA.jsx)(aA,{to:"/libraryManagement/wishlist",className:"light"===t?s("/libraryManagement/wishlist")?"itemLight active":"itemLight":"dark"===t?s("/libraryManagement/wishlist")?"itemLight Dark active":"itemLight Dark":null,children:(0,mA.jsx)("img",{src:hA,className:"signOutBtn"})}),(0,mA.jsx)("img",{src:sA,onClick:o,className:"signOutBtn"}),(0,mA.jsx)("img",{src:"light"===t?lA:cA,className:"signOutBtn",onClick:n})]},e.uid):"librarian"===r?(0,mA.jsxs)("div",{className:"Menu",children:[(0,mA.jsx)(aA,{to:"/libraryManagement/profile",className:"light"===t?s("/libraryManagement/profile")?"itemLight active":"itemLight":"dark"===t?s("/libraryManagement/profile")?"itemLight Dark active":"itemLight Dark":null,children:"Profile"}),(0,mA.jsx)(aA,{to:"/libraryManagement/booklist",className:"light"===t?s("/libraryManagement/booklist")?"itemLight active":"itemLight":"dark"===t?s("/libraryManagement/booklist")?"itemLight Dark active":"itemLight Dark":null,children:"Booklist"}),(0,mA.jsx)(aA,{to:"/libraryManagement/requests",className:"light"===t?s("/libraryManagement/requests")?"itemLight active":"itemLight":"dark"===t?s("/libraryManagement/requests")?"itemLight Dark active":"itemLight Dark":null,children:"Requests"}),(0,mA.jsx)("img",{src:sA,onClick:o,className:"signOutBtn"}),(0,mA.jsx)("img",{src:"light"===t?lA:cA,className:"signOutBtn",onClick:n})]},e.uid):null}return null}))]})})}function _A(e){e.mode;var n=AN(),r=gA.collection("users");console.log("SignUp opened");var i=d((0,t.useState)(""),2),a=i[0],u=i[1],c=d((0,t.useState)(""),2),l=c[0],f=c[1],h=d((0,t.useState)(""),2),p=h[0],v=h[1],m=d((0,t.useState)(""),2),y=m[0],g=m[1],k=d((0,t.useState)(""),2),b=k[0],w=k[1],_=d((0,t.useState)(""),2),x=_[0],I=_[1],E=d((0,t.useState)(!1),2),S=E[0],T=E[1];function C(){var e=ok.auth().currentUser;e?e.sendEmailVerification().then((function(){T(!0),console.log("Verification Sent"),alert("Email Verification Sent!")})).catch((function(e){alert("Error sending email verification:",e)})):console.error("No authenticated user found")}var N=function(){var e=s(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("Sign Up initiated"),e.prev=2,e.next=5,yA.createUserWithEmailAndPassword(l,b);case 5:if(n=e.sent,i=n.user,C(),!i){e.next=12;break}return e.next=11,r.doc(yA.currentUser.uid).set({name:a,email:l,phoneNumber:p,collegeID:y,role:x,uid:i.uid,emailVerified:S},{merge:!0});case 11:console.log("User created");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),document.getElementById("errorMsg").innerHTML="Error signing up:"+e.t0.message;case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,mA.jsx)("div",{className:"Home",children:(0,mA.jsx)("div",{className:"signInParent",children:(0,mA.jsxs)("form",{className:"signInBox",onSubmit:N,children:[(0,mA.jsx)("img",{src:$N,className:"logo",alt:"Logo"}),(0,mA.jsx)("p",{className:"signInHeading",children:"Sign Up"}),(0,mA.jsx)("input",{type:"text",placeholder:"Full Name",className:"inputEmail",value:a,onChange:function(e){return u(e.target.value)},required:!0}),(0,mA.jsx)("input",{type:"email",placeholder:"Email Address",className:"inputEmail",value:l,onChange:function(e){return f(e.target.value)},required:!0}),(0,mA.jsx)("input",{type:"tel",placeholder:"Phone Number",minLength:10,className:"inputEmail",value:p,onChange:function(e){return v(e.target.value)},required:!0}),(0,mA.jsx)("input",{type:"text",placeholder:"College ID",className:"inputEmail",value:y,onChange:function(e){return g(e.target.value)},required:!0}),(0,mA.jsx)("input",{type:"password",minLength:8,placeholder:"Password",className:"inputPassword",value:b,onChange:function(e){return w(e.target.value)},required:!0}),(0,mA.jsxs)("select",{name:"Role",id:"Role",className:"inputSelect",required:!0,value:x,onChange:function(e){I(e.target.value)},children:[(0,mA.jsx)("option",{for:"Role",value:"",className:"optionSelect",children:"-- Select --"}),(0,mA.jsx)("option",{for:"Role",value:"Student",className:"optionSelect",children:"Student"}),(0,mA.jsx)("option",{for:"Role",value:"Librarian",className:"optionSelect",children:"Librarian"})]}),(0,mA.jsxs)("div",{children:[(0,mA.jsx)("input",{type:"checkbox",id:"myCheckbox",className:"labelCheckBox",required:!0}),(0,mA.jsx)("label",{className:"labelText",for:"myCheckbox",children:"*The information provided is true to the best of my knowledge."})]}),(0,mA.jsx)("input",{className:"btn",type:"submit",onClick:C}),(0,mA.jsx)("p",{className:"labelText",id:"errorMsg"}),(0,mA.jsx)(aA,{to:"/librarymanagement/signIn",className:"createAccount",children:"Already a User? Log In instead"}),(0,mA.jsx)("button",{className:!0===S?"btn":"btn-disabled",onClick:function(e){e.preventDefault(),!0===kA.emailVerified?n("/librarymanagement/home"):alert("Email Verification Unsuccessful."),T(!1)},children:"Email Verified"})]})})})}function xA(e){e.mode;var n=AN(),r=d((0,t.useState)(""),2),i=r[0],a=r[1],u=d((0,t.useState)(""),2),c=u[0],l=u[1],f=function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("SignIn done"),e.prev=2,e.next=5,yA.signInWithEmailAndPassword(i,c);case 5:n("/librarymanagement/home"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),document.getElementById("errorMsg").innerHTML="Error signing in:"+e.t0.message;case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,mA.jsx)("div",{className:"Home",children:(0,mA.jsx)("div",{className:"signInParent",children:(0,mA.jsxs)("form",{className:"signInBox",onSubmit:f,children:[(0,mA.jsx)("img",{src:$N,className:"logo",alt:"Logo"}),(0,mA.jsx)("p",{className:"signInHeading",children:"Sign In"}),(0,mA.jsx)("input",{type:"email",placeholder:"Email Address",className:"inputEmail",value:i,onChange:function(e){return a(e.target.value)},required:!0}),(0,mA.jsx)("input",{type:"password",minLength:8,placeholder:"Password",className:"inputPassword",value:c,onChange:function(e){return l(e.target.value)},required:!0}),(0,mA.jsxs)("div",{className:"btnDiv",children:[(0,mA.jsx)("button",{className:"btn",type:"submit",onClick:f,children:"Sign In"}),(0,mA.jsx)("p",{onClick:function(){ok.auth().sendPasswordResetEmail(i).then((function(){alert("Password reset email sent. Check your inbox.")})).catch((function(e){alert(e.message)}))},className:"createAccount",children:"Forgot Password?"})]}),(0,mA.jsx)(aA,{to:"/librarymanagement/signUp",className:"createAccount",children:"New Member? Sign Up Here"}),(0,mA.jsx)("p",{className:"labelText",id:"errorMsg"})]})})})}function IA(e){var t=e.mode,n=gA.collection("users").doc(yA.currentUser.uid).collection("wishlist"),r=d(Xg(n),1)[0],i=function(){var e=s(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gA.collection("books").doc(t),e.next=3,n.doc(t).delete();case 3:return e.next=5,r.collection("liked").doc(yA.currentUser.uid).delete();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,mA.jsx)("div",{children:(0,mA.jsxs)("div",{className:"light"===t?"BookList":"BookList Dark",children:[(0,mA.jsxs)("div",{className:"bookBox",children:[(0,mA.jsx)("p",{children:"Wishlist Page"}),(0,mA.jsx)("input",{type:"search",placeholder:"Search Books Here",className:"searchBar"})]}),(0,mA.jsx)("div",{className:"bookDisplay",children:r&&r.map((function(e){return(0,mA.jsx)("div",{children:(0,mA.jsx)("div",{className:"cardParent",children:(0,mA.jsxs)("div",{className:"cardContent",children:[(0,mA.jsx)("div",{className:"cardRow1",children:(0,mA.jsx)("img",{src:e.bookImg,className:"bookCover"})}),(0,mA.jsxs)("div",{className:"cardRow2",children:[(0,mA.jsx)("img",{src:hA,title:"Like/ Unlike",className:"wishListHeart",onClick:function(){if(!e.liked)return null;i(e.bookId)}}),(0,mA.jsx)("button",{className:"btnOrder",title:"Request this Book",children:"Issue Now"})]}),(0,mA.jsxs)("div",{className:"cardRow3",children:[(0,mA.jsx)("p",{className:"bookName",title:"Book Name",children:e.bookName}),(0,mA.jsx)("p",{className:"bookAuthor",title:"Author Name",children:e.bookAuthor}),(0,mA.jsx)("p",{className:"bookGenre",title:"Book Genre",children:e.bookGenre}),(0,mA.jsx)("p",{className:"bookEdition",title:"Edition Book",children:e.bookEdition})]})]})})},e.bookId)}))})]})})}function EA(e){var n=e.mode,r=gA.collection("books"),i=r.doc().id,a=d((0,t.useState)(""),2),u=a[0],c=a[1],l=d((0,t.useState)(""),2),f=l[0],h=l[1],p=d((0,t.useState)(""),2),v=p[0],m=p[1],y=d((0,t.useState)(""),2),g=y[0],k=y[1],b=gA.collection("users").doc(yA.currentUser.uid).collection("wishlist"),w=d(Xg(b),1)[0],_=d(Xg(r),1)[0],x=d((0,t.useState)(!1),2),I=x[0],E=x[1],S=function(){var e=s(o().mark((function e(t,n,r,i,a,u,s){var c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),c=gA.collection("books").doc(t),e.next=4,b.doc(t).set({liked:!0});case 4:return e.next=6,c.collection("liked").doc(yA.currentUser.uid).set({liked:!0,bookId:t});case 6:if(!1!==I){e.next=13;break}if(E(!0),!t){e.next=11;break}return e.next=11,b.doc(t).set({bookId:t,bookName:n,bookImg:r,bookAuthor:i,bookEdition:a,bookGenre:u},{merge:!0});case 11:e.next=15;break;case 13:E(!1),b.doc(t).get().then((function(e){b.doc(t).delete().then((function(){console.log("Book removed from wishlist")})).catch((function(e){console.error("Error removing book from wishlist: ",e)}))}));case 15:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o,u){return e.apply(this,arguments)}}(),T=function(){var e=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=gA.collection("books").doc(t),e.next=4,b.doc(t).delete();case 4:return e.next=6,r.collection("liked").doc(yA.currentUser.uid).delete();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=d((0,t.useState)(null),2),N=C[0],A=C[1],R=d((0,t.useState)(""),2),P=R[0],D=R[1],O=function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,t.target.files[0];case 3:return n=e.sent,e.t0=D,e.t1=URL,e.next=8,n;case 8:return e.t2=e.sent,e.t3=e.t1.createObjectURL.call(e.t1,e.t2),(0,e.t0)(e.t3),e.t4=A,e.next=14,n;case 14:e.t5=e.sent,(0,e.t4)(e.t5),document.getElementById("addClip").src=P;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=document.getElementById("clipButton");L&&L.addEventListener("change",O);var M=function(){var e=s(o().mark((function e(t){var n,a,s,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handle book called"),t.preventDefault(),n=Qb(),a=N.name+"-"+Date.now(),o=a,s=jb(se(n),o),e.next=7,Hb(s,N);case 7:return e.next=9,Wb(s);case 9:if(l=e.sent,e.prev=10,console.log("try block"),!yA.currentUser){e.next=17;break}return console.log("try block1"),e.next=16,r.doc(i).set({bookname:u,author:f,edition:v,bookId:i,genre:g,bookImg:l},{merge:!0});case 16:console.log("Book added");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),console.log(e.t0);case 22:D(" "),A(" "),h(""),c(""),k(""),m(" "),A(" "),document.getElementById("addBookParent").style.display="none",console.log("handle book closed");case 31:case"end":return e.stop()}var o}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}();return(0,mA.jsxs)("div",{children:[(0,mA.jsx)("div",{id:"addBookParent",className:"addBookParent",children:(0,mA.jsxs)("div",{className:"addBookChild",children:[(0,mA.jsx)("img",{src:vA,className:"signOutBtn",onClick:function(){document.getElementById("addBookParent").style.display="none"}}),(0,mA.jsxs)("form",{className:"signInBox",onSubmit:M,children:[(0,mA.jsx)("p",{className:"signInHeading",children:"Add Book"}),(0,mA.jsx)("input",{type:"text",placeholder:"Book Name",className:"inputEmail",value:u,onChange:function(e){return c(e.target.value)},required:!0}),(0,mA.jsx)("input",{type:"text",placeholder:"Author Name",className:"inputEmail",value:f,onChange:function(e){return h(e.target.value)},required:!0}),(0,mA.jsx)("input",{type:"text",placeholder:"Edition",minLength:10,className:"inputEmail",value:v,onChange:function(e){return m(e.target.value)},required:!0}),(0,mA.jsx)("input",{type:"text",placeholder:"Genre",className:"inputEmail",value:g,onChange:function(e){return k(e.target.value)},required:!0}),(0,mA.jsx)("input",{type:"file",id:"clipButton",className:"attachment",onChange:O}),(0,mA.jsx)("img",{src:dA,id:"addClip",className:"clip",onClick:function(){var e=document.getElementById("clipButton");e.value=null;var t=new MouseEvent("click",{view:window,cancelable:!0,bubble:!0});e.dispatchEvent(t)},alt:"fileInputButton"}),(0,mA.jsx)("input",{className:"btn",type:"submit",onClick:M})]})]})}),(0,mA.jsxs)("div",{className:"light"===n?"BookList":"BookList Dark",children:[(0,mA.jsxs)("div",{className:"bookBox",children:[(0,mA.jsx)("input",{type:"search",placeholder:"Search Books Here",className:"searchBar"}),(0,mA.jsx)("img",{src:pA,className:"signOutBtn",onClick:function(){document.getElementById("addBookParent").style.display="flex"},title:"Add Book"})]}),(0,mA.jsx)("div",{className:"bookDisplay",children:_&&_.map((function(e){return(0,mA.jsx)("div",{children:(0,mA.jsx)("div",{className:"cardParent",children:(0,mA.jsxs)("div",{className:"cardContent",children:[(0,mA.jsx)("div",{className:"cardRow1",children:(0,mA.jsx)("img",{src:e.bookImg,className:"bookCover"})}),(0,mA.jsxs)("div",{className:"cardRow2",children:[(0,mA.jsx)("img",{src:w.some((function(t){return t.bookId===e.bookId}))?hA:fA,className:"wishListHeart",title:"Like/ Unlike",onClick:function(t){I?T(e.bookId,t):S(e.bookId,e.bookname,e.bookImg,e.author,e.edition,e.genre,t)}}),(0,mA.jsx)("button",{className:"btnOrder",children:"Issue Now"})]}),(0,mA.jsxs)("div",{className:"cardRow3",children:[(0,mA.jsx)("p",{className:"bookName",title:"Book Name",children:e.bookname}),(0,mA.jsx)("p",{className:"bookAuthor",title:"Author Name",children:e.author}),(0,mA.jsx)("p",{className:"bookGenre",title:"Book Genre",children:e.genre}),(0,mA.jsx)("p",{className:"bookEdition",title:"Edition Book",children:e.edition})]})]})})},e.bookId)}))})]})]})}function SA(e){var t=e.mode,n=e.changeMode,r=gA.collection("users"),i=d(Xg(r),1)[0],a=yA.currentUser;return console.log(a),console.log("Home Opened"),(0,mA.jsx)("div",{children:i&&i.map((function(e){if(e.uid===a.uid){var r=e.role&&e.role.toLowerCase();if("student"===r)return(0,mA.jsx)(CA,{mode:t,changeMode:n});if("librarian"===r)return(0,mA.jsx)(TA,{mode:t,changeMode:n})}return null}))})}function TA(e){var t=e.mode;return(0,mA.jsx)("div",{children:(0,mA.jsxs)("div",{className:"content-Home",children:[(0,mA.jsx)("p",{className:"light"===t?"text":"text Dark",children:"Welcome To Your Library."}),(0,mA.jsx)("p",{className:"light"===t?"text":"text Dark",children:"Books you have to get back today."}),(0,mA.jsx)("div",{className:"Booklist",children:(0,mA.jsxs)("table",{className:"bookTable",children:[(0,mA.jsxs)("tr",{className:"bookTableRow",children:[(0,mA.jsx)("th",{className:"bookCell",children:"BookId"}),(0,mA.jsx)("th",{className:"bookCell",children:"BookName"}),(0,mA.jsx)("th",{className:"bookCell",children:"LastDate"})]}),(0,mA.jsxs)("tr",{className:"bookTableRow",children:[(0,mA.jsx)("td",{className:"bookCell",children:"1234"}),(0,mA.jsx)("td",{className:"bookCell",children:"Stuart Little"}),(0,mA.jsx)("td",{className:"bookCell",children:"21/10/2023"})]})]})})]})})}function CA(e){var t=e.mode;return(0,mA.jsx)("div",{children:(0,mA.jsx)("div",{className:"light"===t?"text":"text Dark",children:(0,mA.jsxs)("div",{className:"notifications",children:[(0,mA.jsx)("p",{children:"NOTIFICATIONS"}),(0,mA.jsxs)("div",{children:[(0,mA.jsx)("p",{children:"Currently no notifications to display."}),(0,mA.jsx)("p",{children:"Visit regularly for daily updates."})]})]})})})}function NA(e){var t=e.mode,n=gA.collection("users"),r=d(Xg(n),1)[0];return r?(0,mA.jsx)("div",{className:"yourProfile",children:(0,mA.jsx)("div",{className:"yourProfileChild",children:r.map((function(e){return e.uid===yA.currentUser.uid?(0,mA.jsxs)("div",{className:"profile",children:[(0,mA.jsxs)("div",{className:"row1",children:[(0,mA.jsx)("div",{className:"col1",children:(0,mA.jsx)("img",{src:cA,className:"profileImage",alt:"Profile"})}),(0,mA.jsxs)("div",{className:"col2",children:[(0,mA.jsxs)("p",{className:"light"===t?"text":"text Dark",children:["Name: ",e.name]}),(0,mA.jsxs)("p",{className:"light"===t?"text":"text Dark",children:["College ID: ",e.collegeID]})]})]},e.uid),(0,mA.jsx)("div",{className:"light"===t?"row2":"row2 Dark",children:(0,mA.jsx)("div",{className:"Booklist",children:(0,mA.jsxs)("table",{className:"bookTable",children:[(0,mA.jsxs)("tr",{className:"bookTableRow",children:[(0,mA.jsx)("th",{className:"bookCell",children:"BookId"}),(0,mA.jsx)("th",{className:"bookCell",children:"BookName"}),(0,mA.jsx)("th",{className:"bookCell",children:"LastDate"})]}),(0,mA.jsxs)("tr",{className:"bookTableRow",children:[(0,mA.jsx)("td",{className:"bookCell",children:"1234"}),(0,mA.jsx)("td",{className:"bookCell",children:"Stuart Little"}),(0,mA.jsx)("td",{className:"bookCell",children:"21/10/2023"})]})]})})},e.uid)]}):null}))})}):null}function AA(e){var t=e.mode;return(0,mA.jsx)("div",{className:"light"===t?"text":"text Dark",children:"Request Page"})}var RA=function(){return(0,mA.jsx)("div",{className:"App",children:(0,mA.jsx)(bA,{})})},PA=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,mA.jsx)(t.StrictMode,{children:(0,mA.jsx)(nA,{children:(0,mA.jsx)(RA,{})})})),PA()}()}();
//# sourceMappingURL=main.8924bdb1.js.map